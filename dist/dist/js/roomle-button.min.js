!function e(t,n,i){function r(s,l){if(!n[s]){if(!t[s]){var c="function"==typeof require&&require;if(!l&&c)return c(s,!0);if(o)return o(s,!0);var a=new Error("Cannot find module '"+s+"'");throw a.code="MODULE_NOT_FOUND",a}var u=n[s]={exports:{}};t[s][0].call(u.exports,function(e){var n=t[s][1][e];return r(n?n:e)},u,u.exports,e,t,n,i)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<i.length;s++)r(i[s]);return r}({1:[function(e,t,n){(function(n,i){(function(){"use strict";function r(e){return"function"==typeof e||"object"==typeof e&&null!==e}function o(e){return"function"==typeof e}function s(e){K=e}function l(e){X=e}function c(){return function(){n.nextTick(h)}}function a(){return function(){z(h)}}function u(){var e=0,t=new te(h),n=document.createTextNode("");return t.observe(n,{characterData:!0}),function(){n.data=e=++e%2}}function d(){var e=new MessageChannel;return e.port1.onmessage=h,function(){e.port2.postMessage(0)}}function p(){return function(){setTimeout(h,1)}}function h(){for(var e=0;e<J;e+=2){var t=re[e],n=re[e+1];t(n),re[e]=void 0,re[e+1]=void 0}J=0}function v(){try{var t=e,n=t("vertx");return z=n.runOnLoop||n.runOnContext,a()}catch(i){return p()}}function f(e,t){var n=this,i=new this.constructor(S);void 0===i[le]&&D(i);var r=n._state;if(r){var o=arguments[r-1];X(function(){B(r,i,o,n._result)})}else P(n,i,e,t);return i}function m(e){var t=this;if(e&&"object"==typeof e&&e.constructor===t)return e;var n=new t(S);return w(n,e),n}function S(){}function y(){return new TypeError("You cannot resolve a promise with itself")}function g(){return new TypeError("A promises callback cannot return that same promise.")}function T(e){try{return e.then}catch(t){return de.error=t,de}}function b(e,t,n,i){try{e.call(t,n,i)}catch(r){return r}}function E(e,t,n){X(function(e){var i=!1,r=b(n,t,function(n){i||(i=!0,t!==n?w(e,n):O(e,n))},function(t){i||(i=!0,A(e,t))},"Settle: "+(e._label||" unknown promise"));!i&&r&&(i=!0,A(e,r))},e)}function _(e,t){t._state===ae?O(e,t._result):t._state===ue?A(e,t._result):P(t,void 0,function(t){w(e,t)},function(t){A(e,t)})}function k(e,t,n){t.constructor===e.constructor&&n===oe&&constructor.resolve===se?_(e,t):n===de?A(e,de.error):void 0===n?O(e,t):o(n)?E(e,t,n):O(e,t)}function w(e,t){e===t?A(e,y()):r(t)?k(e,t,T(t)):O(e,t)}function C(e){e._onerror&&e._onerror(e._result),I(e)}function O(e,t){e._state===ce&&(e._result=t,e._state=ae,0!==e._subscribers.length&&X(I,e))}function A(e,t){e._state===ce&&(e._state=ue,e._result=t,X(C,e))}function P(e,t,n,i){var r=e._subscribers,o=r.length;e._onerror=null,r[o]=t,r[o+ae]=n,r[o+ue]=i,0===o&&e._state&&X(I,e)}function I(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var i,r,o=e._result,s=0;s<t.length;s+=3)i=t[s],r=t[s+n],i?B(n,i,r,o):r(o);e._subscribers.length=0}}function R(){this.error=null}function L(e,t){try{return e(t)}catch(n){return pe.error=n,pe}}function B(e,t,n,i){var r,s,l,c,a=o(n);if(a){if(r=L(n,i),r===pe?(c=!0,s=r.error,r=null):l=!0,t===r)return void A(t,g())}else r=i,l=!0;t._state!==ce||(a&&l?w(t,r):c?A(t,s):e===ae?O(t,r):e===ue&&A(t,r))}function N(e,t){try{t(function(t){w(e,t)},function(t){A(e,t)})}catch(n){A(e,n)}}function M(){return he++}function D(e){e[le]=he++,e._state=void 0,e._result=void 0,e._subscribers=[]}function U(e){return new ye(this,e).promise}function x(e){var t=this;return new t(W(e)?function(n,i){for(var r=e.length,o=0;o<r;o++)t.resolve(e[o]).then(n,i)}:function(e,t){t(new TypeError("You must pass an array to race."))})}function Y(e){var t=this,n=new t(S);return A(n,e),n}function G(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function j(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function V(e){this[le]=M(),this._result=this._state=void 0,this._subscribers=[],S!==e&&("function"!=typeof e&&G(),this instanceof V?N(this,e):j())}function F(e,t){this._instanceConstructor=e,this.promise=new e(S),this.promise[le]||D(this.promise),W(t)?(this._input=t,this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?O(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&O(this.promise,this._result))):A(this.promise,H())}function H(){return new Error("Array Methods must be provided an Array")}function Z(){var e;if("undefined"!=typeof i)e=i;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var n=e.Promise;n&&"[object Promise]"===Object.prototype.toString.call(n.resolve())&&!n.cast||(e.Promise=Se)}var q;q=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};var z,K,$,W=q,J=0,X=function(e,t){re[J]=e,re[J+1]=t,J+=2,2===J&&(K?K(h):$())},Q="undefined"!=typeof window?window:void 0,ee=Q||{},te=ee.MutationObserver||ee.WebKitMutationObserver,ne="undefined"==typeof self&&"undefined"!=typeof n&&"[object process]"==={}.toString.call(n),ie="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,re=new Array(1e3);$=ne?c():te?u():ie?d():void 0===Q&&"function"==typeof e?v():p();var oe=f,se=m,le=Math.random().toString(36).substring(16),ce=void 0,ae=1,ue=2,de=new R,pe=new R,he=0,ve=U,fe=x,me=Y,Se=V;V.all=ve,V.race=fe,V.resolve=se,V.reject=me,V._setScheduler=s,V._setAsap=l,V._asap=X,V.prototype={constructor:V,then:oe,"catch":function(e){return this.then(null,e)}};var ye=F;F.prototype._enumerate=function(){for(var e=this.length,t=this._input,n=0;this._state===ce&&n<e;n++)this._eachEntry(t[n],n)},F.prototype._eachEntry=function(e,t){var n=this._instanceConstructor,i=n.resolve;if(i===se){var r=T(e);if(r===oe&&e._state!==ce)this._settledAt(e._state,t,e._result);else if("function"!=typeof r)this._remaining--,this._result[t]=e;else if(n===Se){var o=new n(S);k(o,e,r),this._willSettleAt(o,t)}else this._willSettleAt(new n(function(t){t(e)}),t)}else this._willSettleAt(i(e),t)},F.prototype._settledAt=function(e,t,n){var i=this.promise;i._state===ce&&(this._remaining--,e===ue?A(i,n):this._result[t]=n),0===this._remaining&&O(i,this._result)},F.prototype._willSettleAt=function(e,t){var n=this;P(e,void 0,function(e){n._settledAt(ae,t,e)},function(e){n._settledAt(ue,t,e)})};var ge=Z,Te={Promise:Se,polyfill:ge};"function"==typeof define&&define.amd?define(function(){return Te}):"undefined"!=typeof t&&t.exports?t.exports=Te:"undefined"!=typeof this&&(this.ES6Promise=Te),ge()}).call(this)}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:2}],2:[function(e,t,n){function i(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function o(e){if(d===setTimeout)return setTimeout(e,0);if((d===i||!d)&&setTimeout)return d=setTimeout,setTimeout(e,0);try{return d(e,0)}catch(t){try{return d.call(null,e,0)}catch(t){return d.call(this,e,0)}}}function s(e){if(p===clearTimeout)return clearTimeout(e);if((p===r||!p)&&clearTimeout)return p=clearTimeout,clearTimeout(e);try{return p(e)}catch(t){try{return p.call(null,e)}catch(t){return p.call(this,e)}}}function l(){m&&v&&(m=!1,v.length?f=v.concat(f):S=-1,f.length&&c())}function c(){if(!m){var e=o(l);m=!0;for(var t=f.length;t;){for(v=f,f=[];++S<t;)v&&v[S].run();S=-1,t=f.length}v=null,m=!1,s(e)}}function a(e,t){this.fun=e,this.array=t}function u(){}var d,p,h=t.exports={};!function(){try{d="function"==typeof setTimeout?setTimeout:i}catch(e){d=i}try{p="function"==typeof clearTimeout?clearTimeout:r}catch(e){p=r}}();var v,f=[],m=!1,S=-1;h.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];f.push(new a(e,t)),1!==f.length||m||o(c)},a.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=u,h.addListener=u,h.once=u,h.off=u,h.removeListener=u,h.removeAllListeners=u,h.emit=u,h.binding=function(e){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(e){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},{}],3:[function(e,t,n){"use strict";var i=e("./controllers/Controllers"),r=e("./services/SettingsService"),o=e("./services/EventHandlerService"),s=e("./services/ButtonsService"),l=e("./services/DomBuilderService"),c=e("./services/PolyfillService"),a=e("./services/MobileRedirectService"),u=e("./services/MobileDetectService"),d=e("./services/RoomleTypeService"),p=e("./services/ImagesService"),h=function(){function e(e){this.domBuilder=l.DomBuilderService.inject(),this.imagesService=p.ImagesService.inject(),this.eventHandler=o.EventHandlerService.inject(),this.polyfillService=c.PolyfillService.inject(),this.mobileRedirectService=a.MobileRedirectService.inject(),this.mobileDetectService=u.MobileDetectService.inject(),r.SettingsService.init(e),this.imagesService.preloadImages(),this.addCSS(),this.boot()}return e.prototype.addCSS=function(){var e="rml-button-lib",t=document.getElementById(e);if(t){var n=document.head||document.getElementsByTagName("head")[0],i=t.getAttribute("src"),r=i.replace(/\.js/g,".css").replace(/\/js\//g,"/css/"),o=document.createElement("link");o.href=r,o.rel="stylesheet",o.media="all",o.setAttribute("integrity","sha256-o8UhBHHk97Z5wNJ2xWQE0Zl64fbaH8PbbdyASFEnrHs="),n.appendChild(o)}},e.prototype.setupClickListener=function(e){var t=this;e.addEventListener("click",function(e){return t.eventHandler.handle(e)})},e.prototype.boot=function(){var e=i,t=document.body;if(this.domBuilder.addCSS(),r.SettingsService.settings.container){var n=document.body.querySelectorAll(r.SettingsService.settings.container);n.length&&(t=n[0])}r.SettingsService.settings.createPopUp&&this.domBuilder.buildPopUp(t),this.setupClickListener(t);var o=r.SettingsService.settings.selector;for(var s in e)if(e.hasOwnProperty(s)){if("RoomleController"===s&&"lib"===r.SettingsService.settings.mode)continue;var l=e[s];"function"==typeof l.parse&&l.parse(o,t)}},e.prototype.openCustomPopUp=function(e,t,n){var i=this;this.domBuilder.buildCustomPopUp(t,n),setTimeout(function(){i.eventHandler.dispatchOpenPopUp(e)},1)},e.prototype.dispatchClick=function(e,t,n,i,r){void 0===r&&(r=null),this.eventHandler.dispatch(e,t,n,s.ButtonsService.convertButtonTypeToEnum(i),r)},e.prototype.getDomLinkFor=function(e,t,n,i){void 0===i&&(i=!1);var r=d.RoomleTypeService.convertTypeToEnum(n),o=s.ButtonsService.convertButtonTypeToEnum(e),l=this.mobileDetectService.generateLink(t,r,o),c={isHighlighted:i,buildAnyway:!0};return this.domBuilder.buildLink(l,c)},e.prototype.appendButtons=function(e,t,n){var i=this,r=this.getLinks(t,n);r.forEach(function(t){e.appendChild(i.domBuilder.buildLink(t))})},e.prototype.execDeeplink=function(e,t,n,i,r){void 0===i&&(i=!1),void 0===r&&(r=null);var o=d.RoomleTypeService.convertTypeToEnum(t),l=s.ButtonsService.convertButtonTypeToEnum(n),c=this.mobileDetectService.generateLink(e,o,l);if(c.alternate){var a=document.createEvent("Event");a.initEvent("execDeeplink",!0,!0),this.eventHandler.dispatch(a,t,e,s.BUTTON_TYPE.TRIGGER,n,i)}else this.mobileRedirectService.redirect(c,i,r)},e.prototype.getLinks=function(e,t,n){return void 0===n&&(n=null),this.mobileDetectService.getLinks(e,d.RoomleTypeService.convertTypeToEnum(t),n)},e.getInstance=function(t){return this._instance instanceof e||(this._instance=new this(t)),window.RoomleButtonInstance||(window.RoomleButtonInstance=this._instance,r.SettingsService.settings.callback.booted()),this._instance},e}();n.RoomleButton=h},{"./controllers/Controllers":6,"./services/ButtonsService":12,"./services/DomBuilderService":14,"./services/EventHandlerService":15,"./services/ImagesService":17,"./services/MobileDetectService":18,"./services/MobileRedirectService":19,"./services/PolyfillService":20,"./services/RoomleTypeService":22,"./services/SettingsService":23}],4:[function(e,t,n){"use strict";var i=e("./Environments"),r=function(){function e(){}return e.settings=function(){var t={rapi:"api.test.roomle.com/v2",protocol:"https://",rmlco:"",shortlink:function(t,n,r,o){return void 0===o&&(o=null),e.env!==i.Environments.TEST&&o?"http://rml.co/"+o+"/"+r:window.location.host+"/deeplink?id="+n+"&type="+t+"&button="+r}};return e.env!==i.Environments.TEST&&(t.rapi="api.roomle.com/v2"),t.rmlco=t.protocol+t.rapi+"/shortIds",t},Object.defineProperty(e,"env",{get:function(){return this.envIndicator.substring(3,this.envIndicator.length-3)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"config",{get:function(){return e.settings()},enumerable:!0,configurable:!0}),e.envIndicator="###production###",e}();n.Environment=r},{"./Environments":5}],5:[function(e,t,n){"use strict";var i=function(){function e(){}return e.PRODUCTION="production",e.TEST="test",e}();n.Environments=i},{}],6:[function(e,t,n){"use strict";var i=e("./RoomleController");n.RoomleController=i.RoomleController;var r=e("./PopupController");n.PopupController=r.PopupController},{"./PopupController":7,"./RoomleController":8}],7:[function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},r=e("../lib/Controller"),o=e("../services/SettingsService"),s=e("../services/EventHandlerService"),l=e("../services/DomBuilderService"),c=e("../services/ImagesService"),a=function(e){function t(t){var n=this;e.call(this,t),this.eventHandlerService=s.EventHandlerService.inject(),this.domBuilderService=l.DomBuilderService.inject(),this.imagesService=c.ImagesService.inject(),o.SettingsService.settings.createPopUp&&(this.eventHandlerService.subscribe(s.EVENT_TYPES.TRIGGER,this.openPopup.bind(this)),this.eventHandlerService.subscribe(s.EVENT_TYPES.POP_UP_OPEN,this.simpleOpen.bind(this)),this.eventHandlerService.subscribe(s.EVENT_TYPES.POP_UP_CLOSE,this.closePopup.bind(this)),this.$(".rml-md-overlay")[0].addEventListener("click",function(){return n.closePopup()}),this.$(".rml-popup--close")[0].addEventListener("click",function(){return n.closePopup()}),o.SettingsService.settings.showBackButton?this.$(".rml-popup--back")[0].addEventListener("click",function(){return n.back()}):this.$(".rml-popup--back")[0].classList.add("rml-popup--back__hide"))}return i(t,e),t.prototype.closePopup=function(){var e=this.$(".rml-popup")[0].classList;if(e.contains("rml-md-show")){e.remove("rml-md-show");var t=this.$(".rml-popup--back")[0];if(t.classList.remove("rml-popup--back__show"),this.unfreezeScrolling(),"function"==typeof o.SettingsService.settings.callback.popupClose){var n=this.id?this.id:"CUSTOM",i=this.type?this.type:"CUSTOM";o.SettingsService.settings.callback.popupClose(n,i)}}else e.add("rml-md-show"),this.freezeScrolling()},t.prototype.back=function(){var e=this.$(".rml-deeplink--slider")[0];e.classList.remove("rml-deeplink__hint");var t=this.$(".rml-deeplink__hint-container")[0];t.innerHTML="";var n=this.$(".rml-popup--back")[0];n.classList.remove("rml-popup--back__show");var i=this.$(".rml-deeplink--hint");if(i.length){var r=i[0];r.classList.remove("rml-hint__show")}},t.prototype.simpleOpen=function(e,t,n){e.preventDefault(),this.id=t,this.type=n;var i=document.querySelectorAll("["+o.SettingsService.settings.popUpSelector+"]"),r=i[0].querySelectorAll(".rml-md-modal");return r[0].classList.contains("rml-md-show")?r[0].classList.remove("rml-md-show"):r[0].classList.add("rml-md-show"),this.freezeScrolling(),"function"==typeof o.SettingsService.settings.callback.popupOpen&&o.SettingsService.settings.callback.popupOpen(t?t:"CUSTOM",n?n:"CUSTOM"),r[0]},t.prototype.openPopup=function(e,t,n,i,r){var s=this,l=this.simpleOpen(e,t,n),c=l.querySelectorAll(".rml-generated-content");c[0].innerHTML="";var a=document.createElement("div");a.classList.add("rml-deeplink--slider"),a.classList.add("rml-deeplink--links");var u=document.createElement("div");u.classList.add("rml-deeplink--slide"),u.classList.add("rml-deeplink--overview");var d=document.createElement("div");d.classList.add("rml-deeplink--slide"),d.classList.add("rml-deeplink--alternate"),i.forEach(function(e){var t=e.type===r,n=s.domBuilderService.buildLink(e,{isHighlighted:t,slideMode:!0,clickedHint:function(){d.innerHTML="";var t=document.createElement("div");t.classList.add("rml-deeplink__hint-container");var i=document.createElement("div"),r=document.createElement("div");i.classList.add("rml-deeplink__hint-img"),r.classList.add("rml-deeplink__hint-link");var l=document.createElement("img"),c=s.imagesService.images[e.alternate];l.setAttribute("src",c),i.appendChild(l),t.appendChild(i);var u=document.querySelector(".rml-popup--back");o.SettingsService.settings.showBackButton&&u.classList.add("rml-popup--back__show");var p=n.cloneNode(!0);r.appendChild(p),s.domBuilderService.addShortlink(r,e.roomleType,e.type,e.id),t.appendChild(r),d.appendChild(t),a.classList.contains("rml-deeplink__hint")?a.classList.remove("rml-deeplink__hint"):a.classList.add("rml-deeplink__hint");var h=r.querySelector(".rml-deeplink--hint");s.domBuilderService.addShortlink(r,e.roomleType,e.type,e.id),h.classList.add("rml-hint__show");var v=d.querySelector(".rml-deeplink--row");v.addEventListener("click",function(e){e.preventDefault();var t=r.querySelector("input");return t.select(),!1}),"function"==typeof o.SettingsService.settings.callback.clickedHint&&o.SettingsService.settings.callback.clickedHint(e.id,e.roomleType,e.type)}});n&&u.appendChild(n)}),a.appendChild(u),a.appendChild(d),c[0].appendChild(a)},t.prototype.freezeScrolling=function(){var e=document.querySelector("html"),t=document.body;if("fixed"!==e.style.position){var n=e.scrollTop?e.scrollTop:t.scrollTop;window.innerWidth>e.offsetWidth&&(e.style.overflowY="scroll"),e.style.width="100%",e.style.height="100%",e.style.position="fixed",e.style.top=-n+"px"}},t.prototype.unfreezeScrolling=function(){var e=document.querySelector("html"),t=document.body;if("fixed"===e.style.position){e.style.position="static";var n=-parseInt(e.style.top,10);e.scrollTop=n,t.scrollTop=n,e.style.position="",e.style.width="",e.style.height="",e.style.top="",e.style.overflowY=""}},t.selector="[data-rml-deeplink-popup-container]",t}(r.Controller);n.PopupController=a},{"../lib/Controller":9,"../services/DomBuilderService":14,"../services/EventHandlerService":15,"../services/ImagesService":17,"../services/SettingsService":23}],8:[function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},r=e("../lib/Controller"),o=e("../services/DomBuilderService"),s=e("../services/RoomleTypeService"),l=e("../services/SettingsService"),c=function(e){function t(t){if(e.call(this,t),this.id=null,this.type=null,this.domBuilder=o.DomBuilderService.inject(),t){var n=l.SettingsService.settings.dataSelector.id,i=l.SettingsService.settings.dataSelector.type;this.id=t.getAttribute(n),this.type=s.RoomleTypeService.convertTypeToEnum(t.getAttribute(i)),null!==this.type&&this.id&&this.addButtons(this.type)}}return i(t,e),t.prototype.addButtons=function(e){if(!l.SettingsService.settings.createNoButtons){var t=this.$();if(t){var n=this.domBuilder.getButtons(e);t.appendChild(n)}}},t}(r.Controller);n.RoomleController=c},{"../lib/Controller":9,"../services/DomBuilderService":14,"../services/RoomleTypeService":22,"../services/SettingsService":23}],9:[function(e,t,n){"use strict";var i=function(){function e(e){this._element=e}return e.prototype.$=function(e){if(!(this._element instanceof Element))throw new Error("This controller has no element!");return e?this._element.querySelectorAll(e):this._element},e.prototype.getControllersByClass=function(t){for(var n=e._instances,i=[],r=0,o=n.length;r<o;r++){var s=n[r];s instanceof t&&i.push(s)}return i},e.beforeInstantiating=function(e){},e.afterInstantiating=function(e,t){},e.parse=function(t,n){if(void 0===n&&(n=document.body),"string"==typeof this.selector&&this.selector.length)t=this.selector;else if(!t)return;var i=n.querySelectorAll(t);this.beforeInstantiating(i);for(var r=0;r<i.length;r++){var o=i[r],s=/^function\s+([\w\$]+)\s*\(/.exec(this.toString())[1];s=s.toLocaleLowerCase(),o.getAttribute(e.PARSE_ID_ATTRIBUTE+"-"+s)||(o.setAttribute(e.PARSE_ID_ATTRIBUTE+"-"+s,Math.floor(10*Math.random()+1)*Date.now()+""),e._instances.push(new this(o)))}this.afterInstantiating(i,e._instances)},e._instances=[],e.PARSE_ID_ATTRIBUTE="data-parse-id",e}();n.Controller=i},{}],10:[function(e,t,n){"use strict";var i=function(){function e(){}return e.getInstance=function(){return this._instance instanceof e||(this._instance=new this),this._instance},e.inject=function(){return this.getInstance()},e}();n.Service=i},{}],11:[function(e,t,n){"use strict";var i=e("./services/MobileDetectService"),r=e("./RoomleButton"),o=i.MobileDetectService.inject();o.isIOS(),r.RoomleButton.getInstance(window.RoomleButtonSettings)},{"./RoomleButton":3,"./services/MobileDetectService":18}],12:[function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},r=e("../lib/Service"),o=e("../utils/EnumEx");!function(e){e[e.TRIGGER=0]="TRIGGER",e[e.ADD=1]="ADD",e[e.VISUALIZE=2]="VISUALIZE",e[e.CONFIGURE=3]="CONFIGURE",e[e.AR=4]="AR",e[e.MARK=5]="MARK",e[e.START_NOW=6]="START_NOW",e[e.VR=7]="VR"}(n.BUTTON_TYPE||(n.BUTTON_TYPE={}));var s=n.BUTTON_TYPE,l=function(e){function t(){e.call(this),this.availableButtons=o.EnumEx.getValues(s)}return i(t,e),t.convertButtonTypeToEnum=function(e){return"trigger"===e?s.TRIGGER:"add"===e?s.ADD:"ar"===e?s.AR:"configure"===e?s.CONFIGURE:"mark"===e?s.MARK:"visualize"===e?s.VISUALIZE:"vr"===e?s.VR:"start_now"===e?s.START_NOW:void 0},t.convertButtonType=function(e){return e===s.TRIGGER?"trigger":e===s.ADD?"add":e===s.AR?"ar":e===s.CONFIGURE?"configure":e===s.MARK?"mark":e===s.VISUALIZE?"visualize":e===s.VR?"vr":e===s.START_NOW?"start_now":void 0},t}(r.Service);n.ButtonsService=l},{"../lib/Service":10,"../utils/EnumEx":24}],13:[function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},r=e("../lib/Service"),o=function(e){function t(){e.apply(this,arguments)}return i(t,e),t.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];console.log.apply(console,e)},t.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];console.warn.apply(console,e)},t.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];console.error.apply(console,e)},t}(r.Service);n.ConsoleService=o},{"../lib/Service":10}],14:[function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},r=e("../lib/Service"),o=e("./MobileDetectService"),s=e("./SettingsService"),l=e("./ButtonsService"),c=e("./RoomleTypeService"),a=e("./IconsService"),u=e("./ConsoleService"),d=e("./MobileRedirectService"),p=e("../controllers/PopupController"),h=e("../services/RequestService"),v=e("../config/Environment"),f=function(e){function t(){e.apply(this,arguments),this.mobileDetect=o.MobileDetectService.inject(),this.buttonsService=l.ButtonsService.inject(),this.iconsService=a.IconsService.inject(),this.mobileRedirectService=d.MobileRedirectService.inject(),this.requestService=h.RequestService.inject(),this.elementCache={},this.buttonsCache={},this.shortLinkCache={},this.waitingForShortLink=!1}return i(t,e),t.prototype.createCSS=function(e){var t="";for(var n in e)e.hasOwnProperty(n)&&(t+=n+":"+e[n]+";");return t},t.prototype.addCSS=function(){if(!s.SettingsService.settings.createNoButtons){var e=this.createCSS(s.SettingsService.settings.css.buttons);e="."+s.SettingsService.settings.html.containerClass+"{"+e+"visibility: hidden;}";var t=this.createCSS(s.SettingsService.settings.css.item);t=s.SettingsService.settings.selector+"{"+t+"}";var n=".rml-md-modal{visibility:hidden;}",i=e+t+n,r=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css",o.appendChild(document.createTextNode(i)),r.appendChild(o)}},t.prototype.build=function(e,t){if(!this.elementCache[e]){var n=document.createDocumentFragment(),i=document.createElement(s.SettingsService.settings.html.buttonElement),r=l.ButtonsService.convertButtonType(e);i.setAttribute(s.SettingsService.settings.dataSelector.action,r),n.appendChild(i),this.elementCache[e]=n}return this.elementCache[e].cloneNode(!0)},t.prototype.buildTrigger=function(){var e=l.BUTTON_TYPE.TRIGGER,t=l.ButtonsService.convertButtonType(e);if(!this.elementCache[e]){var n=document.createDocumentFragment(),i=document.createElement(s.SettingsService.settings.html.buttonElement);i.setAttribute(s.SettingsService.settings.dataSelector.action,t);var r=this.iconsService.create(t);i.appendChild(r),n.appendChild(i),this.elementCache[e]=n}return this.elementCache[e].cloneNode(!0)},t.prototype.buildPopUpDom=function(){var e=document.body.querySelectorAll("[data-rml-deeplink-popup-container]");if(e&&e.length>0)return e[0];var t=document.createElement("div");t.setAttribute("data-rml-deeplink-popup-container",""),t.classList.add("rml-btn");var n=document.createElement("div");n.classList.add("rml-md-modal"),n.classList.add("rml-popup"),n.classList.add("rml-md-effect-1"),n.setAttribute("data-rml-deeplink-popup","");var i=document.createElement("div");i.classList.add("rml-md-content");var r=document.createElement("div");r.classList.add("rml-popup--close");var o=document.createElement("div");o.classList.add("rml-popup--back");var s=document.createElement("div");s.classList.add("rml-generated-content");var l=document.createElement("div");return l.classList.add("rml-md-overlay"),i.appendChild(r),i.appendChild(o),i.appendChild(s),n.appendChild(i),t.appendChild(n),t.appendChild(l),t},t.prototype.buildCustomPopUp=function(e,t){void 0===t&&(t=document.body);var n=this.buildPopUpDom(),i=n.querySelectorAll(".rml-md-content")[0],r=i.querySelector(".rml-generated-content");r.innerHTML="",e&&r.appendChild(e);var o=document.body.querySelectorAll("[data-rml-deeplink-popup-container]");if(!o||0===o.length){t.appendChild(n);var l=s.SettingsService.settings.selector,c=document.body;p.PopupController.parse(l,c)}},t.prototype.buildPopUp=function(e){void 0===e&&(e=document.body);var t=this.buildPopUpDom();e.appendChild(t)},t.prototype.buildAddToPlan=function(){return this.build(l.BUTTON_TYPE.ADD,"Plan")},t.prototype.buildVisualize=function(){return this.build(l.BUTTON_TYPE.VISUALIZE,"Visualize")},t.prototype.buildConfigure=function(){return this.build(l.BUTTON_TYPE.CONFIGURE,"Configure")},t.prototype.buildAR=function(){return this.build(l.BUTTON_TYPE.AR,"Augmented Reality")},t.prototype.buildMark=function(){return this.build(l.BUTTON_TYPE.MARK,"Mark")},t.prototype.buildVR=function(){return this.build(l.BUTTON_TYPE.VR,"Virtual Reality")},t.prototype.buildButtons=function(e){var t=this,n="";if(this.buttonsService.availableButtons.forEach(function(i){t.mobileDetect.generateLink("",e,i)&&(n+=i)}),!this.buttonsCache[n]){var i=document.createDocumentFragment(),r=document.createElement(s.SettingsService.settings.html.containerType);r.classList.add(s.SettingsService.settings.html.containerClass);var o=document.createElement(s.SettingsService.settings.html.buttonsContainer),c=!1;if(this.buttonsService.availableButtons.forEach(function(n){var i=t.mobileDetect.generateLink("",e,n);if(i){if(s.SettingsService.settings.showOnlyTrigger)return void(c=!0);if(n===l.BUTTON_TYPE.ADD){var r=t.buildAddToPlan();return o.appendChild(r),void(c=!0)}if(n===l.BUTTON_TYPE.AR){var a=t.buildAR();return o.appendChild(a),void(c=!0)}if(n===l.BUTTON_TYPE.CONFIGURE){var d=t.buildConfigure();return o.appendChild(d),void(c=!0)}if(n===l.BUTTON_TYPE.MARK){var p=t.buildMark();return o.appendChild(p),void(c=!0)}if(n===l.BUTTON_TYPE.VISUALIZE){var h=t.buildVisualize();return o.appendChild(h),void(c=!0)}if(n===l.BUTTON_TYPE.VR){var v=t.buildVR();return o.appendChild(v),void(c=!0)}u.ConsoleService.error('ButtonType "'+n+'" unknown')}}),c){var a=this.buildTrigger();o.insertBefore(a,o.firstChild),r.appendChild(o)}i.appendChild(r),this.buttonsCache[n]=i}return this.buttonsCache[n].cloneNode(!0)},t.prototype.getButtons=function(e){return this.buildButtons(e)},t.prototype.buildDeeplink=function(e,t){var n=1;e===c.ROOMLE_TYPE.CONFIGURATION&&(n=3),e!==c.ROOMLE_TYPE.CONFIGURABLE_ITEM&&e!==c.ROOMLE_TYPE.ITEM||(n=4);var i="anonymous",r=new Date,o="roomle_portal_v2",s=r.toISOString()+";"+i+";"+o;return s="03-"+window.btoa(s),this.requestService.fetchJSON(v.Environment.config.rmlco,{method:"POST",headers:{apiKey:"roomle_portal_v2",currentTenant:9,language:"en",locale:"en",token:s},body:{shortId:{type:n,referencedId:t}}})},t.prototype.isAvailableLink=function(e){return l.ButtonsService.convertButtonTypeToEnum(e)!==l.BUTTON_TYPE.MARK&&l.ButtonsService.convertButtonTypeToEnum(e)!==l.BUTTON_TYPE.START_NOW},t.prototype.createDeeplinkInput=function(e,t){e.innerHTML="";var n=document.createElement("input");return n.setAttribute("type","text"),n.setAttribute("value",t),n.setAttribute("readonly","readonly"),n.addEventListener("click",function(e){e.stopImmediatePropagation(),e.preventDefault(),n.select()}),e.appendChild(n),n},t.prototype.createCopySvg=function(e,t){if("function"==typeof document.execCommand){var n=this.iconsService.createCopy();n.classList.add("rml-clickable"),n.classList.add("rml-fake-link"),n.classList.add("rml-icons__copy"),n.addEventListener("click",function(){t.select();try{document.execCommand("copy")}catch(e){}}),e.appendChild(n)}},t.prototype.addShortlink=function(e,t,n,i){var r=this,o=e.querySelector(".rml-deeplink--link"),l=!1;o||(o=document.createElement("span"),l=!0),o.classList.add("rml-deeplink--link"),o.classList.add("rml-deeplink--heading"),o.classList.add("text--red"),l&&e.appendChild(o);var a=t+":"+i,u=this.shortLinkCache[a];if(u){var d=this.createDeeplinkInput(o,u);this.createCopySvg(o,d)}else{if(this.waitingForShortLink)return;this.waitingForShortLink=!0;var p=document.createElement("span");p.classList.add("rml-spinner"),p.classList.add("rml-spinner--white"),o.appendChild(p),this.buildDeeplink(t,i).then(function(e){var s=v.Environment.config.shortlink(c.RoomleTypeService.convertRoomleType(t),i,n,e.shortId.shortId),l=r.createDeeplinkInput(o,s);r.createCopySvg(o,l),r.shortLinkCache[a]=s,r.waitingForShortLink=!1},function(){r.waitingForShortLink=!1,o.removeChild(p),o.textContent=s.SettingsService.settings.translations.errors.deeplinkcreate})}},t.prototype.buildLink=function(e,t){var n=this;void 0===t&&(t={});var i=t.isHighlighted,r=void 0!==i&&i,o=t.buildAnyway,l=void 0!==o&&o,a=t.slideMode,u=void 0!==a&&a,d=t.clickedHint,p=void 0===d?function(){}:d;if(this.isAvailableLink(e.type)||l){var h=document.createElement("a");h.classList.add("rml-deeplink--row"),h.setAttribute("target","_blank"),h.setAttribute("href",e.link);var v=document.createElement("span");v.classList.add("rml-deeplink--text"),v.classList.add("rml-deeplink--heading"),v.textContent=s.SettingsService.settings.translations[e.type].heading;var f=document.createElement("span");f.classList.add("rml-deeplink--icon");var m=this.iconsService.create(e.type);f.appendChild(m),h.appendChild(v),h.appendChild(f);var S=s.SettingsService.settings.callback.button[e.type];if(S&&h.addEventListener("click",function(){S(e.id,c.RoomleTypeService.convertRoomleType(e.roomleType),e.type)}),e.alternate){
var y=document.createElement("span");y.classList.add("rml-deeplink--hint"),y.textContent=s.SettingsService.settings.translations[e.type].hint[e.alternate],h.appendChild(y),h.addEventListener("click",function(t){return t.preventDefault(),u?y.classList.add("rml-hint__slide"):y.classList.contains("rml-hint__show")?y.classList.remove("rml-hint__show"):(n.addShortlink(y,e.roomleType,e.type,e.id),y.classList.add("rml-hint__show")),p(),!1}),r&&setTimeout(function(){y.classList.add("rml-hint__show"),u?(y.classList.add("rml-hint__slide"),p()):n.addShortlink(y,e.roomleType,e.type,e.id)},1)}else"desktop"!==e.os&&this.mobileRedirectService.createDeeplinkFor(h,e.os);return h}},t}(r.Service);n.DomBuilderService=f},{"../config/Environment":4,"../controllers/PopupController":7,"../lib/Service":10,"../services/RequestService":21,"./ButtonsService":12,"./ConsoleService":13,"./IconsService":16,"./MobileDetectService":18,"./MobileRedirectService":19,"./RoomleTypeService":22,"./SettingsService":23}],15:[function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},r=e("../lib/Service"),o=e("./RoomleTypeService"),s=e("./ButtonsService"),l=e("./SettingsService"),c=e("./MobileDetectService");!function(e){e[e.TRIGGER=0]="TRIGGER",e[e.POP_UP_OPEN=1]="POP_UP_OPEN",e[e.POP_UP_CLOSE=2]="POP_UP_CLOSE"}(n.EVENT_TYPES||(n.EVENT_TYPES={}));var a=n.EVENT_TYPES,u=function(e){function t(){e.apply(this,arguments),this.mobileDetectService=c.MobileDetectService.inject(),this.triggerCallbacks=[],this.openPopUpCallbacks=[]}return i(t,e),t.prototype.subscribe=function(e,t){e===a.TRIGGER&&this.triggerCallbacks.push(t),e===a.POP_UP_OPEN&&this.openPopUpCallbacks.push(t)},t.prototype.findSelector=function(e,t,n,i){if(void 0===n&&(n=0),void 0===i&&(i=20),i===n)return null;if(e.matches&&e.matches(t))return e;var r=e.parentElement||e.parentNode;return r?this.findSelector(r,t,n+1):null},t.prototype.dispatchOpenPopUp=function(e){this.openPopUpCallbacks.forEach(function(t){t(e)})},t.prototype.dispatch=function(e,t,n,i,r,c){void 0===r&&(r=null),void 0===c&&(c=!1);var a=s.ButtonsService.convertButtonType(i),u=this.mobileDetectService.getLinks(n,o.RoomleTypeService.convertTypeToEnum(t));if(i===s.BUTTON_TYPE.TRIGGER){var d=s.ButtonsService.convertButtonType(s.BUTTON_TYPE.TRIGGER),p=l.SettingsService.settings.callback[d];"function"==typeof p&&p(e,n,t,u,r,c),this.triggerCallbacks.forEach(function(i){i(e,n,t,u,r,c)})}var h=l.SettingsService.settings.callback[t];h&&h[a]&&"function"==typeof h[a]&&h[a](e,n,t,u,r,c)},t.prototype.getElement=function(e,t){var n=e.querySelectorAll("["+t+"]");return n&&0!==n.length||!e.hasAttribute(t)?n[0]:e},t.prototype.handle=function(e){var t=e.target||e.srcElement,n=this.findSelector(t,"["+l.SettingsService.settings.dataSelector.action+"]");if(n){var i=n.getAttribute(l.SettingsService.settings.dataSelector.action);if(i){var r=this.findSelector(t,l.SettingsService.settings.selector);if(!r)return;var o=this.getElement(r,l.SettingsService.settings.dataSelector.type),c=null,a=null;o&&(c=o.getAttribute(l.SettingsService.settings.dataSelector.type));var u=this.getElement(r,l.SettingsService.settings.dataSelector.id);u&&(a=u.getAttribute(l.SettingsService.settings.dataSelector.id)),this.dispatch(e,c,a,s.ButtonsService.convertButtonTypeToEnum(i))}}},t}(r.Service);n.EventHandlerService=u},{"../lib/Service":10,"./ButtonsService":12,"./MobileDetectService":18,"./RoomleTypeService":22,"./SettingsService":23}],16:[function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},r=e("../lib/Service"),o=e("./ButtonsService"),s=function(e){function t(){e.apply(this,arguments)}return i(t,e),t.prototype.getSvg=function(e){e=e||{},e.width||(e.width="64"),e.height||(e.height="64");var n=document.createElementNS(t.SVG_NS,"svg");for(var i in e)n.setAttributeNS(null,i,e[i]);return n},t.prototype.getNode=function(e,n){var i=document.createElementNS(t.SVG_NS,e);for(var r in n)i.setAttributeNS(null,r,n[r]);return i},t.prototype.buildPlanIcon=function(e){var t=this.getSvg({viewBox:"0 0 50 50"}),n=this.getNode("path",{d:"M39.72,23.16,31,17.93h0l-.36-.22-5.13-3.07h0l-.36-.22a.33.33,0,0,0-.35,0l-.36.22h0l-13.87,8.3h0l-.36.22a.53.53,0,0,0,0,.85l.36.22h0l5.13,3.07h0l.36.22h0l8.38,5h0l.24.14.12.07a.33.33,0,0,0,.35,0L39.72,24a.53.53,0,0,0,0-.85Zm-5.09,2.4-3.34-2a.33.33,0,0,0-.35,0l-.36.22a.53.53,0,0,0,0,.85l2.8,1.68-8.43,5-7.49-4.48,2.89-1.73a.53.53,0,0,0,0-.85l-.18-.11h0l-.91-.54a.33.33,0,0,0-.35,0l-.36.22a.53.53,0,0,0,0,.85h0l-2.36,1.41L12,23.58l2.36-1.41,2.45,1.47a.34.34,0,0,0,.17,0,.34.34,0,0,0,.17,0l.36-.22a.53.53,0,0,0,0-.85l-1.91-1.14L25,15.82l4.24,2.54-7.85,4.7a.53.53,0,0,0,0,.85l.36.22a.33.33,0,0,0,.35,0l3.84-2.3,1.83,1.1a.34.34,0,0,0,.17,0,.34.34,0,0,0,.17,0l.36-.22a.53.53,0,0,0,0-.85l-1.3-.77,3.3-2,7.49,4.48Z"});if(t.appendChild(n),e){var i=this.getNode("path",{d:"M37.29,33.15v2.48h-1.4V33.15H33.42v-1.4h2.47V29.29h1.4v2.46h2.47v1.4Z"});t.appendChild(i)}return t},t.prototype.buildAdd=function(){return this.buildPlanIcon(!0)},t.prototype.buildPlanNow=function(){return this.buildPlanIcon(!1)},t.prototype.buildAr=function(){var e=this.getSvg({viewBox:"0 0 50 50"}),t=this.getNode("path",{d:"M24.41,33.24h0c-5.22-.08-9.5-2.78-14.31-9a.75.75,0,0,1-.16-.46c0-.63,4.46-6.73,10.67-8.84,8.34-2.84,15,3,19.19,8.38a.75.75,0,0,1,.16.46c0,.45-.63,1.34-1.87,2.63a.75.75,0,0,1-1.09-1,13.24,13.24,0,0,0,1.3-1.52c-4.4-5.57-9-8.3-13.69-8.15-6.69.23-11.71,6.36-13,8.06,5.49,7,9.55,8,12.8,8a.75.75,0,0,1,0,1.5Z"}),n=this.getNode("path",{d:"M24.94,29.4a5.42,5.42,0,0,1-5.05-3.5,5.58,5.58,0,0,1,1.56-6.51,5.3,5.3,0,0,1,6.44-.3,5.66,5.66,0,0,1,2.34,6.39A.75.75,0,1,1,28.79,25a4.18,4.18,0,0,0-1.74-4.7,3.79,3.79,0,0,0-4.65.21,4.12,4.12,0,0,0-1.12,4.79,3.9,3.9,0,0,0,4,2.55.74.74,0,0,1,.81.69.75.75,0,0,1-.69.81Z"}),i=this.getNode("g"),r=this.getNode("path",{d:"M30.5,35.1,30,33.68H27.18L26.7,35.1H25.06l2.92-8h1.23l2.93,8Zm-1.87-5.65-1,2.92h2Z"}),o=this.getNode("path",{d:"M37.39,35.1l-1.57-3.2H34.69v3.2H33.13v-8h3.14a2.42,2.42,0,0,1,2.6,2.46,2.16,2.16,0,0,1-1.46,2.11L39.2,35.1Zm-1.22-6.62H34.69v2.12h1.48a1.06,1.06,0,1,0,0-2.12Z"});return i.appendChild(r),i.appendChild(o),e.appendChild(t),e.appendChild(n),e.appendChild(i),e},t.prototype.buildConfigure=function(){var e=this.getSvg({viewBox:"0 0 50 50"}),t=this.getNode("path",{d:"M34.67,10.9,28.9,8.22a1.87,1.87,0,0,0-2.48.91L16,31.42a1.86,1.86,0,0,0-.17.75L15.66,40a1.85,1.85,0,0,0,.53,1.34,1.9,1.9,0,0,0,1.35.57,1.86,1.86,0,0,0,1.23-.47l5.93-5.22a1.86,1.86,0,0,0,.46-.62L35.58,13.37A1.88,1.88,0,0,0,34.67,10.9ZM17.47,40.22l.14-7,4.91,2.55ZM32,16.94l-5.88-2.73,1.94-4.38L34,12.57Z"});return e.appendChild(t),e},t.prototype.buildMark=function(){var e=this.getSvg({viewBox:"0 0 50 50"}),t=this.getNode("path",{d:"M32.16,12.05A7.89,7.89,0,0,0,25,16.51,7.93,7.93,0,0,0,10,20C10,29.35,25,39.64,25,39.64s15-10.37,15-19.66A7.91,7.91,0,0,0,32.16,12.05Z"});return e.appendChild(t),e},t.prototype.buildCopy=function(){var e=this.getSvg({viewBox:"0 0 32 32"}),t=this.getNode("path",{d:"M28.681 11.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-11.5c-1.379 0-2.5 1.122-2.5 2.5v23c0 1.378 1.121 2.5 2.5 2.5h19c1.378 0 2.5-1.122 2.5-2.5v-15.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 9.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268v0zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-19c-0.271 0-0.5-0.229-0.5-0.5v-23c0-0.271 0.229-0.5 0.5-0.5 0 0 11.499-0 11.5 0v7c0 0.552 0.448 1 1 1h7v15.5z"}),n=this.getNode("path",{d:"M18.841 1.319c-1.612-1.182-2.393-1.319-2.841-1.319h-11.5c-1.378 0-2.5 1.121-2.5 2.5v23c0 1.207 0.86 2.217 2 2.45v-25.45c0-0.271 0.229-0.5 0.5-0.5h15.215c-0.301-0.248-0.595-0.477-0.873-0.681z"});return e.appendChild(t),e.appendChild(n),e},t.prototype.buildTrigger=function(){var e=this.getSvg({viewBox:"0 0 32.19 29.5"}),t=this.getNode("path",{d:"M21,22.36c-1.57,0-1.87,1.36-1.87,3s0.17,3,1.87,3,1.87-1.36,1.87-3S22.59,22.36,21,22.36Z",transform:"translate(-9 -15.26)"}),n=this.getNode("path",{d:"M31.1,22.36c-1.57,0-1.87,1.36-1.87,3s0.17,3,1.87,3S33,27,33,25.36,32.66,22.36,31.1,22.36Z",transform:"translate(-9 -15.26)"}),i=this.getNode("path",{d:"M26,15.26c-5.86,0-17,.73-17,3.48V31.89a1.16,1.16,0,0,0,.17.49c1,2.06,9.46,3,16.85,3,5.86,0,17-.73,17-3.48V18.74C43,16,31.86,15.26,26,15.26ZM21,30.11c-3.46,0-4.69-2.14-4.69-4.79S17.6,20.53,21,20.53s4.69,2.14,4.69,4.79S24.47,30.11,21,30.11Zm10.08,0c-3.46,0-4.69-2.14-4.69-4.79s1.28-4.79,4.69-4.79,4.69,2.14,4.69,4.79S34.55,30.11,31.1,30.11Z",transform:"translate(-9 -15.26)"}),r=this.getNode("path",{d:"M31.1,28.36c-1.7,0-1.87-1.36-1.87-3s0.3-3,1.87-3,1.87,1.36,1.87,3S32.8,28.36,31.1,28.36Z",transform:"translate(-9 -15.26)"}),o=this.getNode("path",{d:"M21,28.36c-1.7,0-1.87-1.36-1.87-3s0.3-3,1.87-3,1.87,1.36,1.87,3S22.72,28.36,21,28.36Z",transform:"translate(-9 -15.26)"});return e.appendChild(t),e.appendChild(n),e.appendChild(i),e.appendChild(r),e.appendChild(o),e},t.prototype.buildVisualize=function(){var e=this.getSvg({viewBox:"0 0 50 50"}),t=this.getNode("path",{d:"M25,34.59c-6.32,0-11.44-4.71-14.84-9.13a.75.75,0,0,1,0-.87c.24-.36,6-8.87,14.49-9.17C29.9,15.23,35,18.3,39.85,24.55A.74.74,0,0,1,40,25c0,.6-4.61,6.78-10.68,8.84A13.47,13.47,0,0,1,25,34.59ZM11.65,25c4.4,5.55,9,8.28,13.68,8.12,6.7-.23,11.74-6.38,13-8.08-4.4-5.55-9-8.28-13.69-8.12C17.93,17.14,12.91,23.28,11.65,25ZM25,30.49A5.49,5.49,0,1,1,30.38,25,5.45,5.45,0,0,1,25,30.49ZM25,21a4,4,0,1,0,3.91,4A4,4,0,0,0,25,21Z"});return e.appendChild(t),e},t.prototype.buildVr=function(){var e=this.getSvg({viewBox:"0 0 50 50"}),t=this.getNode("path",{d:"M37.88,16.24H12.18A2.16,2.16,0,0,0,10,18.4V31.6a2.16,2.16,0,0,0,2.16,2.16H20a1.54,1.54,0,0,0,1.46-.93l1.75-4.38a1.92,1.92,0,0,1,3.5.06l1.52,4.26a1.59,1.59,0,0,0,1.46,1h8.12A2.16,2.16,0,0,0,40,31.6V18.46A2.05,2.05,0,0,0,37.88,16.24ZM18.6,28.8a3.33,3.33,0,0,1-3.33-3.33,3.33,3.33,0,1,1,6.66,0A3.33,3.33,0,0,1,18.6,28.8Zm12.85,0a3.33,3.33,0,0,1-3.33-3.33,3.33,3.33,0,0,1,6.66,0A3.33,3.33,0,0,1,31.45,28.8Z"});return e.appendChild(t),e},t.prototype.create=function(e){var t=o.ButtonsService.convertButtonTypeToEnum(e);return t===o.BUTTON_TYPE.ADD?this.buildAdd():t===o.BUTTON_TYPE.AR?this.buildAr():t===o.BUTTON_TYPE.CONFIGURE?this.buildConfigure():t===o.BUTTON_TYPE.VISUALIZE?this.buildVisualize():t===o.BUTTON_TYPE.VR?this.buildVr():t===o.BUTTON_TYPE.TRIGGER?this.buildTrigger():t===o.BUTTON_TYPE.MARK?this.buildMark():t===o.BUTTON_TYPE.START_NOW?this.buildPlanNow():void 0},t.prototype.createCopy=function(){return this.buildCopy()},t.SVG_NS="http://www.w3.org/2000/svg",t}(r.Service);n.IconsService=s},{"../lib/Service":10,"./ButtonsService":12}],17:[function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},r=e("../lib/Service"),o=function(e){function t(){e.apply(this,arguments),this.images={ios:"https://a.storyblok.com/f/4e779959c8/ios.png",android:"https://a.storyblok.com/f/1386db8cd0/android.png",desktop:"https://a.storyblok.com/f/cf5aa03c64/desktop.png"}}return i(t,e),t.prototype.preloadImages=function(){var e=new Image,t=new Image,n=new Image;e.src=this.images.ios,t.src=this.images.android,n.src=this.images.desktop},t}(r.Service);n.ImagesService=o},{"../lib/Service":10}],18:[function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},r=e("../lib/Service"),o=e("./RoomleTypeService"),s=e("./ButtonsService"),l=e("./SettingsService"),c=function(e){function t(){e.apply(this,arguments),this.isOSCached=null,this.isAndroidCached=null,this.isIPadCached=null,this.isSupportedMobileCached=null,this.buttonsService=s.ButtonsService.inject()}return i(t,e),t.prototype.isIOS=function(){return null!==this.isOSCached?this.isOSCached:/iPad|iPhone|iPod/i.test(navigator.userAgent)&&!window.MSStream},t.prototype.isAndroid=function(){return null!==this.isAndroidCached?this.isAndroidCached:/Android/i.test(navigator.userAgent)&&!window.MSStream},t.prototype.isSupportedMobile=function(){return null!==this.isSupportedMobileCached?this.isSupportedMobileCached:this.isIOS()||this.isAndroid()},t.prototype.isIPad=function(){return null!==this.isIPadCached?this.isIPadCached:/iPad/i.test(navigator.userAgent)&&!window.MSStream},t.prototype.handlePlan=function(e,t,n){var i=s.ButtonsService.convertButtonType(n),r=t,o="roomle://3d/planId/"+e,c=l.SettingsService.settings.web.baseUrl+"editor/"+e;if(n===s.BUTTON_TYPE.VISUALIZE){var a="roomleviewer://plan/"+e;return this.isAndroid()?{type:i,alternate:null,link:a,os:"android",roomleType:r,id:e}:this.isIOS()?{type:i,alternate:null,link:o,os:"ios",roomleType:r,id:e}:{type:i,alternate:null,link:c,os:"desktop",roomleType:r,id:e}}if(n===s.BUTTON_TYPE.VR){var a="roomleviewer://vr/"+e;return this.isAndroid()?{type:i,alternate:null,link:a,os:"android",roomleType:r,id:e}:this.isIOS()?{type:i,alternate:null,link:a,os:"ios",roomleType:r,id:e}:{type:i,alternate:"ios",link:a,os:"desktop",roomleType:r,id:e}}if(n===s.BUTTON_TYPE.START_NOW){var a="roomleviewer://plan/"+e;return this.isAndroid()?{type:i,alternate:null,link:a,os:"android",roomleType:r,id:e}:this.isIOS()?{type:i,alternate:null,link:o,os:"ios",roomleType:r,id:e}:{type:i,alternate:null,link:c,os:"desktop",roomleType:r,id:e}}return null},t.prototype.createLinkForItemOrConfiguration=function(e,t,n,i){var r=t,c=s.ButtonsService.convertButtonType(n),a=i||t===o.ROOMLE_TYPE.CONFIGURABLE_ITEM?"catalogItemId":"configurationId",u=i||t===o.ROOMLE_TYPE.CONFIGURABLE_ITEM?"itemId[]":"configurationId[]";if(n===s.BUTTON_TYPE.ADD){var d=l.SettingsService.settings.web.baseUrl+"editor/"+l.SettingsService.settings.planId+"?"+u+"="+e,p="roomle://addToPlan/"+a+"/"+e+"?planId="+l.SettingsService.settings.planId;return this.isAndroid()?{type:c,alternate:"desktop",link:d,os:"android",roomleType:r,id:e}:this.isIOS()?null:{type:c,alternate:null,link:d,os:"desktop",roomleType:r,id:e}}if(n===s.BUTTON_TYPE.AR){var p="roomle://ar/"+a+"/"+e;return this.isAndroid()?{type:c,alternate:"ios",link:p,os:"android",roomleType:r,id:e}:this.isIOS()?{type:c,alternate:null,link:p,os:"ios",roomleType:r,id:e}:{type:c,alternate:"ios",link:p,os:"desktop",roomleType:r,id:e}}if(n===s.BUTTON_TYPE.CONFIGURE&&(t===o.ROOMLE_TYPE.CONFIGURATION||t===o.ROOMLE_TYPE.CONFIGURABLE_ITEM)){var h=t!==o.ROOMLE_TYPE.CONFIGURATION,d=l.SettingsService.settings.web.baseUrl+"configurator/"+e+(h?"?isItem=true":""),p="roomle://configuration/"+a+"/"+e;return this.isAndroid()?{type:c,alternate:"desktop",link:d,os:"android",roomleType:r,id:e}:this.isIOS()?{type:c,alternate:null,link:p,os:"ios",roomleType:r,id:e}:{type:c,alternate:null,link:d,os:"desktop",roomleType:r,id:e}}return n===s.BUTTON_TYPE.MARK?this.isAndroid()?{type:c,alternate:null,link:"www.roomle.com",os:"android",roomleType:r,id:e}:this.isIOS()?{type:c,alternate:null,link:"www.roomle.com",os:"ios",roomleType:r,id:e}:{type:c,alternate:null,link:"www.roomle.com",os:"desktop",roomleType:r,id:e}:n===s.BUTTON_TYPE.VISUALIZE?this.isAndroid()?{type:c,alternate:null,link:"roomleviewer://item/"+e,os:"android",roomleType:r,id:e}:(this.isIOS(),null):null},t.prototype.handleItem=function(e,t,n){var i=!0;return this.createLinkForItemOrConfiguration(e,t,n,i)},t.prototype.handleConfiguration=function(e,t,n){var i=!1;return this.createLinkForItemOrConfiguration(e,t,n,i)},t.prototype.generateLink=function(e,t,n,i){void 0===i&&(i=null);var r=null;if(t===o.ROOMLE_TYPE.ITEM?r=this.handleItem(e,t,n):t===o.ROOMLE_TYPE.CONFIGURATION||t===o.ROOMLE_TYPE.CONFIGURABLE_ITEM?r=this.handleConfiguration(e,t,n):t===o.ROOMLE_TYPE.PLAN&&(r=this.handlePlan(e,t,n)),!r)return null;var s=r.link.indexOf("?")===-1?"?":"&";return r.link=r.link+s+"callback="+i,r},t.prototype.getLinks=function(e,t,n){var i=this;void 0===n&&(n=null);var r=this.buttonsService.availableButtons,o=[];return r.forEach(function(r){var s=i.generateLink(e,t,r,n);s&&o.push(s)}),o},t}(r.Service);n.MobileDetectService=c},{"../lib/Service":10,"./ButtonsService":12,"./RoomleTypeService":22,"./SettingsService":23}],19:[function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},r=e("../lib/Service"),o=function(e){function t(){e.apply(this,arguments),this.delay=1200,this.oss={android:{storePrefix:"https://play.google.com/store/apps/details?id="},ios:{storePrefix:"https://itunes.apple.com/app/"}}}return i(t,e),t.prototype.getTime=function(){return(new Date).getTime()},t.prototype.open=function(e,t,n){return void 0===t&&(t=!1),void 0===n&&(n=null),"function"==typeof n?n(e):void(t?window.open(e):window.location.href=e)},t.prototype.handleAndroidBrowsers=function(e,t,n){var i=navigator.userAgent.indexOf("Android")>-1&&navigator.userAgent.indexOf("Mozilla/5.0")>-1&&navigator.userAgent.indexOf("AppleWebKit")>-1,r=new RegExp("AppleWebKit/([d.]+)"),o=r.exec(navigator.userAgent),s=null===o?null:parseFloat(r.exec(navigator.userAgent)[1]),l=i&&null!==s&&s>500;return l?"intent:"+t.split(":")[1]+"#Intent;scheme="+n+";package="+e+";S.browser_fallback_url="+encodeURI(t):t},t.prototype.redirect=function(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=null),this.perfromDeepLink(e.link,e.os,t,n)},t.prototype.perfromDeepLink=function(e,t,n,i){var r=this;void 0===n&&(n=!1),void 0===i&&(i=null);var o=!1,s=null,l=this.parseHref(e,t),c=l.scheme,a=l.appId,u=this.getTime();o=!0,s=setTimeout(function(){if("desktop"!==t&&o&&s){var i=r.getTime();o=!1,s=null,i-u>=2*r.delay||(a?r.open(r.oss[t].storePrefix+a,n):e&&r.open(e,n))}},this.delay);var d=this.handleAndroidBrowsers(a,e,c);this.open(d,n,i)},t.prototype.parseHref=function(e,t){var n=e.split(":"),i=n[0],r="roomle/id732050356";return"roomleviewer"===i&&(r="com.roomle.viewer","ios"===t&&(r="roomle-viewr/id1053860177")),{appId:r,scheme:i,os:t}},t.prototype.createDeeplinkFor=function(e,t){var n=this,i=e.getAttribute("href"),r=this.parseHref(i,t),o=r.appId;t&&o?e.addEventListener("click",function(e){e.preventDefault(),e.stopImmediatePropagation(),n.perfromDeepLink(i,t)}):i&&"#"!==i||(e.style.display="none")},t}(r.Service);n.MobileRedirectService=o},{"../lib/Service":10}],20:[function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},r=e("../lib/Service"),o=function(e){function t(){e.call(this),Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(e){for(var t=(this.document||this.ownerDocument).querySelectorAll(e),n=t.length;--n>=0&&t.item(n)!==this;);return n>-1})}return i(t,e),t}(r.Service);n.PolyfillService=o},{"../lib/Service":10}],21:[function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},r=e("es6-promise"),o=e("../lib/Service"),s=function(e){function t(){e.apply(this,arguments)}return i(t,e),t.prototype.fetch=function(e,t){return new r.Promise(function(n,i){t||(t={});var r=new XMLHttpRequest,o=t.headers;if("GET"===t.method&&t.body){if("object"!=typeof t.body)return void i(new TypeError("Non object like body not allowed for GET requests. The body has to be an object so the properties will be appended as a GET parameter to the url."));var s="",l="";for(var c in t.body)if(t.body.hasOwnProperty(c)){var a=encodeURIComponent(c),u=encodeURIComponent(t.body[c]);l+=""+s+a+"="+u,s="&"}e=e+(e.indexOf("?")===-1?"?":"&")+l}else"string"!=typeof t.body&&(t.body=JSON.stringify(t.body));if("HEAD"===t.method&&t.body)return void i(new TypeError("Body not allowed for HEAD requests"));if(r.onload=function(e){r.status>=400||0===r.status?i(new Error(r.responseText)):n("response"in r?r.response:r.responseText)},r.onerror=function(e){i(e.error)},r.onabort=function(e){i(new TypeError("Network request aborted"))},r.ontimeout=function(e){i(new TypeError("Network request timed out"))},t.credentials&&t.credentials.username?r.open(t.method?t.method:"GET",e,!0,t.credentials.username,t.credentials.password):r.open(t.method?t.method:"GET",e,!0),"object"==typeof o)for(var c in o)o.hasOwnProperty(c)&&r.setRequestHeader(c,o[c]);r.send("undefined"==typeof t.body?null:t.body)})},t.prototype.fetchJSON=function(e,t){return t||(t={}),t.headers||(t.headers={}),t.headers["Content-Type"]||(t.headers["Content-Type"]="application/json"),this.fetch(e,t).then(function(e){return JSON.parse(e)})},t}(o.Service);n.RequestService=s},{"../lib/Service":10,"es6-promise":1}],22:[function(e,t,n){"use strict";!function(e){e[e.ITEM=0]="ITEM",e[e.CONFIGURATION=1]="CONFIGURATION",e[e.PLAN=2]="PLAN",e[e.CONFIGURABLE_ITEM=3]="CONFIGURABLE_ITEM"}(n.ROOMLE_TYPE||(n.ROOMLE_TYPE={}));var i=n.ROOMLE_TYPE,r=function(){function e(){}return e.convertTypeToEnum=function(e){return"item"===e?i.ITEM:"configuration"===e?i.CONFIGURATION:"plan"===e?i.PLAN:"configurable-item"===e?i.CONFIGURABLE_ITEM:null},e.convertRoomleType=function(e){return e===i.ITEM?"item":e===i.CONFIGURATION?"configuration":e===i.PLAN?"plan":e===i.CONFIGURABLE_ITEM?"configurable-item":null},e}();n.RoomleTypeService=r},{}],23:[function(e,t,n){"use strict";var i=function(){function e(e){this.settings=e}return e.setDefault=function(e,t,n){for(var i=e,r=t.split("."),o=r.length-1,s=0;s<o;s++)i[r[s]]||(i[r[s]]={}),i=i[r[s]];void 0===i[r[o]]&&(i[r[o]]=n)},e.setDeeplinkTranslation=function(t,n,i){e.setDefault(t,"translations."+n+".heading",i.heading),e.setDefault(t,"translations."+n+".hint.ios",i.hint.ios),e.setDefault(t,"translations."+n+".hint.android",i.hint.android),e.setDefault(t,"translations."+n+".hint.desktop",i.hint.desktop)},e.init=function(t){if(!(this._instance instanceof e)){e.setDefault(t,"web.baseUrl","https://www.roomle.com/app/"),e.setDefault(t,"viewr.baseUrl","https://www.roomle.com/"),e.setDefault(t,"ios.baseUrl","https://www.roomle.com/"),e.setDefault(t,"dataSelector.type","data-rml-type"),e.setDefault(t,"dataSelector.id","data-rml-id"),e.setDefault(t,"dataSelector.action","data-rml-action"),e.setDefault(t,"planId","8a708083560ca6cf01560cd7361a014a"),e.setDefault(t,"createPopUp",!0),e.setDefault(t,"showBackButton",!0),e.setDefault(t,"html.containerClass","roomle-buttons"),e.setDefault(t,"html.containerType","div"),e.setDefault(t,"html.buttonsContainer","ul"),e.setDefault(t,"html.buttonElement","li"),e.setDefault(t,"css.buttons.position","absolute"),e.setDefault(t,"css.buttons.top","0"),e.setDefault(t,"css.buttons.right","0"),e.setDefault(t,"css.buttons.line-height","normal"),e.setDefault(t,"css.buttons.visibility","visible !important"),e.setDefault(t,"css.item.position","relative"),e.setDefault(t,"callback",{}),e.setDefault(t,"callback.button",{}),e.setDefault(t,"popUpSelector","data-rml-deeplink-popup-container"),e.setDefault(t,"callback.booted",function(){}),e.setDefault(t,"translations.errors.deeplinkcreate","Error creating deeplink");var n="",i=n+"Enter the following link into the browser of your desktop device",r=n+"Enter the following link into the browser of your iOS device";this.setDeeplinkTranslation(t,"ar",{heading:"Visualize in AR",hint:{ios:r,android:null,desktop:null}}),this.setDeeplinkTranslation(t,"add",{heading:"Add to plan",hint:{ios:null,android:null,desktop:i}}),this.setDeeplinkTranslation(t,"configure",{heading:"Customize",hint:{ios:null,android:null,desktop:i}}),this.setDeeplinkTranslation(t,"mark",{heading:"Favourite",hint:{ios:null,android:null,desktop:null}}),this.setDeeplinkTranslation(t,"trigger",{heading:"Trigger",hint:{ios:null,android:null,desktop:null}}),this.setDeeplinkTranslation(t,"visualize",{heading:"Visualize",hint:{ios:null,android:i,desktop:null}}),this.setDeeplinkTranslation(t,"vr",{heading:"View in VR",hint:{ios:r,android:"",desktop:""}}),this.setDeeplinkTranslation(t,"start_now",{heading:"Start planning now",hint:{ios:r,android:"",desktop:""}}),this._instance=new this(t)}return this._instance},e.getInstance=function(){return this._instance},Object.defineProperty(e,"settings",{get:function(){return e.getInstance().settings},enumerable:!0,configurable:!0}),e}();n.SettingsService=i},{}],24:[function(e,t,n){"use strict";var i=function(){function e(){}return e.getNamesAndValues=function(e){return this.getNames(e).map(function(t){return{name:t,value:e[t]}})},e.getNames=function(e){return this.getObjValues(e).filter(function(e){return"string"==typeof e})},e.getValues=function(e){return this.getObjValues(e).filter(function(e){return"number"==typeof e})},e.getObjValues=function(e){return Object.keys(e).map(function(t){return e[t]})},e}();n.EnumEx=i},{}],25:[function(e,t,n){},{}]},{},[11,25]);
//# sourceMappingURL=roomle-button.min.js.map
