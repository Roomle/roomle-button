{"version":3,"sources":["roomle-button.min.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","1","module","process","global","lib$es6$promise$utils$$objectOrFunction","x","lib$es6$promise$utils$$isFunction","lib$es6$promise$asap$$setScheduler","scheduleFn","lib$es6$promise$asap$$customSchedulerFn","lib$es6$promise$asap$$setAsap","asapFn","lib$es6$promise$asap$$asap","lib$es6$promise$asap$$useNextTick","nextTick","lib$es6$promise$asap$$flush","lib$es6$promise$asap$$useVertxTimer","lib$es6$promise$asap$$vertxNext","lib$es6$promise$asap$$useMutationObserver","iterations","observer","lib$es6$promise$asap$$BrowserMutationObserver","node","document","createTextNode","observe","characterData","data","lib$es6$promise$asap$$useMessageChannel","channel","MessageChannel","port1","onmessage","port2","postMessage","lib$es6$promise$asap$$useSetTimeout","setTimeout","lib$es6$promise$asap$$len","callback","lib$es6$promise$asap$$queue","arg","undefined","lib$es6$promise$asap$$attemptVertx","vertx","runOnLoop","runOnContext","lib$es6$promise$then$$then","onFulfillment","onRejection","parent","this","child","constructor","lib$es6$promise$$internal$$noop","lib$es6$promise$$internal$$PROMISE_ID","lib$es6$promise$$internal$$makePromise","state","_state","arguments","lib$es6$promise$$internal$$invokeCallback","_result","lib$es6$promise$$internal$$subscribe","lib$es6$promise$promise$resolve$$resolve","object","Constructor","promise","lib$es6$promise$$internal$$resolve","lib$es6$promise$$internal$$selfFulfillment","TypeError","lib$es6$promise$$internal$$cannotReturnOwn","lib$es6$promise$$internal$$getThen","then","error","lib$es6$promise$$internal$$GET_THEN_ERROR","lib$es6$promise$$internal$$tryThen","value","fulfillmentHandler","rejectionHandler","lib$es6$promise$$internal$$handleForeignThenable","thenable","sealed","lib$es6$promise$$internal$$fulfill","reason","lib$es6$promise$$internal$$reject","_label","lib$es6$promise$$internal$$handleOwnThenable","lib$es6$promise$$internal$$FULFILLED","lib$es6$promise$$internal$$REJECTED","lib$es6$promise$$internal$$handleMaybeThenable","maybeThenable","lib$es6$promise$then$$default","resolve","lib$es6$promise$promise$resolve$$default","lib$es6$promise$$internal$$publishRejection","_onerror","lib$es6$promise$$internal$$publish","lib$es6$promise$$internal$$PENDING","_subscribers","subscribers","settled","detail","lib$es6$promise$$internal$$ErrorObject","lib$es6$promise$$internal$$tryCatch","lib$es6$promise$$internal$$TRY_CATCH_ERROR","succeeded","failed","hasCallback","lib$es6$promise$$internal$$initializePromise","resolver","lib$es6$promise$$internal$$nextId","lib$es6$promise$$internal$$id","lib$es6$promise$promise$all$$all","entries","lib$es6$promise$enumerator$$default","lib$es6$promise$promise$race$$race","lib$es6$promise$utils$$isArray","reject","lib$es6$promise$promise$reject$$reject","lib$es6$promise$promise$$needsResolver","lib$es6$promise$promise$$needsNew","lib$es6$promise$promise$$Promise","lib$es6$promise$enumerator$$Enumerator","input","_instanceConstructor","_input","_remaining","Array","_enumerate","lib$es6$promise$enumerator$$validationError","lib$es6$promise$polyfill$$polyfill","local","self","Function","P","Promise","Object","prototype","toString","cast","lib$es6$promise$promise$$default","lib$es6$promise$utils$$_isArray","isArray","lib$es6$promise$asap$$scheduleFlush","lib$es6$promise$asap$$browserWindow","window","lib$es6$promise$asap$$browserGlobal","MutationObserver","WebKitMutationObserver","lib$es6$promise$asap$$isNode","lib$es6$promise$asap$$isWorker","Uint8ClampedArray","importScripts","Math","random","substring","lib$es6$promise$promise$all$$default","lib$es6$promise$promise$race$$default","lib$es6$promise$promise$reject$$default","all","race","_setScheduler","_setAsap","_asap","catch","_eachEntry","entry","c","_settledAt","_willSettleAt","enumerator","lib$es6$promise$polyfill$$default","lib$es6$promise$umd$$ES6Promise","polyfill","define","_process","2","defaultSetTimout","defaultClearTimeout","runTimeout","fun","cachedSetTimeout","runClearTimeout","marker","cachedClearTimeout","clearTimeout","cleanUpNextTick","draining","currentQueue","queue","concat","queueIndex","drainQueue","timeout","len","run","Item","array","noop","args","push","apply","title","browser","env","argv","version","versions","on","addListener","once","off","removeListener","removeAllListeners","emit","binding","name","cwd","chdir","dir","umask","3","controllers","SettingsService_1","EventHandlerService_1","ButtonsService_1","DomBuilderService_1","PolyfillService_1","MobileRedirectService_1","MobileDetectService_1","RoomleTypeService_1","ImagesService_1","RoomleButton","settings","domBuilder","DomBuilderService","inject","imagesService","ImagesService","eventHandler","EventHandlerService","polyfillService","PolyfillService","mobileRedirectService","MobileRedirectService","mobileDetectService","MobileDetectService","SettingsService","init","preloadImages","addCSS","boot","scriptId","script","getElementById","head","getElementsByTagName","href","getAttribute","styleHref","replace","style","createElement","rel","media","setAttribute","appendChild","setupClickListener","container","_this","addEventListener","handle","controllerClasses","element","body","elementList","querySelectorAll","createPopUp","buildPopUp","instanceSelector","selector","key","hasOwnProperty","mode","controllerClass","parse","openCustomPopUp","content","buildCustomPopUp","dispatchOpenPopUp","dispatchClick","type","id","buttonType","highlight","dispatch","ButtonsService","convertButtonTypeToEnum","getDomLinkFor","action","isHighlighted","roomleType","RoomleTypeService","convertTypeToEnum","link","generateLink","buildOptions","buildAnyway","buildLink","appendButtons","links","getLinks","forEach","execDeeplink","clickedButton","newWindow","alternate","event_1","createEvent","initEvent","BUTTON_TYPE","TRIGGER","redirect","callbackUrl","getInstance","_instance","RoomleButtonInstance","booted","./controllers/Controllers","./services/ButtonsService","./services/DomBuilderService","./services/EventHandlerService","./services/ImagesService","./services/MobileDetectService","./services/MobileRedirectService","./services/PolyfillService","./services/RoomleTypeService","./services/SettingsService","4","Environments_1","Environment","rapi","protocol","rmlco","shortlink","button","shortId","Environments","TEST","location","host","defineProperty","get","envIndicator","enumerable","configurable","./Environments","5","PRODUCTION","6","RoomleController_1","RoomleController","PopupController_1","PopupController","./PopupController","./RoomleController","7","__extends","d","b","__","p","create","Controller_1","_super","eventHandlerService","domBuilderService","subscribe","EVENT_TYPES","openPopup","bind","POP_UP_OPEN","simpleOpen","POP_UP_CLOSE","closePopup","$","showBackButton","back","classList","add","contains","remove","unfreezeScrolling","popupClose","freezeScrolling","linksContainer","hintContainer","innerHTML","hintText","text","preventDefault","popUp","popUpSelector","modal","popupOpen","slide","linkDom","slideMode","clickedHint","imgContainer","dom","img","imgUrl","images","querySelector","domLink","cloneNode","addShortlink","hint","newlinkDom","select","html","position","top_1","scrollTop","innerWidth","offsetWidth","overflowY","width","height","top","scrollTopValue","parseInt","Controller","../lib/Controller","../services/DomBuilderService","../services/EventHandlerService","../services/ImagesService","../services/SettingsService","8","idSelector","dataSelector","typeSelector","addButtons","createNoButtons","item","buttons","getButtons","../services/RoomleTypeService","9","_element","Element","getControllersByClass","instances","_instances","result","max","instance","beforeInstantiating","elements","afterInstantiating","root","className","exec","toLocaleLowerCase","PARSE_ID_ATTRIBUTE","floor","Date","now","10","Service","11","RoomleButton_1","mobileDetect","isIOS","RoomleButtonSettings","./RoomleButton","12","Service_1","EnumEx_1","availableButtons","EnumEx","getValues","ADD","AR","CONFIGURE","MARK","VISUALIZE","VR","START_NOW","convertButtonType","../lib/Service","../utils/EnumEx","13","ConsoleService","log","_i","console","warn","14","IconsService_1","ConsoleService_1","RequestService_1","Environment_1","buttonsService","iconsService","IconsService","requestService","RequestService","elementCache","buttonsCache","shortLinkCache","waitingForShortLink","createCSS","css","string","property","buttonsCSS","containerClass","itemCSS","inlineCss","build","cacheKey","fragment","createDocumentFragment","li","buttonElement","buildTrigger","buttonTypeStr","icon","buildPopUpDom","closer","overlay","contentDiv","oldContent","buildAddToPlan","buildVisualize","buildConfigure","buildAR","buildMark","buildVR","buildButtons","div","containerType","ul_1","buttonsContainer","oneAdded_1","showOnlyTrigger","ar","conf","mark","vis","vr","trigger","insertBefore","firstChild","buildDeeplink","shortenId","ROOMLE_TYPE","CONFIGURATION","CONFIGURABLE_ITEM","ITEM","token","today","apiKey","tokenEncoded","toISOString","btoa","fetchJSON","config","method","headers","currentTenant","language","locale","referencedId","isAvailableLink","linkType","createDeeplinkInput","stopImmediatePropagation","createCopySvg","execCommand","copySvg","createCopy","h3","needsAppend","cachedLink","inputCached","spinner_1","shortLink","convertRoomleType","removeChild","textContent","translations","errors","deeplinkcreate","options","_a","_b","_c","_d","heading","svgIcon","alternate_1","os","createDeeplinkFor","../config/Environment","../controllers/PopupController","../services/RequestService","./ButtonsService","./ConsoleService","./IconsService","./MobileDetectService","./MobileRedirectService","./RoomleTypeService","./SettingsService","15","triggerCallbacks","openPopUpCallbacks","event","findSelector","depth","maxDepth","matches","parentElement","parentNode","triggerKey","callbackTrigger","callbackForType","getElement","hasAttribute","target","srcElement","roomleElement","typeElement","idElement","16","getSvg","attributes","svg","createElementNS","SVG_NS","attribute","setAttributeNS","getNode","buildPlanIcon","isPlus","viewBox","firstPath","thirdPath","buildAdd","buildPlanNow","buildAr","secondPath","graph","fourthPath","path","buildCopy","path1","transform","path2","path3","path4","path5","buildVr","17","ios","android","desktop","Image","src","18","isOSCached","isAndroidCached","isIPadCached","isSupportedMobileCached","test","navigator","userAgent","MSStream","isAndroid","isSupportedMobile","isIPad","handlePlan","typeStr","iosPlanLink","desktopLink","web","baseUrl","viewrLink","createLinkForItemOrConfiguration","isItem","iosIdentifier","webIdentifier","planId","iosLink","isConfigurableItem","handleItem","handleConfiguration","deeplink","PLAN","seperator","indexOf","19","delay","oss","storePrefix","getTime","open","url","handleAndroidBrowsers","appId","scheme","isAndroidMobile","regExAppleWebKit","RegExp","resultAppleWebKitRegEx","appleWebKitVersion","parseFloat","isAndroidBrowser","split","encodeURI","perfromDeepLink","clicked","parseHref","start","finalURI","osin","hrefParts","el","display","20","matchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector","webkitMatchesSelector","ownerDocument","21","es6_promise_1","fetch","xhr","XMLHttpRequest","separator","uri","encodedKey","encodeURIComponent","encodedContent","JSON","stringify","onload","status","responseText","response","onerror","onabort","ontimeout","credentials","username","password","setRequestHeader","send","es6-promise","22","23","setDefault","defaultValue","toCheck","keys","keysLength","setDeeplinkTranslation","translation","androidHint","iosHint","24","getNamesAndValues","getNames","map","getObjValues","filter","v","k","25"],"mappings":"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","file":"roomle-button.min.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n(function (process,global){\n/*!\n * @overview es6-promise - a tiny implementation of Promises/A+.\n * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)\n * @license   Licensed under MIT license\n *            See https://raw.githubusercontent.com/jakearchibald/es6-promise/master/LICENSE\n * @version   3.2.1\n */\n\n(function() {\n    \"use strict\";\n    function lib$es6$promise$utils$$objectOrFunction(x) {\n      return typeof x === 'function' || (typeof x === 'object' && x !== null);\n    }\n\n    function lib$es6$promise$utils$$isFunction(x) {\n      return typeof x === 'function';\n    }\n\n    function lib$es6$promise$utils$$isMaybeThenable(x) {\n      return typeof x === 'object' && x !== null;\n    }\n\n    var lib$es6$promise$utils$$_isArray;\n    if (!Array.isArray) {\n      lib$es6$promise$utils$$_isArray = function (x) {\n        return Object.prototype.toString.call(x) === '[object Array]';\n      };\n    } else {\n      lib$es6$promise$utils$$_isArray = Array.isArray;\n    }\n\n    var lib$es6$promise$utils$$isArray = lib$es6$promise$utils$$_isArray;\n    var lib$es6$promise$asap$$len = 0;\n    var lib$es6$promise$asap$$vertxNext;\n    var lib$es6$promise$asap$$customSchedulerFn;\n\n    var lib$es6$promise$asap$$asap = function asap(callback, arg) {\n      lib$es6$promise$asap$$queue[lib$es6$promise$asap$$len] = callback;\n      lib$es6$promise$asap$$queue[lib$es6$promise$asap$$len + 1] = arg;\n      lib$es6$promise$asap$$len += 2;\n      if (lib$es6$promise$asap$$len === 2) {\n        // If len is 2, that means that we need to schedule an async flush.\n        // If additional callbacks are queued before the queue is flushed, they\n        // will be processed by this flush that we are scheduling.\n        if (lib$es6$promise$asap$$customSchedulerFn) {\n          lib$es6$promise$asap$$customSchedulerFn(lib$es6$promise$asap$$flush);\n        } else {\n          lib$es6$promise$asap$$scheduleFlush();\n        }\n      }\n    }\n\n    function lib$es6$promise$asap$$setScheduler(scheduleFn) {\n      lib$es6$promise$asap$$customSchedulerFn = scheduleFn;\n    }\n\n    function lib$es6$promise$asap$$setAsap(asapFn) {\n      lib$es6$promise$asap$$asap = asapFn;\n    }\n\n    var lib$es6$promise$asap$$browserWindow = (typeof window !== 'undefined') ? window : undefined;\n    var lib$es6$promise$asap$$browserGlobal = lib$es6$promise$asap$$browserWindow || {};\n    var lib$es6$promise$asap$$BrowserMutationObserver = lib$es6$promise$asap$$browserGlobal.MutationObserver || lib$es6$promise$asap$$browserGlobal.WebKitMutationObserver;\n    var lib$es6$promise$asap$$isNode = typeof self === 'undefined' && typeof process !== 'undefined' && {}.toString.call(process) === '[object process]';\n\n    // test for web worker but not in IE10\n    var lib$es6$promise$asap$$isWorker = typeof Uint8ClampedArray !== 'undefined' &&\n      typeof importScripts !== 'undefined' &&\n      typeof MessageChannel !== 'undefined';\n\n    // node\n    function lib$es6$promise$asap$$useNextTick() {\n      // node version 0.10.x displays a deprecation warning when nextTick is used recursively\n      // see https://github.com/cujojs/when/issues/410 for details\n      return function() {\n        process.nextTick(lib$es6$promise$asap$$flush);\n      };\n    }\n\n    // vertx\n    function lib$es6$promise$asap$$useVertxTimer() {\n      return function() {\n        lib$es6$promise$asap$$vertxNext(lib$es6$promise$asap$$flush);\n      };\n    }\n\n    function lib$es6$promise$asap$$useMutationObserver() {\n      var iterations = 0;\n      var observer = new lib$es6$promise$asap$$BrowserMutationObserver(lib$es6$promise$asap$$flush);\n      var node = document.createTextNode('');\n      observer.observe(node, { characterData: true });\n\n      return function() {\n        node.data = (iterations = ++iterations % 2);\n      };\n    }\n\n    // web worker\n    function lib$es6$promise$asap$$useMessageChannel() {\n      var channel = new MessageChannel();\n      channel.port1.onmessage = lib$es6$promise$asap$$flush;\n      return function () {\n        channel.port2.postMessage(0);\n      };\n    }\n\n    function lib$es6$promise$asap$$useSetTimeout() {\n      return function() {\n        setTimeout(lib$es6$promise$asap$$flush, 1);\n      };\n    }\n\n    var lib$es6$promise$asap$$queue = new Array(1000);\n    function lib$es6$promise$asap$$flush() {\n      for (var i = 0; i < lib$es6$promise$asap$$len; i+=2) {\n        var callback = lib$es6$promise$asap$$queue[i];\n        var arg = lib$es6$promise$asap$$queue[i+1];\n\n        callback(arg);\n\n        lib$es6$promise$asap$$queue[i] = undefined;\n        lib$es6$promise$asap$$queue[i+1] = undefined;\n      }\n\n      lib$es6$promise$asap$$len = 0;\n    }\n\n    function lib$es6$promise$asap$$attemptVertx() {\n      try {\n        var r = require;\n        var vertx = r('vertx');\n        lib$es6$promise$asap$$vertxNext = vertx.runOnLoop || vertx.runOnContext;\n        return lib$es6$promise$asap$$useVertxTimer();\n      } catch(e) {\n        return lib$es6$promise$asap$$useSetTimeout();\n      }\n    }\n\n    var lib$es6$promise$asap$$scheduleFlush;\n    // Decide what async method to use to triggering processing of queued callbacks:\n    if (lib$es6$promise$asap$$isNode) {\n      lib$es6$promise$asap$$scheduleFlush = lib$es6$promise$asap$$useNextTick();\n    } else if (lib$es6$promise$asap$$BrowserMutationObserver) {\n      lib$es6$promise$asap$$scheduleFlush = lib$es6$promise$asap$$useMutationObserver();\n    } else if (lib$es6$promise$asap$$isWorker) {\n      lib$es6$promise$asap$$scheduleFlush = lib$es6$promise$asap$$useMessageChannel();\n    } else if (lib$es6$promise$asap$$browserWindow === undefined && typeof require === 'function') {\n      lib$es6$promise$asap$$scheduleFlush = lib$es6$promise$asap$$attemptVertx();\n    } else {\n      lib$es6$promise$asap$$scheduleFlush = lib$es6$promise$asap$$useSetTimeout();\n    }\n    function lib$es6$promise$then$$then(onFulfillment, onRejection) {\n      var parent = this;\n\n      var child = new this.constructor(lib$es6$promise$$internal$$noop);\n\n      if (child[lib$es6$promise$$internal$$PROMISE_ID] === undefined) {\n        lib$es6$promise$$internal$$makePromise(child);\n      }\n\n      var state = parent._state;\n\n      if (state) {\n        var callback = arguments[state - 1];\n        lib$es6$promise$asap$$asap(function(){\n          lib$es6$promise$$internal$$invokeCallback(state, child, callback, parent._result);\n        });\n      } else {\n        lib$es6$promise$$internal$$subscribe(parent, child, onFulfillment, onRejection);\n      }\n\n      return child;\n    }\n    var lib$es6$promise$then$$default = lib$es6$promise$then$$then;\n    function lib$es6$promise$promise$resolve$$resolve(object) {\n      /*jshint validthis:true */\n      var Constructor = this;\n\n      if (object && typeof object === 'object' && object.constructor === Constructor) {\n        return object;\n      }\n\n      var promise = new Constructor(lib$es6$promise$$internal$$noop);\n      lib$es6$promise$$internal$$resolve(promise, object);\n      return promise;\n    }\n    var lib$es6$promise$promise$resolve$$default = lib$es6$promise$promise$resolve$$resolve;\n    var lib$es6$promise$$internal$$PROMISE_ID = Math.random().toString(36).substring(16);\n\n    function lib$es6$promise$$internal$$noop() {}\n\n    var lib$es6$promise$$internal$$PENDING   = void 0;\n    var lib$es6$promise$$internal$$FULFILLED = 1;\n    var lib$es6$promise$$internal$$REJECTED  = 2;\n\n    var lib$es6$promise$$internal$$GET_THEN_ERROR = new lib$es6$promise$$internal$$ErrorObject();\n\n    function lib$es6$promise$$internal$$selfFulfillment() {\n      return new TypeError(\"You cannot resolve a promise with itself\");\n    }\n\n    function lib$es6$promise$$internal$$cannotReturnOwn() {\n      return new TypeError('A promises callback cannot return that same promise.');\n    }\n\n    function lib$es6$promise$$internal$$getThen(promise) {\n      try {\n        return promise.then;\n      } catch(error) {\n        lib$es6$promise$$internal$$GET_THEN_ERROR.error = error;\n        return lib$es6$promise$$internal$$GET_THEN_ERROR;\n      }\n    }\n\n    function lib$es6$promise$$internal$$tryThen(then, value, fulfillmentHandler, rejectionHandler) {\n      try {\n        then.call(value, fulfillmentHandler, rejectionHandler);\n      } catch(e) {\n        return e;\n      }\n    }\n\n    function lib$es6$promise$$internal$$handleForeignThenable(promise, thenable, then) {\n       lib$es6$promise$asap$$asap(function(promise) {\n        var sealed = false;\n        var error = lib$es6$promise$$internal$$tryThen(then, thenable, function(value) {\n          if (sealed) { return; }\n          sealed = true;\n          if (thenable !== value) {\n            lib$es6$promise$$internal$$resolve(promise, value);\n          } else {\n            lib$es6$promise$$internal$$fulfill(promise, value);\n          }\n        }, function(reason) {\n          if (sealed) { return; }\n          sealed = true;\n\n          lib$es6$promise$$internal$$reject(promise, reason);\n        }, 'Settle: ' + (promise._label || ' unknown promise'));\n\n        if (!sealed && error) {\n          sealed = true;\n          lib$es6$promise$$internal$$reject(promise, error);\n        }\n      }, promise);\n    }\n\n    function lib$es6$promise$$internal$$handleOwnThenable(promise, thenable) {\n      if (thenable._state === lib$es6$promise$$internal$$FULFILLED) {\n        lib$es6$promise$$internal$$fulfill(promise, thenable._result);\n      } else if (thenable._state === lib$es6$promise$$internal$$REJECTED) {\n        lib$es6$promise$$internal$$reject(promise, thenable._result);\n      } else {\n        lib$es6$promise$$internal$$subscribe(thenable, undefined, function(value) {\n          lib$es6$promise$$internal$$resolve(promise, value);\n        }, function(reason) {\n          lib$es6$promise$$internal$$reject(promise, reason);\n        });\n      }\n    }\n\n    function lib$es6$promise$$internal$$handleMaybeThenable(promise, maybeThenable, then) {\n      if (maybeThenable.constructor === promise.constructor &&\n          then === lib$es6$promise$then$$default &&\n          constructor.resolve === lib$es6$promise$promise$resolve$$default) {\n        lib$es6$promise$$internal$$handleOwnThenable(promise, maybeThenable);\n      } else {\n        if (then === lib$es6$promise$$internal$$GET_THEN_ERROR) {\n          lib$es6$promise$$internal$$reject(promise, lib$es6$promise$$internal$$GET_THEN_ERROR.error);\n        } else if (then === undefined) {\n          lib$es6$promise$$internal$$fulfill(promise, maybeThenable);\n        } else if (lib$es6$promise$utils$$isFunction(then)) {\n          lib$es6$promise$$internal$$handleForeignThenable(promise, maybeThenable, then);\n        } else {\n          lib$es6$promise$$internal$$fulfill(promise, maybeThenable);\n        }\n      }\n    }\n\n    function lib$es6$promise$$internal$$resolve(promise, value) {\n      if (promise === value) {\n        lib$es6$promise$$internal$$reject(promise, lib$es6$promise$$internal$$selfFulfillment());\n      } else if (lib$es6$promise$utils$$objectOrFunction(value)) {\n        lib$es6$promise$$internal$$handleMaybeThenable(promise, value, lib$es6$promise$$internal$$getThen(value));\n      } else {\n        lib$es6$promise$$internal$$fulfill(promise, value);\n      }\n    }\n\n    function lib$es6$promise$$internal$$publishRejection(promise) {\n      if (promise._onerror) {\n        promise._onerror(promise._result);\n      }\n\n      lib$es6$promise$$internal$$publish(promise);\n    }\n\n    function lib$es6$promise$$internal$$fulfill(promise, value) {\n      if (promise._state !== lib$es6$promise$$internal$$PENDING) { return; }\n\n      promise._result = value;\n      promise._state = lib$es6$promise$$internal$$FULFILLED;\n\n      if (promise._subscribers.length !== 0) {\n        lib$es6$promise$asap$$asap(lib$es6$promise$$internal$$publish, promise);\n      }\n    }\n\n    function lib$es6$promise$$internal$$reject(promise, reason) {\n      if (promise._state !== lib$es6$promise$$internal$$PENDING) { return; }\n      promise._state = lib$es6$promise$$internal$$REJECTED;\n      promise._result = reason;\n\n      lib$es6$promise$asap$$asap(lib$es6$promise$$internal$$publishRejection, promise);\n    }\n\n    function lib$es6$promise$$internal$$subscribe(parent, child, onFulfillment, onRejection) {\n      var subscribers = parent._subscribers;\n      var length = subscribers.length;\n\n      parent._onerror = null;\n\n      subscribers[length] = child;\n      subscribers[length + lib$es6$promise$$internal$$FULFILLED] = onFulfillment;\n      subscribers[length + lib$es6$promise$$internal$$REJECTED]  = onRejection;\n\n      if (length === 0 && parent._state) {\n        lib$es6$promise$asap$$asap(lib$es6$promise$$internal$$publish, parent);\n      }\n    }\n\n    function lib$es6$promise$$internal$$publish(promise) {\n      var subscribers = promise._subscribers;\n      var settled = promise._state;\n\n      if (subscribers.length === 0) { return; }\n\n      var child, callback, detail = promise._result;\n\n      for (var i = 0; i < subscribers.length; i += 3) {\n        child = subscribers[i];\n        callback = subscribers[i + settled];\n\n        if (child) {\n          lib$es6$promise$$internal$$invokeCallback(settled, child, callback, detail);\n        } else {\n          callback(detail);\n        }\n      }\n\n      promise._subscribers.length = 0;\n    }\n\n    function lib$es6$promise$$internal$$ErrorObject() {\n      this.error = null;\n    }\n\n    var lib$es6$promise$$internal$$TRY_CATCH_ERROR = new lib$es6$promise$$internal$$ErrorObject();\n\n    function lib$es6$promise$$internal$$tryCatch(callback, detail) {\n      try {\n        return callback(detail);\n      } catch(e) {\n        lib$es6$promise$$internal$$TRY_CATCH_ERROR.error = e;\n        return lib$es6$promise$$internal$$TRY_CATCH_ERROR;\n      }\n    }\n\n    function lib$es6$promise$$internal$$invokeCallback(settled, promise, callback, detail) {\n      var hasCallback = lib$es6$promise$utils$$isFunction(callback),\n          value, error, succeeded, failed;\n\n      if (hasCallback) {\n        value = lib$es6$promise$$internal$$tryCatch(callback, detail);\n\n        if (value === lib$es6$promise$$internal$$TRY_CATCH_ERROR) {\n          failed = true;\n          error = value.error;\n          value = null;\n        } else {\n          succeeded = true;\n        }\n\n        if (promise === value) {\n          lib$es6$promise$$internal$$reject(promise, lib$es6$promise$$internal$$cannotReturnOwn());\n          return;\n        }\n\n      } else {\n        value = detail;\n        succeeded = true;\n      }\n\n      if (promise._state !== lib$es6$promise$$internal$$PENDING) {\n        // noop\n      } else if (hasCallback && succeeded) {\n        lib$es6$promise$$internal$$resolve(promise, value);\n      } else if (failed) {\n        lib$es6$promise$$internal$$reject(promise, error);\n      } else if (settled === lib$es6$promise$$internal$$FULFILLED) {\n        lib$es6$promise$$internal$$fulfill(promise, value);\n      } else if (settled === lib$es6$promise$$internal$$REJECTED) {\n        lib$es6$promise$$internal$$reject(promise, value);\n      }\n    }\n\n    function lib$es6$promise$$internal$$initializePromise(promise, resolver) {\n      try {\n        resolver(function resolvePromise(value){\n          lib$es6$promise$$internal$$resolve(promise, value);\n        }, function rejectPromise(reason) {\n          lib$es6$promise$$internal$$reject(promise, reason);\n        });\n      } catch(e) {\n        lib$es6$promise$$internal$$reject(promise, e);\n      }\n    }\n\n    var lib$es6$promise$$internal$$id = 0;\n    function lib$es6$promise$$internal$$nextId() {\n      return lib$es6$promise$$internal$$id++;\n    }\n\n    function lib$es6$promise$$internal$$makePromise(promise) {\n      promise[lib$es6$promise$$internal$$PROMISE_ID] = lib$es6$promise$$internal$$id++;\n      promise._state = undefined;\n      promise._result = undefined;\n      promise._subscribers = [];\n    }\n\n    function lib$es6$promise$promise$all$$all(entries) {\n      return new lib$es6$promise$enumerator$$default(this, entries).promise;\n    }\n    var lib$es6$promise$promise$all$$default = lib$es6$promise$promise$all$$all;\n    function lib$es6$promise$promise$race$$race(entries) {\n      /*jshint validthis:true */\n      var Constructor = this;\n\n      if (!lib$es6$promise$utils$$isArray(entries)) {\n        return new Constructor(function(resolve, reject) {\n          reject(new TypeError('You must pass an array to race.'));\n        });\n      } else {\n        return new Constructor(function(resolve, reject) {\n          var length = entries.length;\n          for (var i = 0; i < length; i++) {\n            Constructor.resolve(entries[i]).then(resolve, reject);\n          }\n        });\n      }\n    }\n    var lib$es6$promise$promise$race$$default = lib$es6$promise$promise$race$$race;\n    function lib$es6$promise$promise$reject$$reject(reason) {\n      /*jshint validthis:true */\n      var Constructor = this;\n      var promise = new Constructor(lib$es6$promise$$internal$$noop);\n      lib$es6$promise$$internal$$reject(promise, reason);\n      return promise;\n    }\n    var lib$es6$promise$promise$reject$$default = lib$es6$promise$promise$reject$$reject;\n\n\n    function lib$es6$promise$promise$$needsResolver() {\n      throw new TypeError('You must pass a resolver function as the first argument to the promise constructor');\n    }\n\n    function lib$es6$promise$promise$$needsNew() {\n      throw new TypeError(\"Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.\");\n    }\n\n    var lib$es6$promise$promise$$default = lib$es6$promise$promise$$Promise;\n    /**\n      Promise objects represent the eventual result of an asynchronous operation. The\n      primary way of interacting with a promise is through its `then` method, which\n      registers callbacks to receive either a promise's eventual value or the reason\n      why the promise cannot be fulfilled.\n\n      Terminology\n      -----------\n\n      - `promise` is an object or function with a `then` method whose behavior conforms to this specification.\n      - `thenable` is an object or function that defines a `then` method.\n      - `value` is any legal JavaScript value (including undefined, a thenable, or a promise).\n      - `exception` is a value that is thrown using the throw statement.\n      - `reason` is a value that indicates why a promise was rejected.\n      - `settled` the final resting state of a promise, fulfilled or rejected.\n\n      A promise can be in one of three states: pending, fulfilled, or rejected.\n\n      Promises that are fulfilled have a fulfillment value and are in the fulfilled\n      state.  Promises that are rejected have a rejection reason and are in the\n      rejected state.  A fulfillment value is never a thenable.\n\n      Promises can also be said to *resolve* a value.  If this value is also a\n      promise, then the original promise's settled state will match the value's\n      settled state.  So a promise that *resolves* a promise that rejects will\n      itself reject, and a promise that *resolves* a promise that fulfills will\n      itself fulfill.\n\n\n      Basic Usage:\n      ------------\n\n      ```js\n      var promise = new Promise(function(resolve, reject) {\n        // on success\n        resolve(value);\n\n        // on failure\n        reject(reason);\n      });\n\n      promise.then(function(value) {\n        // on fulfillment\n      }, function(reason) {\n        // on rejection\n      });\n      ```\n\n      Advanced Usage:\n      ---------------\n\n      Promises shine when abstracting away asynchronous interactions such as\n      `XMLHttpRequest`s.\n\n      ```js\n      function getJSON(url) {\n        return new Promise(function(resolve, reject){\n          var xhr = new XMLHttpRequest();\n\n          xhr.open('GET', url);\n          xhr.onreadystatechange = handler;\n          xhr.responseType = 'json';\n          xhr.setRequestHeader('Accept', 'application/json');\n          xhr.send();\n\n          function handler() {\n            if (this.readyState === this.DONE) {\n              if (this.status === 200) {\n                resolve(this.response);\n              } else {\n                reject(new Error('getJSON: `' + url + '` failed with status: [' + this.status + ']'));\n              }\n            }\n          };\n        });\n      }\n\n      getJSON('/posts.json').then(function(json) {\n        // on fulfillment\n      }, function(reason) {\n        // on rejection\n      });\n      ```\n\n      Unlike callbacks, promises are great composable primitives.\n\n      ```js\n      Promise.all([\n        getJSON('/posts'),\n        getJSON('/comments')\n      ]).then(function(values){\n        values[0] // => postsJSON\n        values[1] // => commentsJSON\n\n        return values;\n      });\n      ```\n\n      @class Promise\n      @param {function} resolver\n      Useful for tooling.\n      @constructor\n    */\n    function lib$es6$promise$promise$$Promise(resolver) {\n      this[lib$es6$promise$$internal$$PROMISE_ID] = lib$es6$promise$$internal$$nextId();\n      this._result = this._state = undefined;\n      this._subscribers = [];\n\n      if (lib$es6$promise$$internal$$noop !== resolver) {\n        typeof resolver !== 'function' && lib$es6$promise$promise$$needsResolver();\n        this instanceof lib$es6$promise$promise$$Promise ? lib$es6$promise$$internal$$initializePromise(this, resolver) : lib$es6$promise$promise$$needsNew();\n      }\n    }\n\n    lib$es6$promise$promise$$Promise.all = lib$es6$promise$promise$all$$default;\n    lib$es6$promise$promise$$Promise.race = lib$es6$promise$promise$race$$default;\n    lib$es6$promise$promise$$Promise.resolve = lib$es6$promise$promise$resolve$$default;\n    lib$es6$promise$promise$$Promise.reject = lib$es6$promise$promise$reject$$default;\n    lib$es6$promise$promise$$Promise._setScheduler = lib$es6$promise$asap$$setScheduler;\n    lib$es6$promise$promise$$Promise._setAsap = lib$es6$promise$asap$$setAsap;\n    lib$es6$promise$promise$$Promise._asap = lib$es6$promise$asap$$asap;\n\n    lib$es6$promise$promise$$Promise.prototype = {\n      constructor: lib$es6$promise$promise$$Promise,\n\n    /**\n      The primary way of interacting with a promise is through its `then` method,\n      which registers callbacks to receive either a promise's eventual value or the\n      reason why the promise cannot be fulfilled.\n\n      ```js\n      findUser().then(function(user){\n        // user is available\n      }, function(reason){\n        // user is unavailable, and you are given the reason why\n      });\n      ```\n\n      Chaining\n      --------\n\n      The return value of `then` is itself a promise.  This second, 'downstream'\n      promise is resolved with the return value of the first promise's fulfillment\n      or rejection handler, or rejected if the handler throws an exception.\n\n      ```js\n      findUser().then(function (user) {\n        return user.name;\n      }, function (reason) {\n        return 'default name';\n      }).then(function (userName) {\n        // If `findUser` fulfilled, `userName` will be the user's name, otherwise it\n        // will be `'default name'`\n      });\n\n      findUser().then(function (user) {\n        throw new Error('Found user, but still unhappy');\n      }, function (reason) {\n        throw new Error('`findUser` rejected and we're unhappy');\n      }).then(function (value) {\n        // never reached\n      }, function (reason) {\n        // if `findUser` fulfilled, `reason` will be 'Found user, but still unhappy'.\n        // If `findUser` rejected, `reason` will be '`findUser` rejected and we're unhappy'.\n      });\n      ```\n      If the downstream promise does not specify a rejection handler, rejection reasons will be propagated further downstream.\n\n      ```js\n      findUser().then(function (user) {\n        throw new PedagogicalException('Upstream error');\n      }).then(function (value) {\n        // never reached\n      }).then(function (value) {\n        // never reached\n      }, function (reason) {\n        // The `PedgagocialException` is propagated all the way down to here\n      });\n      ```\n\n      Assimilation\n      ------------\n\n      Sometimes the value you want to propagate to a downstream promise can only be\n      retrieved asynchronously. This can be achieved by returning a promise in the\n      fulfillment or rejection handler. The downstream promise will then be pending\n      until the returned promise is settled. This is called *assimilation*.\n\n      ```js\n      findUser().then(function (user) {\n        return findCommentsByAuthor(user);\n      }).then(function (comments) {\n        // The user's comments are now available\n      });\n      ```\n\n      If the assimliated promise rejects, then the downstream promise will also reject.\n\n      ```js\n      findUser().then(function (user) {\n        return findCommentsByAuthor(user);\n      }).then(function (comments) {\n        // If `findCommentsByAuthor` fulfills, we'll have the value here\n      }, function (reason) {\n        // If `findCommentsByAuthor` rejects, we'll have the reason here\n      });\n      ```\n\n      Simple Example\n      --------------\n\n      Synchronous Example\n\n      ```javascript\n      var result;\n\n      try {\n        result = findResult();\n        // success\n      } catch(reason) {\n        // failure\n      }\n      ```\n\n      Errback Example\n\n      ```js\n      findResult(function(result, err){\n        if (err) {\n          // failure\n        } else {\n          // success\n        }\n      });\n      ```\n\n      Promise Example;\n\n      ```javascript\n      findResult().then(function(result){\n        // success\n      }, function(reason){\n        // failure\n      });\n      ```\n\n      Advanced Example\n      --------------\n\n      Synchronous Example\n\n      ```javascript\n      var author, books;\n\n      try {\n        author = findAuthor();\n        books  = findBooksByAuthor(author);\n        // success\n      } catch(reason) {\n        // failure\n      }\n      ```\n\n      Errback Example\n\n      ```js\n\n      function foundBooks(books) {\n\n      }\n\n      function failure(reason) {\n\n      }\n\n      findAuthor(function(author, err){\n        if (err) {\n          failure(err);\n          // failure\n        } else {\n          try {\n            findBoooksByAuthor(author, function(books, err) {\n              if (err) {\n                failure(err);\n              } else {\n                try {\n                  foundBooks(books);\n                } catch(reason) {\n                  failure(reason);\n                }\n              }\n            });\n          } catch(error) {\n            failure(err);\n          }\n          // success\n        }\n      });\n      ```\n\n      Promise Example;\n\n      ```javascript\n      findAuthor().\n        then(findBooksByAuthor).\n        then(function(books){\n          // found books\n      }).catch(function(reason){\n        // something went wrong\n      });\n      ```\n\n      @method then\n      @param {Function} onFulfilled\n      @param {Function} onRejected\n      Useful for tooling.\n      @return {Promise}\n    */\n      then: lib$es6$promise$then$$default,\n\n    /**\n      `catch` is simply sugar for `then(undefined, onRejection)` which makes it the same\n      as the catch block of a try/catch statement.\n\n      ```js\n      function findAuthor(){\n        throw new Error('couldn't find that author');\n      }\n\n      // synchronous\n      try {\n        findAuthor();\n      } catch(reason) {\n        // something went wrong\n      }\n\n      // async with promises\n      findAuthor().catch(function(reason){\n        // something went wrong\n      });\n      ```\n\n      @method catch\n      @param {Function} onRejection\n      Useful for tooling.\n      @return {Promise}\n    */\n      'catch': function(onRejection) {\n        return this.then(null, onRejection);\n      }\n    };\n    var lib$es6$promise$enumerator$$default = lib$es6$promise$enumerator$$Enumerator;\n    function lib$es6$promise$enumerator$$Enumerator(Constructor, input) {\n      this._instanceConstructor = Constructor;\n      this.promise = new Constructor(lib$es6$promise$$internal$$noop);\n\n      if (!this.promise[lib$es6$promise$$internal$$PROMISE_ID]) {\n        lib$es6$promise$$internal$$makePromise(this.promise);\n      }\n\n      if (lib$es6$promise$utils$$isArray(input)) {\n        this._input     = input;\n        this.length     = input.length;\n        this._remaining = input.length;\n\n        this._result = new Array(this.length);\n\n        if (this.length === 0) {\n          lib$es6$promise$$internal$$fulfill(this.promise, this._result);\n        } else {\n          this.length = this.length || 0;\n          this._enumerate();\n          if (this._remaining === 0) {\n            lib$es6$promise$$internal$$fulfill(this.promise, this._result);\n          }\n        }\n      } else {\n        lib$es6$promise$$internal$$reject(this.promise, lib$es6$promise$enumerator$$validationError());\n      }\n    }\n\n    function lib$es6$promise$enumerator$$validationError() {\n      return new Error('Array Methods must be provided an Array');\n    }\n\n    lib$es6$promise$enumerator$$Enumerator.prototype._enumerate = function() {\n      var length  = this.length;\n      var input   = this._input;\n\n      for (var i = 0; this._state === lib$es6$promise$$internal$$PENDING && i < length; i++) {\n        this._eachEntry(input[i], i);\n      }\n    };\n\n    lib$es6$promise$enumerator$$Enumerator.prototype._eachEntry = function(entry, i) {\n      var c = this._instanceConstructor;\n      var resolve = c.resolve;\n\n      if (resolve === lib$es6$promise$promise$resolve$$default) {\n        var then = lib$es6$promise$$internal$$getThen(entry);\n\n        if (then === lib$es6$promise$then$$default &&\n            entry._state !== lib$es6$promise$$internal$$PENDING) {\n          this._settledAt(entry._state, i, entry._result);\n        } else if (typeof then !== 'function') {\n          this._remaining--;\n          this._result[i] = entry;\n        } else if (c === lib$es6$promise$promise$$default) {\n          var promise = new c(lib$es6$promise$$internal$$noop);\n          lib$es6$promise$$internal$$handleMaybeThenable(promise, entry, then);\n          this._willSettleAt(promise, i);\n        } else {\n          this._willSettleAt(new c(function(resolve) { resolve(entry); }), i);\n        }\n      } else {\n        this._willSettleAt(resolve(entry), i);\n      }\n    };\n\n    lib$es6$promise$enumerator$$Enumerator.prototype._settledAt = function(state, i, value) {\n      var promise = this.promise;\n\n      if (promise._state === lib$es6$promise$$internal$$PENDING) {\n        this._remaining--;\n\n        if (state === lib$es6$promise$$internal$$REJECTED) {\n          lib$es6$promise$$internal$$reject(promise, value);\n        } else {\n          this._result[i] = value;\n        }\n      }\n\n      if (this._remaining === 0) {\n        lib$es6$promise$$internal$$fulfill(promise, this._result);\n      }\n    };\n\n    lib$es6$promise$enumerator$$Enumerator.prototype._willSettleAt = function(promise, i) {\n      var enumerator = this;\n\n      lib$es6$promise$$internal$$subscribe(promise, undefined, function(value) {\n        enumerator._settledAt(lib$es6$promise$$internal$$FULFILLED, i, value);\n      }, function(reason) {\n        enumerator._settledAt(lib$es6$promise$$internal$$REJECTED, i, reason);\n      });\n    };\n    function lib$es6$promise$polyfill$$polyfill() {\n      var local;\n\n      if (typeof global !== 'undefined') {\n          local = global;\n      } else if (typeof self !== 'undefined') {\n          local = self;\n      } else {\n          try {\n              local = Function('return this')();\n          } catch (e) {\n              throw new Error('polyfill failed because global object is unavailable in this environment');\n          }\n      }\n\n      var P = local.Promise;\n\n      if (P && Object.prototype.toString.call(P.resolve()) === '[object Promise]' && !P.cast) {\n        return;\n      }\n\n      local.Promise = lib$es6$promise$promise$$default;\n    }\n    var lib$es6$promise$polyfill$$default = lib$es6$promise$polyfill$$polyfill;\n\n    var lib$es6$promise$umd$$ES6Promise = {\n      'Promise': lib$es6$promise$promise$$default,\n      'polyfill': lib$es6$promise$polyfill$$default\n    };\n\n    /* global define:true module:true window: true */\n    if (typeof define === 'function' && define['amd']) {\n      define(function() { return lib$es6$promise$umd$$ES6Promise; });\n    } else if (typeof module !== 'undefined' && module['exports']) {\n      module['exports'] = lib$es6$promise$umd$$ES6Promise;\n    } else if (typeof this !== 'undefined') {\n      this['ES6Promise'] = lib$es6$promise$umd$$ES6Promise;\n    }\n\n    lib$es6$promise$polyfill$$default();\n}).call(this);\n\n\n}).call(this,require('_process'),typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{\"_process\":2}],2:[function(require,module,exports){\n// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n\n},{}],3:[function(require,module,exports){\n\"use strict\";\nvar controllers = require('./controllers/Controllers');\nvar SettingsService_1 = require('./services/SettingsService');\nvar EventHandlerService_1 = require('./services/EventHandlerService');\nvar ButtonsService_1 = require('./services/ButtonsService');\nvar DomBuilderService_1 = require('./services/DomBuilderService');\nvar PolyfillService_1 = require('./services/PolyfillService');\nvar MobileRedirectService_1 = require('./services/MobileRedirectService');\nvar MobileDetectService_1 = require('./services/MobileDetectService');\nvar RoomleTypeService_1 = require('./services/RoomleTypeService');\nvar ImagesService_1 = require('./services/ImagesService');\nvar RoomleButton = (function () {\n    function RoomleButton(settings) {\n        this.domBuilder = DomBuilderService_1.DomBuilderService.inject();\n        this.imagesService = ImagesService_1.ImagesService.inject();\n        this.eventHandler = EventHandlerService_1.EventHandlerService.inject();\n        this.polyfillService = PolyfillService_1.PolyfillService.inject();\n        this.mobileRedirectService = MobileRedirectService_1.MobileRedirectService.inject();\n        this.mobileDetectService = MobileDetectService_1.MobileDetectService.inject();\n        SettingsService_1.SettingsService.init(settings);\n        this.imagesService.preloadImages();\n        this.addCSS();\n        this.boot();\n    }\n    ;\n    RoomleButton.prototype.addCSS = function () {\n        var scriptId = 'rml-button-lib';\n        var script = document.getElementById(scriptId);\n        if (!script) {\n            return;\n        }\n        var head = document.head || document.getElementsByTagName('head')[0];\n        var href = script.getAttribute('src');\n        var styleHref = href.replace(/\\.js/g, '.css').replace(/\\/js\\//g, '/css/');\n        var style = document.createElement('link');\n        //style.async = true;\n        style.href = styleHref;\n        style.rel = 'stylesheet';\n        style.media = 'all';\n        style.setAttribute('integrity', '###sricheck###');\n        head.appendChild(style);\n    };\n    RoomleButton.prototype.setupClickListener = function (container) {\n        var _this = this;\n        container.addEventListener('click', function (e) { return _this.eventHandler.handle(e); });\n    };\n    RoomleButton.prototype.boot = function () {\n        var controllerClasses = controllers;\n        var element = document.body;\n        this.domBuilder.addCSS();\n        if (SettingsService_1.SettingsService.settings.container) {\n            var elementList = document.body.querySelectorAll(SettingsService_1.SettingsService.settings.container);\n            if (elementList.length) {\n                element = elementList[0];\n            }\n        }\n        if (SettingsService_1.SettingsService.settings.createPopUp) {\n            this.domBuilder.buildPopUp(element);\n        }\n        this.setupClickListener(element);\n        var instanceSelector = SettingsService_1.SettingsService.settings.selector; // ? this.settings.selector : '[data-roomle-id]';\n        for (var key in controllerClasses) {\n            if (controllerClasses.hasOwnProperty(key)) {\n                if (key === 'RoomleController' && SettingsService_1.SettingsService.settings.mode === 'lib') {\n                    continue;\n                }\n                var controllerClass = controllerClasses[key];\n                if (typeof controllerClass.parse === 'function') {\n                    controllerClass.parse(instanceSelector, element);\n                }\n            }\n        }\n    };\n    RoomleButton.prototype.openCustomPopUp = function (e, content, parent) {\n        var _this = this;\n        this.domBuilder.buildCustomPopUp(content, parent);\n        setTimeout(function () {\n            _this.eventHandler.dispatchOpenPopUp(e);\n        }, 1);\n    };\n    RoomleButton.prototype.dispatchClick = function (e, type, id, buttonType, highlight) {\n        if (highlight === void 0) { highlight = null; }\n        this.eventHandler.dispatch(e, type, id, ButtonsService_1.ButtonsService.convertButtonTypeToEnum(buttonType), highlight);\n    };\n    RoomleButton.prototype.getDomLinkFor = function (action, id, type, isHighlighted) {\n        if (isHighlighted === void 0) { isHighlighted = false; }\n        var roomleType = RoomleTypeService_1.RoomleTypeService.convertTypeToEnum(type);\n        var buttonType = ButtonsService_1.ButtonsService.convertButtonTypeToEnum(action);\n        var link = this.mobileDetectService.generateLink(id, roomleType, buttonType);\n        var buildOptions = { isHighlighted: isHighlighted, buildAnyway: true };\n        return this.domBuilder.buildLink(link, buildOptions);\n    };\n    RoomleButton.prototype.appendButtons = function (container, id, type) {\n        var _this = this;\n        var links = this.getLinks(id, type);\n        links.forEach(function (link) {\n            container.appendChild(_this.domBuilder.buildLink(link));\n        });\n    };\n    RoomleButton.prototype.execDeeplink = function (id, type, clickedButton, newWindow, callback) {\n        if (newWindow === void 0) { newWindow = false; }\n        if (callback === void 0) { callback = null; }\n        var roomleType = RoomleTypeService_1.RoomleTypeService.convertTypeToEnum(type);\n        var buttonType = ButtonsService_1.ButtonsService.convertButtonTypeToEnum(clickedButton);\n        var link = this.mobileDetectService.generateLink(id, roomleType, buttonType);\n        if (link.alternate) {\n            var event_1 = document.createEvent('Event');\n            event_1.initEvent('execDeeplink', true, true);\n            this.eventHandler.dispatch(event_1, type, id, ButtonsService_1.BUTTON_TYPE.TRIGGER, clickedButton, newWindow);\n        }\n        else {\n            this.mobileRedirectService.redirect(link, newWindow, callback);\n        }\n    };\n    RoomleButton.prototype.getLinks = function (id, type, callbackUrl) {\n        if (callbackUrl === void 0) { callbackUrl = null; }\n        return this.mobileDetectService.getLinks(id, RoomleTypeService_1.RoomleTypeService.convertTypeToEnum(type), callbackUrl);\n    };\n    RoomleButton.getInstance = function (settings) {\n        if (!(this._instance instanceof RoomleButton)) {\n            this._instance = new this(settings);\n        }\n        if (!window.RoomleButtonInstance) {\n            window.RoomleButtonInstance = this._instance;\n            SettingsService_1.SettingsService.settings.callback.booted();\n        }\n        return this._instance;\n    };\n    return RoomleButton;\n}());\nexports.RoomleButton = RoomleButton;\n\n},{\"./controllers/Controllers\":6,\"./services/ButtonsService\":12,\"./services/DomBuilderService\":14,\"./services/EventHandlerService\":15,\"./services/ImagesService\":17,\"./services/MobileDetectService\":18,\"./services/MobileRedirectService\":19,\"./services/PolyfillService\":20,\"./services/RoomleTypeService\":22,\"./services/SettingsService\":23}],4:[function(require,module,exports){\n\"use strict\";\nvar Environments_1 = require('./Environments');\nvar Environment = (function () {\n    function Environment() {\n    }\n    Environment.settings = function () {\n        var settings = {\n            rapi: 'api.test.roomle.com/v2',\n            protocol: 'https://',\n            rmlco: '',\n            shortlink: function (type, id, button, shortId) {\n                if (shortId === void 0) { shortId = null; }\n                if (Environment.env !== Environments_1.Environments.TEST && !!shortId) {\n                    return 'http://rml.co/' + shortId + '/' + button;\n                }\n                return window.location.host + '/deeplink?id=' + id + '&type=' + type + '&button=' + button;\n            }\n        };\n        if (Environment.env !== Environments_1.Environments.TEST) {\n            settings.rapi = 'api.roomle.com/v2';\n        }\n        settings.rmlco = settings.protocol + settings.rapi + '/shortIds';\n        return settings;\n    };\n    Object.defineProperty(Environment, \"env\", {\n        get: function () {\n            return this.envIndicator.substring(3, this.envIndicator.length - 3);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Environment, \"config\", {\n        get: function () {\n            return Environment.settings();\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Environment.envIndicator = '###production###';\n    return Environment;\n}());\nexports.Environment = Environment;\n\n},{\"./Environments\":5}],5:[function(require,module,exports){\n\"use strict\";\nvar Environments = (function () {\n    function Environments() {\n    }\n    Environments.PRODUCTION = 'production';\n    Environments.TEST = 'test';\n    return Environments;\n}());\nexports.Environments = Environments;\n\n},{}],6:[function(require,module,exports){\n\"use strict\";\nvar RoomleController_1 = require('./RoomleController');\nexports.RoomleController = RoomleController_1.RoomleController;\nvar PopupController_1 = require('./PopupController');\nexports.PopupController = PopupController_1.PopupController;\n\n},{\"./PopupController\":7,\"./RoomleController\":8}],7:[function(require,module,exports){\n\"use strict\";\nvar __extends = (this && this.__extends) || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\nvar Controller_1 = require('../lib/Controller');\nvar SettingsService_1 = require('../services/SettingsService');\nvar EventHandlerService_1 = require('../services/EventHandlerService');\nvar DomBuilderService_1 = require('../services/DomBuilderService');\nvar ImagesService_1 = require('../services/ImagesService');\nvar PopupController = (function (_super) {\n    __extends(PopupController, _super);\n    function PopupController(element) {\n        var _this = this;\n        _super.call(this, element);\n        this.eventHandlerService = EventHandlerService_1.EventHandlerService.inject();\n        this.domBuilderService = DomBuilderService_1.DomBuilderService.inject();\n        this.imagesService = ImagesService_1.ImagesService.inject();\n        if (!SettingsService_1.SettingsService.settings.createPopUp) {\n            return;\n        }\n        this.eventHandlerService.subscribe(EventHandlerService_1.EVENT_TYPES.TRIGGER, this.openPopup.bind(this));\n        this.eventHandlerService.subscribe(EventHandlerService_1.EVENT_TYPES.POP_UP_OPEN, this.simpleOpen.bind(this));\n        this.eventHandlerService.subscribe(EventHandlerService_1.EVENT_TYPES.POP_UP_CLOSE, this.closePopup.bind(this));\n        this.$('.rml-md-overlay')[0].addEventListener('click', function () { return _this.closePopup(); });\n        this.$('.rml-popup--close')[0].addEventListener('click', function () { return _this.closePopup(); });\n        if (SettingsService_1.SettingsService.settings.showBackButton) {\n            this.$('.rml-popup--back')[0].addEventListener('click', function () { return _this.back(); });\n        }\n        else {\n            this.$('.rml-popup--back')[0].classList.add('rml-popup--back__hide');\n        }\n        //this.roomleButtonService.addRoomleButton(this.triggerClicked.bind(this));\n    }\n    PopupController.prototype.closePopup = function () {\n        var classList = this.$('.rml-popup')[0].classList;\n        if (classList.contains('rml-md-show')) {\n            classList.remove('rml-md-show');\n            var back = this.$('.rml-popup--back')[0];\n            back.classList.remove('rml-popup--back__show');\n            this.unfreezeScrolling();\n            if (typeof SettingsService_1.SettingsService.settings.callback.popupClose === 'function') {\n                var id = (this.id) ? this.id : 'CUSTOM';\n                var type = (this.type) ? this.type : 'CUSTOM';\n                SettingsService_1.SettingsService.settings.callback.popupClose(id, type);\n            }\n        }\n        else {\n            classList.add('rml-md-show');\n            this.freezeScrolling();\n        }\n    };\n    PopupController.prototype.back = function () {\n        var linksContainer = this.$('.rml-deeplink--slider')[0];\n        linksContainer.classList.remove('rml-deeplink__hint');\n        var hintContainer = this.$('.rml-deeplink__hint-container')[0];\n        hintContainer.innerHTML = '';\n        var back = this.$('.rml-popup--back')[0];\n        back.classList.remove('rml-popup--back__show');\n        var hintText = this.$('.rml-deeplink--hint');\n        if (hintText.length) {\n            var text = hintText[0];\n            text.classList.remove('rml-hint__show');\n        }\n    };\n    PopupController.prototype.simpleOpen = function (e, id, type) {\n        e.preventDefault();\n        this.id = id;\n        this.type = type;\n        var popUp = document.querySelectorAll('[' + SettingsService_1.SettingsService.settings.popUpSelector + ']');\n        var modal = popUp[0].querySelectorAll('.rml-md-modal');\n        if (modal[0].classList.contains('rml-md-show')) {\n            modal[0].classList.remove('rml-md-show');\n        }\n        else {\n            modal[0].classList.add('rml-md-show');\n        }\n        this.freezeScrolling();\n        if (typeof SettingsService_1.SettingsService.settings.callback.popupOpen === 'function') {\n            SettingsService_1.SettingsService.settings.callback.popupOpen((id) ? id : 'CUSTOM', (type) ? type : 'CUSTOM');\n        }\n        return modal[0];\n    };\n    PopupController.prototype.openPopup = function (e, id, type, links, highlight) {\n        var _this = this;\n        var modal = this.simpleOpen(e, id, type);\n        var container = modal.querySelectorAll('.rml-generated-content');\n        container[0].innerHTML = '';\n        var linksContainer = document.createElement('div');\n        linksContainer.classList.add('rml-deeplink--slider');\n        linksContainer.classList.add('rml-deeplink--links');\n        var slide = document.createElement('div');\n        slide.classList.add('rml-deeplink--slide');\n        slide.classList.add('rml-deeplink--overview');\n        var alternate = document.createElement('div');\n        alternate.classList.add('rml-deeplink--slide');\n        alternate.classList.add('rml-deeplink--alternate');\n        links.forEach(function (link) {\n            var isHighlighted = link.type === highlight;\n            var linkDom = _this.domBuilderService.buildLink(link, {\n                isHighlighted: isHighlighted,\n                slideMode: true,\n                clickedHint: function () {\n                    alternate.innerHTML = '';\n                    var hintContainer = document.createElement('div');\n                    hintContainer.classList.add('rml-deeplink__hint-container');\n                    var imgContainer = document.createElement('div');\n                    var dom = document.createElement('div');\n                    imgContainer.classList.add('rml-deeplink__hint-img');\n                    dom.classList.add('rml-deeplink__hint-link');\n                    var img = document.createElement('img');\n                    var imgUrl = _this.imagesService.images[link.alternate];\n                    img.setAttribute('src', imgUrl);\n                    imgContainer.appendChild(img);\n                    hintContainer.appendChild(imgContainer);\n                    var back = document.querySelector('.rml-popup--back');\n                    if (SettingsService_1.SettingsService.settings.showBackButton) {\n                        back.classList.add('rml-popup--back__show');\n                    }\n                    var domLink = linkDom.cloneNode(true);\n                    dom.appendChild(domLink);\n                    _this.domBuilderService.addShortlink(dom, link.roomleType, link.type, link.id);\n                    hintContainer.appendChild(dom);\n                    alternate.appendChild(hintContainer);\n                    if (linksContainer.classList.contains('rml-deeplink__hint')) {\n                        linksContainer.classList.remove('rml-deeplink__hint');\n                    }\n                    else {\n                        linksContainer.classList.add('rml-deeplink__hint');\n                    }\n                    var hint = dom.querySelector('.rml-deeplink--hint');\n                    _this.domBuilderService.addShortlink(dom, link.roomleType, link.type, link.id);\n                    hint.classList.add('rml-hint__show');\n                    var newlinkDom = alternate.querySelector('.rml-deeplink--row');\n                    newlinkDom.addEventListener('click', function (e) {\n                        e.preventDefault();\n                        var input = dom.querySelector('input');\n                        input.select();\n                        return false;\n                    });\n                    if (typeof SettingsService_1.SettingsService.settings.callback.clickedHint === 'function') {\n                        SettingsService_1.SettingsService.settings.callback.clickedHint(link.id, link.roomleType, link.type);\n                    }\n                }\n            });\n            if (!linkDom) {\n                return;\n            }\n            slide.appendChild(linkDom);\n        });\n        linksContainer.appendChild(slide);\n        linksContainer.appendChild(alternate);\n        container[0].appendChild(linksContainer);\n    };\n    PopupController.prototype.freezeScrolling = function () {\n        var html = document.querySelector('html');\n        var body = document.body;\n        if (html.style.position !== 'fixed') {\n            var top_1 = html.scrollTop ? html.scrollTop : body.scrollTop;\n            if (window.innerWidth > html.offsetWidth) {\n                html.style.overflowY = 'scroll';\n            }\n            html.style.width = '100%';\n            html.style.height = '100%';\n            html.style.position = 'fixed';\n            html.style.top = (-top_1) + 'px';\n        }\n    };\n    PopupController.prototype.unfreezeScrolling = function () {\n        var html = document.querySelector('html');\n        var body = document.body;\n        if (html.style.position === 'fixed') {\n            html.style.position = 'static';\n            var scrollTopValue = -parseInt(html.style.top, 10);\n            html.scrollTop = scrollTopValue;\n            body.scrollTop = scrollTopValue;\n            html.style.position = '';\n            html.style.width = '';\n            html.style.height = '';\n            html.style.top = '';\n            html.style.overflowY = '';\n        }\n    };\n    PopupController.selector = '[data-rml-deeplink-popup-container]';\n    return PopupController;\n}(Controller_1.Controller));\nexports.PopupController = PopupController;\n\n},{\"../lib/Controller\":9,\"../services/DomBuilderService\":14,\"../services/EventHandlerService\":15,\"../services/ImagesService\":17,\"../services/SettingsService\":23}],8:[function(require,module,exports){\n\"use strict\";\nvar __extends = (this && this.__extends) || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\nvar Controller_1 = require('../lib/Controller');\nvar DomBuilderService_1 = require('../services/DomBuilderService');\nvar RoomleTypeService_1 = require('../services/RoomleTypeService');\nvar SettingsService_1 = require('../services/SettingsService');\nvar RoomleController = (function (_super) {\n    __extends(RoomleController, _super);\n    function RoomleController(element) {\n        _super.call(this, element);\n        this.id = null;\n        this.type = null;\n        this.domBuilder = DomBuilderService_1.DomBuilderService.inject();\n        if (element) {\n            var idSelector = SettingsService_1.SettingsService.settings.dataSelector.id;\n            var typeSelector = SettingsService_1.SettingsService.settings.dataSelector.type;\n            this.id = element.getAttribute(idSelector);\n            this.type = RoomleTypeService_1.RoomleTypeService.convertTypeToEnum(element.getAttribute(typeSelector));\n            if (this.type !== null && this.id) {\n                this.addButtons(this.type);\n            }\n        }\n    }\n    RoomleController.prototype.addButtons = function (type) {\n        if (SettingsService_1.SettingsService.settings.createNoButtons) {\n            return;\n        }\n        var item = this.$();\n        if (!item) {\n            return;\n        }\n        var buttons = this.domBuilder.getButtons(type);\n        item.appendChild(buttons);\n    };\n    return RoomleController;\n}(Controller_1.Controller));\nexports.RoomleController = RoomleController;\n\n},{\"../lib/Controller\":9,\"../services/DomBuilderService\":14,\"../services/RoomleTypeService\":22,\"../services/SettingsService\":23}],9:[function(require,module,exports){\n\"use strict\";\n/**\n * Generic controller class to entcapsulate the parsing\n * and other generic stuff\n *\n * @export\n * @class Controller\n */\nvar Controller = (function () {\n    /**\n     * Creates an instance of a Controller.\n     *\n     * @param {Element} root The element where the controller has been applied\n     */\n    function Controller(element) {\n        this._element = element;\n    }\n    Controller.prototype.$ = function (selector) {\n        if (!(this._element instanceof Element)) {\n            throw new Error('This controller has no element!');\n        }\n        return selector ? this._element.querySelectorAll(selector) : this._element;\n    };\n    Controller.prototype.getControllersByClass = function (controllerClass) {\n        var instances = Controller._instances;\n        var result = [];\n        for (var i = 0, max = instances.length; i < max; i++) {\n            var instance = instances[i];\n            if (instance instanceof controllerClass) {\n                result.push(instance);\n            }\n        }\n        return result;\n    };\n    /**\n     * Hook for running code before the controller is instantiated\n     *\n     * @static\n     * @param {NodeListOf<Element>} elements List of elements where the controller will be applied\n     */\n    Controller.beforeInstantiating = function (elements) {\n    };\n    /**\n     * Hook for running code after the controller has been instantiated.\n     *\n     * @static\n     * @param {NodeListOf<Element>} elements List of elements where the controller has been applied\n     * @param {Array<Controller>} instances List of controller instances created\n     */\n    Controller.afterInstantiating = function (elements, instances) {\n    };\n    /**\n     * Look for elements with a specific selector and creates an instance for\n     * every element.\n     *\n     * @static\n     * @param {string} selector Dom selector\n     * @param {Element} [root=document.body] Starting element for parsing\n     */\n    Controller.parse = function (selector, root) {\n        if (root === void 0) { root = document.body; }\n        if (typeof this.selector === 'string' && this.selector.length) {\n            selector = this.selector;\n        }\n        else if (!selector) {\n            return;\n        }\n        var elements = root.querySelectorAll(selector);\n        this.beforeInstantiating(elements);\n        for (var i = 0; i < elements.length; i++) {\n            var element = elements[i];\n            var className = /^function\\s+([\\w\\$]+)\\s*\\(/.exec(this.toString())[1];\n            className = className.toLocaleLowerCase();\n            if (element.getAttribute(Controller.PARSE_ID_ATTRIBUTE + '-' + className)) {\n                continue;\n            }\n            element.setAttribute(Controller.PARSE_ID_ATTRIBUTE + '-' + className, Math.floor(Math.random() * 10 + 1) * Date.now() + '');\n            Controller._instances.push(new this(element));\n        }\n        this.afterInstantiating(elements, Controller._instances);\n    };\n    /**\n     * Instances of the Controller\n     *\n     * @static\n     * @type {Array<Controller>}\n     */\n    Controller._instances = [];\n    /**\n     * HTML attribute to mark elements which are already parsed\n     *\n     * @static\n     */\n    Controller.PARSE_ID_ATTRIBUTE = 'data-parse-id';\n    return Controller;\n}());\nexports.Controller = Controller;\n\n},{}],10:[function(require,module,exports){\n\"use strict\";\n/**\n * Simple Singelton Service implementation\n * which will be extended by the other Services like\n * - DataSerivce\n * - TemplateService\n * - ...\n *\n * @export\n * @class Service\n */\nvar Service = (function () {\n    function Service() {\n    }\n    /**\n     * Returns the current instance or creates a new\n     * one if there isn't already an instance available.\n     *\n     * @static\n     * @returns {Service} Instance of the current Service\n     */\n    Service.getInstance = function () {\n        if (!(this._instance instanceof Service)) {\n            this._instance = new this();\n        }\n        return this._instance;\n    };\n    /**\n     * Naming Wrapper for the getInstance() function\n     * because inject sounds cooler.\n     *\n     * @static\n     * @returns {Service} Instance of the current Service\n     */\n    Service.inject = function () {\n        return this.getInstance();\n    };\n    return Service;\n}());\nexports.Service = Service;\n\n},{}],11:[function(require,module,exports){\n\"use strict\";\nvar MobileDetectService_1 = require('./services/MobileDetectService');\nvar RoomleButton_1 = require('./RoomleButton');\nvar mobileDetect = MobileDetectService_1.MobileDetectService.inject();\nmobileDetect.isIOS();\nRoomleButton_1.RoomleButton.getInstance(window.RoomleButtonSettings);\n\n},{\"./RoomleButton\":3,\"./services/MobileDetectService\":18}],12:[function(require,module,exports){\n\"use strict\";\nvar __extends = (this && this.__extends) || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\nvar Service_1 = require('../lib/Service');\nvar EnumEx_1 = require('../utils/EnumEx');\n(function (BUTTON_TYPE) {\n    BUTTON_TYPE[BUTTON_TYPE[\"TRIGGER\"] = 0] = \"TRIGGER\";\n    BUTTON_TYPE[BUTTON_TYPE[\"ADD\"] = 1] = \"ADD\";\n    BUTTON_TYPE[BUTTON_TYPE[\"VISUALIZE\"] = 2] = \"VISUALIZE\";\n    BUTTON_TYPE[BUTTON_TYPE[\"CONFIGURE\"] = 3] = \"CONFIGURE\";\n    BUTTON_TYPE[BUTTON_TYPE[\"AR\"] = 4] = \"AR\";\n    BUTTON_TYPE[BUTTON_TYPE[\"MARK\"] = 5] = \"MARK\";\n    BUTTON_TYPE[BUTTON_TYPE[\"START_NOW\"] = 6] = \"START_NOW\";\n    BUTTON_TYPE[BUTTON_TYPE[\"VR\"] = 7] = \"VR\";\n})(exports.BUTTON_TYPE || (exports.BUTTON_TYPE = {}));\nvar BUTTON_TYPE = exports.BUTTON_TYPE;\nvar ButtonsService = (function (_super) {\n    __extends(ButtonsService, _super);\n    function ButtonsService() {\n        _super.call(this);\n        this.availableButtons = EnumEx_1.EnumEx.getValues(BUTTON_TYPE);\n    }\n    ButtonsService.convertButtonTypeToEnum = function (buttonType) {\n        if (buttonType === 'trigger') {\n            return BUTTON_TYPE.TRIGGER;\n        }\n        if (buttonType === 'add') {\n            return BUTTON_TYPE.ADD;\n        }\n        if (buttonType === 'ar') {\n            return BUTTON_TYPE.AR;\n        }\n        if (buttonType === 'configure') {\n            return BUTTON_TYPE.CONFIGURE;\n        }\n        if (buttonType === 'mark') {\n            return BUTTON_TYPE.MARK;\n        }\n        if (buttonType === 'visualize') {\n            return BUTTON_TYPE.VISUALIZE;\n        }\n        if (buttonType === 'vr') {\n            return BUTTON_TYPE.VR;\n        }\n        if (buttonType === 'start_now') {\n            return BUTTON_TYPE.START_NOW;\n        }\n    };\n    // USED TO DEFINE HOOKS FOR OUTSIDE TS WORLD. AR IS NICER THAN \"0\"\n    ButtonsService.convertButtonType = function (buttonType) {\n        if (buttonType === BUTTON_TYPE.TRIGGER) {\n            return 'trigger';\n        }\n        if (buttonType === BUTTON_TYPE.ADD) {\n            return 'add';\n        }\n        if (buttonType === BUTTON_TYPE.AR) {\n            return 'ar';\n        }\n        if (buttonType === BUTTON_TYPE.CONFIGURE) {\n            return 'configure';\n        }\n        if (buttonType === BUTTON_TYPE.MARK) {\n            return 'mark';\n        }\n        if (buttonType === BUTTON_TYPE.VISUALIZE) {\n            return 'visualize';\n        }\n        if (buttonType === BUTTON_TYPE.VR) {\n            return 'vr';\n        }\n        if (buttonType === BUTTON_TYPE.START_NOW) {\n            return 'start_now';\n        }\n    };\n    return ButtonsService;\n}(Service_1.Service));\nexports.ButtonsService = ButtonsService;\n\n},{\"../lib/Service\":10,\"../utils/EnumEx\":24}],13:[function(require,module,exports){\n\"use strict\";\nvar __extends = (this && this.__extends) || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\nvar Service_1 = require('../lib/Service');\nvar ConsoleService = (function (_super) {\n    __extends(ConsoleService, _super);\n    function ConsoleService() {\n        _super.apply(this, arguments);\n    }\n    ConsoleService.log = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i - 0] = arguments[_i];\n        }\n        console.log.apply(console, args);\n    };\n    ConsoleService.warn = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i - 0] = arguments[_i];\n        }\n        console.warn.apply(console, args);\n    };\n    ConsoleService.error = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i - 0] = arguments[_i];\n        }\n        console.error.apply(console, args);\n    };\n    return ConsoleService;\n}(Service_1.Service));\nexports.ConsoleService = ConsoleService;\n\n},{\"../lib/Service\":10}],14:[function(require,module,exports){\n\"use strict\";\nvar __extends = (this && this.__extends) || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\nvar Service_1 = require('../lib/Service');\nvar MobileDetectService_1 = require('./MobileDetectService');\nvar SettingsService_1 = require('./SettingsService');\nvar ButtonsService_1 = require('./ButtonsService');\nvar RoomleTypeService_1 = require('./RoomleTypeService');\nvar IconsService_1 = require('./IconsService');\nvar ConsoleService_1 = require('./ConsoleService');\nvar MobileRedirectService_1 = require('./MobileRedirectService');\nvar PopupController_1 = require('../controllers/PopupController');\nvar RequestService_1 = require('../services/RequestService');\nvar Environment_1 = require('../config/Environment');\nvar DomBuilderService = (function (_super) {\n    __extends(DomBuilderService, _super);\n    function DomBuilderService() {\n        _super.apply(this, arguments);\n        this.mobileDetect = MobileDetectService_1.MobileDetectService.inject();\n        this.buttonsService = ButtonsService_1.ButtonsService.inject();\n        this.iconsService = IconsService_1.IconsService.inject();\n        this.mobileRedirectService = MobileRedirectService_1.MobileRedirectService.inject();\n        this.requestService = RequestService_1.RequestService.inject();\n        this.elementCache = {};\n        this.buttonsCache = {};\n        this.shortLinkCache = {};\n        this.waitingForShortLink = false;\n    }\n    DomBuilderService.prototype.createCSS = function (css) {\n        var string = '';\n        for (var property in css) {\n            if (css.hasOwnProperty(property)) {\n                string += property + ':' + css[property] + ';';\n            }\n        }\n        return string;\n    };\n    DomBuilderService.prototype.addCSS = function () {\n        if (SettingsService_1.SettingsService.settings.createNoButtons) {\n            return;\n        }\n        var buttonsCSS = this.createCSS(SettingsService_1.SettingsService.settings.css.buttons);\n        buttonsCSS = '.' + SettingsService_1.SettingsService.settings.html.containerClass + '{' + buttonsCSS + 'visibility: hidden;}';\n        var itemCSS = this.createCSS(SettingsService_1.SettingsService.settings.css.item);\n        itemCSS = SettingsService_1.SettingsService.settings.selector + '{' + itemCSS + '}';\n        var inlineCss = '.rml-md-modal{visibility:hidden;}';\n        var css = buttonsCSS + itemCSS + inlineCss;\n        var head = document.head || document.getElementsByTagName('head')[0];\n        var style = document.createElement('style');\n        style.type = 'text/css';\n        style.appendChild(document.createTextNode(css));\n        head.appendChild(style);\n    };\n    DomBuilderService.prototype.build = function (cacheKey, content) {\n        if (!this.elementCache[cacheKey]) {\n            var fragment = document.createDocumentFragment();\n            var li = document.createElement(SettingsService_1.SettingsService.settings.html.buttonElement);\n            var buttonType = ButtonsService_1.ButtonsService.convertButtonType(cacheKey);\n            li.setAttribute(SettingsService_1.SettingsService.settings.dataSelector.action, buttonType);\n            fragment.appendChild(li);\n            this.elementCache[cacheKey] = fragment;\n        }\n        return this.elementCache[cacheKey].cloneNode(true);\n    };\n    DomBuilderService.prototype.buildTrigger = function () {\n        var cacheKey = ButtonsService_1.BUTTON_TYPE.TRIGGER;\n        var buttonTypeStr = ButtonsService_1.ButtonsService.convertButtonType(cacheKey);\n        if (!this.elementCache[cacheKey]) {\n            var fragment = document.createDocumentFragment();\n            var li = document.createElement(SettingsService_1.SettingsService.settings.html.buttonElement);\n            li.setAttribute(SettingsService_1.SettingsService.settings.dataSelector.action, buttonTypeStr);\n            var icon = this.iconsService.create(buttonTypeStr);\n            //let contentNode = document.createTextNode(content);\n            //li.appendChild(contentNode);\n            li.appendChild(icon);\n            fragment.appendChild(li);\n            this.elementCache[cacheKey] = fragment;\n        }\n        return this.elementCache[cacheKey].cloneNode(true);\n    };\n    DomBuilderService.prototype.buildPopUpDom = function () {\n        var popUp = document.body.querySelectorAll('[data-rml-deeplink-popup-container]');\n        if (popUp && popUp.length > 0) {\n            return popUp[0];\n        }\n        var container = document.createElement('div');\n        container.setAttribute('data-rml-deeplink-popup-container', '');\n        container.classList.add('rml-btn');\n        var modal = document.createElement('div');\n        modal.classList.add('rml-md-modal');\n        modal.classList.add('rml-popup');\n        modal.classList.add('rml-md-effect-1');\n        modal.setAttribute('data-rml-deeplink-popup', '');\n        var content = document.createElement('div');\n        content.classList.add('rml-md-content');\n        var closer = document.createElement('div');\n        closer.classList.add('rml-popup--close');\n        var back = document.createElement('div');\n        back.classList.add('rml-popup--back');\n        var links = document.createElement('div');\n        links.classList.add('rml-generated-content');\n        var overlay = document.createElement('div');\n        overlay.classList.add('rml-md-overlay');\n        content.appendChild(closer);\n        content.appendChild(back);\n        content.appendChild(links);\n        modal.appendChild(content);\n        container.appendChild(modal);\n        container.appendChild(overlay);\n        return container;\n    };\n    DomBuilderService.prototype.buildCustomPopUp = function (content, parent) {\n        if (parent === void 0) { parent = document.body; }\n        var container = this.buildPopUpDom();\n        var contentDiv = container.querySelectorAll('.rml-md-content')[0];\n        var oldContent = contentDiv.querySelector('.rml-generated-content');\n        oldContent.innerHTML = '';\n        if (content) {\n            oldContent.appendChild(content);\n        }\n        var popUp = document.body.querySelectorAll('[data-rml-deeplink-popup-container]');\n        if (!popUp || popUp.length === 0) {\n            parent.appendChild(container);\n            var instanceSelector = SettingsService_1.SettingsService.settings.selector;\n            var element = document.body;\n            PopupController_1.PopupController.parse(instanceSelector, element);\n        }\n    };\n    DomBuilderService.prototype.buildPopUp = function (parent) {\n        if (parent === void 0) { parent = document.body; }\n        var container = this.buildPopUpDom();\n        parent.appendChild(container);\n    };\n    DomBuilderService.prototype.buildAddToPlan = function () {\n        return this.build(ButtonsService_1.BUTTON_TYPE.ADD, 'Plan');\n    };\n    DomBuilderService.prototype.buildVisualize = function () {\n        return this.build(ButtonsService_1.BUTTON_TYPE.VISUALIZE, 'Visualize');\n    };\n    DomBuilderService.prototype.buildConfigure = function () {\n        return this.build(ButtonsService_1.BUTTON_TYPE.CONFIGURE, 'Configure');\n    };\n    DomBuilderService.prototype.buildAR = function () {\n        return this.build(ButtonsService_1.BUTTON_TYPE.AR, 'Augmented Reality');\n    };\n    DomBuilderService.prototype.buildMark = function () {\n        return this.build(ButtonsService_1.BUTTON_TYPE.MARK, 'Mark');\n    };\n    DomBuilderService.prototype.buildVR = function () {\n        return this.build(ButtonsService_1.BUTTON_TYPE.VR, 'Virtual Reality');\n    };\n    DomBuilderService.prototype.buildButtons = function (type) {\n        var _this = this;\n        var cacheKey = '';\n        this.buttonsService.availableButtons.forEach(function (buttonType) {\n            if (_this.mobileDetect.generateLink('', type, buttonType)) {\n                cacheKey += buttonType;\n            }\n        });\n        if (!this.buttonsCache[cacheKey]) {\n            var fragment = document.createDocumentFragment();\n            var div = document.createElement(SettingsService_1.SettingsService.settings.html.containerType);\n            div.classList.add(SettingsService_1.SettingsService.settings.html.containerClass);\n            var ul_1 = document.createElement(SettingsService_1.SettingsService.settings.html.buttonsContainer);\n            var oneAdded_1 = false;\n            this.buttonsService.availableButtons.forEach(function (buttonType) {\n                var link = _this.mobileDetect.generateLink('', type, buttonType);\n                if (!link) {\n                    return;\n                }\n                if (SettingsService_1.SettingsService.settings.showOnlyTrigger) {\n                    oneAdded_1 = true;\n                    return;\n                }\n                if (buttonType === ButtonsService_1.BUTTON_TYPE.ADD) {\n                    var add = _this.buildAddToPlan();\n                    ul_1.appendChild(add);\n                    oneAdded_1 = true;\n                    return;\n                }\n                if (buttonType === ButtonsService_1.BUTTON_TYPE.AR) {\n                    var ar = _this.buildAR();\n                    ul_1.appendChild(ar);\n                    oneAdded_1 = true;\n                    return;\n                }\n                if (buttonType === ButtonsService_1.BUTTON_TYPE.CONFIGURE) {\n                    var conf = _this.buildConfigure();\n                    ul_1.appendChild(conf);\n                    oneAdded_1 = true;\n                    return;\n                }\n                if (buttonType === ButtonsService_1.BUTTON_TYPE.MARK) {\n                    var mark = _this.buildMark();\n                    ul_1.appendChild(mark);\n                    oneAdded_1 = true;\n                    return;\n                }\n                if (buttonType === ButtonsService_1.BUTTON_TYPE.VISUALIZE) {\n                    var vis = _this.buildVisualize();\n                    ul_1.appendChild(vis);\n                    oneAdded_1 = true;\n                    return;\n                }\n                if (buttonType === ButtonsService_1.BUTTON_TYPE.VR) {\n                    var vr = _this.buildVR();\n                    ul_1.appendChild(vr);\n                    oneAdded_1 = true;\n                    return;\n                }\n                ConsoleService_1.ConsoleService.error('ButtonType \"' + buttonType + '\" unknown');\n            });\n            if (oneAdded_1) {\n                var trigger = this.buildTrigger();\n                ul_1.insertBefore(trigger, ul_1.firstChild);\n                div.appendChild(ul_1);\n            }\n            fragment.appendChild(div);\n            this.buttonsCache[cacheKey] = fragment;\n        }\n        return this.buttonsCache[cacheKey].cloneNode(true);\n    };\n    DomBuilderService.prototype.getButtons = function (type) {\n        return this.buildButtons(type);\n    };\n    DomBuilderService.prototype.buildDeeplink = function (type, id) {\n        var shortenId = 1;\n        if (type === RoomleTypeService_1.ROOMLE_TYPE.CONFIGURATION) {\n            shortenId = 3;\n        }\n        if (type === RoomleTypeService_1.ROOMLE_TYPE.CONFIGURABLE_ITEM || type === RoomleTypeService_1.ROOMLE_TYPE.ITEM) {\n            shortenId = 4;\n        }\n        var token = 'anonymous';\n        var today = new Date();\n        var apiKey = 'roomle_portal_v2';\n        var tokenEncoded = today.toISOString() + ';' + token + ';' + apiKey;\n        tokenEncoded = '03-' + window.btoa(tokenEncoded);\n        return this.requestService.fetchJSON(Environment_1.Environment.config.rmlco, {\n            method: 'POST',\n            headers: {\n                'apiKey': 'roomle_portal_v2',\n                'currentTenant': 9,\n                'language': 'en',\n                'locale': 'en',\n                'token': tokenEncoded\n            },\n            body: {\n                shortId: {\n                    type: shortenId,\n                    referencedId: id\n                }\n            }\n        });\n    };\n    DomBuilderService.prototype.isAvailableLink = function (linkType) {\n        if (ButtonsService_1.ButtonsService.convertButtonTypeToEnum(linkType) === ButtonsService_1.BUTTON_TYPE.MARK) {\n            return false;\n        }\n        if (ButtonsService_1.ButtonsService.convertButtonTypeToEnum(linkType) === ButtonsService_1.BUTTON_TYPE.START_NOW) {\n            return false;\n        }\n        return true;\n    };\n    DomBuilderService.prototype.createDeeplinkInput = function (container, link) {\n        container.innerHTML = '';\n        var input = document.createElement('input');\n        input.setAttribute('type', 'text');\n        input.setAttribute('value', link);\n        input.setAttribute('readonly', 'readonly');\n        input.addEventListener('click', function (e) {\n            e.stopImmediatePropagation();\n            e.preventDefault();\n            input.select();\n        });\n        container.appendChild(input);\n        return input;\n    };\n    DomBuilderService.prototype.createCopySvg = function (container, input) {\n        if (typeof document.execCommand !== 'function') {\n            return;\n        }\n        var copySvg = this.iconsService.createCopy();\n        copySvg.classList.add('rml-clickable');\n        copySvg.classList.add('rml-fake-link');\n        copySvg.classList.add('rml-icons__copy');\n        copySvg.addEventListener('click', function () {\n            input.select();\n            try {\n                document.execCommand('copy');\n            }\n            catch (e) {\n            }\n        });\n        container.appendChild(copySvg);\n    };\n    DomBuilderService.prototype.addShortlink = function (element, type, buttonType, id) {\n        var _this = this;\n        var h3 = element.querySelector('.rml-deeplink--link');\n        var needsAppend = false;\n        if (!h3) {\n            h3 = document.createElement('span');\n            needsAppend = true;\n        }\n        h3.classList.add('rml-deeplink--link');\n        h3.classList.add('rml-deeplink--heading');\n        h3.classList.add('text--red');\n        if (needsAppend) {\n            element.appendChild(h3);\n        }\n        var cacheKey = type + ':' + id;\n        var cachedLink = this.shortLinkCache[cacheKey];\n        if (cachedLink) {\n            var inputCached = this.createDeeplinkInput(h3, cachedLink);\n            this.createCopySvg(h3, inputCached);\n        }\n        else {\n            if (this.waitingForShortLink) {\n                return;\n            }\n            this.waitingForShortLink = true;\n            var spinner_1 = document.createElement('span');\n            spinner_1.classList.add('rml-spinner');\n            spinner_1.classList.add('rml-spinner--white');\n            h3.appendChild(spinner_1);\n            this.buildDeeplink(type, id).then(function (shortLink) {\n                var link = Environment_1.Environment.config.shortlink(RoomleTypeService_1.RoomleTypeService.convertRoomleType(type), id, buttonType, shortLink.shortId.shortId);\n                var input = _this.createDeeplinkInput(h3, link);\n                _this.createCopySvg(h3, input);\n                _this.shortLinkCache[cacheKey] = link;\n                _this.waitingForShortLink = false;\n            }, function () {\n                _this.waitingForShortLink = false;\n                h3.removeChild(spinner_1);\n                h3.textContent = SettingsService_1.SettingsService.settings.translations.errors.deeplinkcreate;\n            });\n        }\n    };\n    DomBuilderService.prototype.buildLink = function (link, options) {\n        var _this = this;\n        if (options === void 0) { options = {}; }\n        var _a = options.isHighlighted, isHighlighted = _a === void 0 ? false : _a, _b = options.buildAnyway, buildAnyway = _b === void 0 ? false : _b, _c = options.slideMode, slideMode = _c === void 0 ? false : _c, _d = options.clickedHint, clickedHint = _d === void 0 ? function () {\n        } : _d;\n        if (!this.isAvailableLink(link.type) && !buildAnyway) {\n            return;\n        }\n        var container = document.createElement('a');\n        container.classList.add('rml-deeplink--row');\n        container.setAttribute('target', '_blank');\n        container.setAttribute('href', link.link);\n        var text = document.createElement('span');\n        text.classList.add('rml-deeplink--text');\n        text.classList.add('rml-deeplink--heading');\n        text.textContent = SettingsService_1.SettingsService.settings.translations[link.type].heading;\n        var icon = document.createElement('span');\n        icon.classList.add('rml-deeplink--icon');\n        var svgIcon = this.iconsService.create(link.type);\n        icon.appendChild(svgIcon); //= 'i';//SettingsService.settings.translations[link.type].icon;\n        container.appendChild(text);\n        container.appendChild(icon);\n        var callback = SettingsService_1.SettingsService.settings.callback.button[link.type];\n        if (callback) {\n            container.addEventListener('click', function () {\n                callback(link.id, RoomleTypeService_1.RoomleTypeService.convertRoomleType(link.roomleType), link.type);\n            });\n        }\n        if (link.alternate) {\n            var alternate_1 = document.createElement('span');\n            alternate_1.classList.add('rml-deeplink--hint');\n            alternate_1.textContent = SettingsService_1.SettingsService.settings.translations[link.type].hint[link.alternate];\n            container.appendChild(alternate_1);\n            container.addEventListener('click', function (e) {\n                e.preventDefault();\n                if (slideMode) {\n                    alternate_1.classList.add('rml-hint__slide');\n                }\n                else {\n                    if (alternate_1.classList.contains('rml-hint__show')) {\n                        alternate_1.classList.remove('rml-hint__show');\n                    }\n                    else {\n                        _this.addShortlink(alternate_1, link.roomleType, link.type, link.id);\n                        alternate_1.classList.add('rml-hint__show');\n                    }\n                }\n                clickedHint();\n                return false;\n            });\n            if (isHighlighted) {\n                setTimeout(function () {\n                    alternate_1.classList.add('rml-hint__show');\n                    if (slideMode) {\n                        alternate_1.classList.add('rml-hint__slide');\n                        clickedHint();\n                    }\n                    else {\n                        _this.addShortlink(alternate_1, link.roomleType, link.type, link.id);\n                    }\n                }, 1);\n            }\n        }\n        else {\n            if (link.os !== 'desktop') {\n                this.mobileRedirectService.createDeeplinkFor(container, link.os);\n            }\n        }\n        return container;\n    };\n    return DomBuilderService;\n}(Service_1.Service));\nexports.DomBuilderService = DomBuilderService;\n\n},{\"../config/Environment\":4,\"../controllers/PopupController\":7,\"../lib/Service\":10,\"../services/RequestService\":21,\"./ButtonsService\":12,\"./ConsoleService\":13,\"./IconsService\":16,\"./MobileDetectService\":18,\"./MobileRedirectService\":19,\"./RoomleTypeService\":22,\"./SettingsService\":23}],15:[function(require,module,exports){\n\"use strict\";\nvar __extends = (this && this.__extends) || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\nvar Service_1 = require('../lib/Service');\nvar RoomleTypeService_1 = require('./RoomleTypeService');\nvar ButtonsService_1 = require('./ButtonsService');\nvar SettingsService_1 = require('./SettingsService');\nvar MobileDetectService_1 = require('./MobileDetectService');\n(function (EVENT_TYPES) {\n    EVENT_TYPES[EVENT_TYPES[\"TRIGGER\"] = 0] = \"TRIGGER\";\n    EVENT_TYPES[EVENT_TYPES[\"POP_UP_OPEN\"] = 1] = \"POP_UP_OPEN\";\n    EVENT_TYPES[EVENT_TYPES[\"POP_UP_CLOSE\"] = 2] = \"POP_UP_CLOSE\";\n})(exports.EVENT_TYPES || (exports.EVENT_TYPES = {}));\nvar EVENT_TYPES = exports.EVENT_TYPES;\nvar EventHandlerService = (function (_super) {\n    __extends(EventHandlerService, _super);\n    function EventHandlerService() {\n        _super.apply(this, arguments);\n        this.mobileDetectService = MobileDetectService_1.MobileDetectService.inject();\n        this.triggerCallbacks = [];\n        this.openPopUpCallbacks = [];\n    }\n    EventHandlerService.prototype.subscribe = function (event, callback) {\n        if (event === EVENT_TYPES.TRIGGER) {\n            this.triggerCallbacks.push(callback);\n        }\n        if (event === EVENT_TYPES.POP_UP_OPEN) {\n            this.openPopUpCallbacks.push(callback);\n        }\n    };\n    EventHandlerService.prototype.findSelector = function (element, selector, depth, maxDepth) {\n        if (depth === void 0) { depth = 0; }\n        if (maxDepth === void 0) { maxDepth = 20; }\n        if (maxDepth === depth) {\n            return null;\n        }\n        if (element.matches && element.matches(selector)) {\n            return element;\n        }\n        var parent = element.parentElement || element.parentNode;\n        if (!parent) {\n            return null;\n        }\n        return this.findSelector(parent, selector, depth + 1);\n    };\n    EventHandlerService.prototype.dispatchOpenPopUp = function (e) {\n        this.openPopUpCallbacks.forEach(function (callback) {\n            callback(e);\n        });\n    };\n    // DO NOT USE ENUM FOR TYPE, BECAUSE CALLBACKS ARE ON \"item\" and not \"0\"\n    EventHandlerService.prototype.dispatch = function (e, type, id, buttonType, highlight, newWindow) {\n        if (highlight === void 0) { highlight = null; }\n        if (newWindow === void 0) { newWindow = false; }\n        var clickedButton = ButtonsService_1.ButtonsService.convertButtonType(buttonType);\n        var links = this.mobileDetectService.getLinks(id, RoomleTypeService_1.RoomleTypeService.convertTypeToEnum(type));\n        if (buttonType === ButtonsService_1.BUTTON_TYPE.TRIGGER) {\n            var triggerKey = ButtonsService_1.ButtonsService.convertButtonType(ButtonsService_1.BUTTON_TYPE.TRIGGER);\n            var callbackTrigger = SettingsService_1.SettingsService.settings.callback[triggerKey];\n            if (typeof callbackTrigger === 'function') {\n                callbackTrigger(e, id, type, links, highlight, newWindow);\n            }\n            this.triggerCallbacks.forEach(function (callback) {\n                callback(e, id, type, links, highlight, newWindow);\n            });\n        }\n        var callbackForType = SettingsService_1.SettingsService.settings.callback[type];\n        if (callbackForType && callbackForType[clickedButton] && typeof callbackForType[clickedButton] === 'function') {\n            callbackForType[clickedButton](e, id, type, links, highlight, newWindow);\n        }\n    };\n    EventHandlerService.prototype.getElement = function (parent, selector) {\n        var elements = parent.querySelectorAll('[' + selector + ']');\n        if (!elements || elements.length === 0) {\n            if (parent.hasAttribute(selector)) {\n                return parent;\n            }\n        }\n        return elements[0];\n    };\n    EventHandlerService.prototype.handle = function (e) {\n        var target = (e.target || e.srcElement);\n        var button = this.findSelector(target, '[' + SettingsService_1.SettingsService.settings.dataSelector.action + ']');\n        if (!button) {\n            return;\n        }\n        var buttonType = button.getAttribute(SettingsService_1.SettingsService.settings.dataSelector.action);\n        if (buttonType) {\n            var roomleElement = this.findSelector(target, SettingsService_1.SettingsService.settings.selector);\n            if (!roomleElement) {\n                return;\n            }\n            var typeElement = this.getElement(roomleElement, SettingsService_1.SettingsService.settings.dataSelector.type);\n            var type = null;\n            var id = null;\n            if (typeElement) {\n                type = typeElement.getAttribute(SettingsService_1.SettingsService.settings.dataSelector.type);\n            }\n            var idElement = this.getElement(roomleElement, SettingsService_1.SettingsService.settings.dataSelector.id);\n            if (idElement) {\n                id = idElement.getAttribute(SettingsService_1.SettingsService.settings.dataSelector.id);\n            }\n            this.dispatch(e, type, id, ButtonsService_1.ButtonsService.convertButtonTypeToEnum(buttonType));\n        }\n    };\n    return EventHandlerService;\n}(Service_1.Service));\nexports.EventHandlerService = EventHandlerService;\n\n},{\"../lib/Service\":10,\"./ButtonsService\":12,\"./MobileDetectService\":18,\"./RoomleTypeService\":22,\"./SettingsService\":23}],16:[function(require,module,exports){\n\"use strict\";\nvar __extends = (this && this.__extends) || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\nvar Service_1 = require('../lib/Service');\nvar ButtonsService_1 = require('./ButtonsService');\nvar IconsService = (function (_super) {\n    __extends(IconsService, _super);\n    function IconsService() {\n        _super.apply(this, arguments);\n    }\n    IconsService.prototype.getSvg = function (attributes) {\n        attributes = attributes || {};\n        if (!attributes['width']) {\n            attributes['width'] = '64';\n        }\n        if (!attributes['height']) {\n            attributes['height'] = '64';\n        }\n        //attributes['xmlns'] = IconsService.SVG_NS;\n        var svg = document.createElementNS(IconsService.SVG_NS, 'svg');\n        for (var attribute in attributes) {\n            svg.setAttributeNS(null, attribute, attributes[attribute]);\n        }\n        return svg;\n    };\n    IconsService.prototype.getNode = function (name, attributes) {\n        var element = document.createElementNS(IconsService.SVG_NS, name);\n        for (var attribute in attributes) {\n            element.setAttributeNS(null, attribute, attributes[attribute]);\n        }\n        return element;\n    };\n    IconsService.prototype.buildPlanIcon = function (isPlus) {\n        var svg = this.getSvg({ viewBox: '0 0 50 50' });\n        var firstPath = this.getNode('path', {\n            d: 'M39.72,23.16,31,17.93h0l-.36-.22-5.13-3.07h0l-.36-.22a.33.33,0,0,0-.35,0l-.36.22h0l-13.87,8.3h0l-.36.22a.53.53,0,0,0,0,.85l.36.22h0l5.13,3.07h0l.36.22h0l8.38,5h0l.24.14.12.07a.33.33,0,0,0,.35,0L39.72,24a.53.53,0,0,0,0-.85Zm-5.09,2.4-3.34-2a.33.33,0,0,0-.35,0l-.36.22a.53.53,0,0,0,0,.85l2.8,1.68-8.43,5-7.49-4.48,2.89-1.73a.53.53,0,0,0,0-.85l-.18-.11h0l-.91-.54a.33.33,0,0,0-.35,0l-.36.22a.53.53,0,0,0,0,.85h0l-2.36,1.41L12,23.58l2.36-1.41,2.45,1.47a.34.34,0,0,0,.17,0,.34.34,0,0,0,.17,0l.36-.22a.53.53,0,0,0,0-.85l-1.91-1.14L25,15.82l4.24,2.54-7.85,4.7a.53.53,0,0,0,0,.85l.36.22a.33.33,0,0,0,.35,0l3.84-2.3,1.83,1.1a.34.34,0,0,0,.17,0,.34.34,0,0,0,.17,0l.36-.22a.53.53,0,0,0,0-.85l-1.3-.77,3.3-2,7.49,4.48Z',\n        });\n        /*let secondPath = this.getNode('path', {\n         d: 'M48,21.46L34.61,14.87h0l-0.55-.27-7.83-3.87h0l-0.55-.27a0.6,0.6,0,0,0-.53,0l-0.55.27h0L3.42,21.19h0l-0.55.27a0.6,0.6,0,0,0,0,1.08l0.55,0.27h0l7.83,3.87h0l0.55,0.27h0l12.8,6.32h0L25,33.45l0.18,0.09a0.61,0.61,0,0,0,.53,0L48,22.54A0.6,0.6,0,0,0,48,21.46Zm-7.77,3L35.09,22a0.6,0.6,0,0,0-.53,0L34,22.24a0.6,0.6,0,0,0,0,1.08l4.28,2.11L25.41,31.79,14,26.14,18.39,24a0.6,0.6,0,0,0,0-1.08l-0.28-.14h0l-1.39-.69a0.6,0.6,0,0,0-.53,0l-0.55.27a0.6,0.6,0,0,0,0,1.08h0l-3.6,1.78L5.59,22l3.6-1.78,3.74,1.85a0.61,0.61,0,0,0,.27.06,0.6,0.6,0,0,0,.27-0.06L14,21.8a0.6,0.6,0,0,0,0-1.08l-2.92-1.44,14.32-7.07,6.48,3.2-12,5.92a0.6,0.6,0,0,0,0,1.08l0.55,0.27a0.6,0.6,0,0,0,.53,0l5.86-2.89,2.8,1.38a0.61,0.61,0,0,0,.27.06,0.6,0.6,0,0,0,.27-0.06l0.55-.27a0.6,0.6,0,0,0,0-1.08l-2-1,5-2.49L45.24,22Z',\n         transform: 'translate(-2.53 -10.4)'\n         });*/\n        svg.appendChild(firstPath);\n        //svg.appendChild(secondPath);\n        if (isPlus) {\n            var thirdPath = this.getNode('path', {\n                d: 'M37.29,33.15v2.48h-1.4V33.15H33.42v-1.4h2.47V29.29h1.4v2.46h2.47v1.4Z',\n            });\n            svg.appendChild(thirdPath);\n        }\n        return svg;\n    };\n    IconsService.prototype.buildAdd = function () {\n        return this.buildPlanIcon(true);\n    };\n    IconsService.prototype.buildPlanNow = function () {\n        return this.buildPlanIcon(false);\n    };\n    IconsService.prototype.buildAr = function () {\n        var svg = this.getSvg({ viewBox: '0 0 50 50' });\n        var firstPath = this.getNode('path', {\n            d: 'M24.41,33.24h0c-5.22-.08-9.5-2.78-14.31-9a.75.75,0,0,1-.16-.46c0-.63,4.46-6.73,10.67-8.84,8.34-2.84,15,3,19.19,8.38a.75.75,0,0,1,.16.46c0,.45-.63,1.34-1.87,2.63a.75.75,0,0,1-1.09-1,13.24,13.24,0,0,0,1.3-1.52c-4.4-5.57-9-8.3-13.69-8.15-6.69.23-11.71,6.36-13,8.06,5.49,7,9.55,8,12.8,8a.75.75,0,0,1,0,1.5Z',\n        });\n        var secondPath = this.getNode('path', {\n            d: 'M24.94,29.4a5.42,5.42,0,0,1-5.05-3.5,5.58,5.58,0,0,1,1.56-6.51,5.3,5.3,0,0,1,6.44-.3,5.66,5.66,0,0,1,2.34,6.39A.75.75,0,1,1,28.79,25a4.18,4.18,0,0,0-1.74-4.7,3.79,3.79,0,0,0-4.65.21,4.12,4.12,0,0,0-1.12,4.79,3.9,3.9,0,0,0,4,2.55.74.74,0,0,1,.81.69.75.75,0,0,1-.69.81Z',\n        });\n        var graph = this.getNode('g');\n        var thirdPath = this.getNode('path', {\n            d: 'M30.5,35.1,30,33.68H27.18L26.7,35.1H25.06l2.92-8h1.23l2.93,8Zm-1.87-5.65-1,2.92h2Z',\n        });\n        var fourthPath = this.getNode('path', {\n            d: 'M37.39,35.1l-1.57-3.2H34.69v3.2H33.13v-8h3.14a2.42,2.42,0,0,1,2.6,2.46,2.16,2.16,0,0,1-1.46,2.11L39.2,35.1Zm-1.22-6.62H34.69v2.12h1.48a1.06,1.06,0,1,0,0-2.12Z',\n        });\n        graph.appendChild(thirdPath);\n        graph.appendChild(fourthPath);\n        svg.appendChild(firstPath);\n        svg.appendChild(secondPath);\n        svg.appendChild(graph);\n        return svg;\n    };\n    IconsService.prototype.buildConfigure = function () {\n        var svg = this.getSvg({ viewBox: '0 0 50 50' });\n        var path = this.getNode('path', {\n            d: 'M34.67,10.9,28.9,8.22a1.87,1.87,0,0,0-2.48.91L16,31.42a1.86,1.86,0,0,0-.17.75L15.66,40a1.85,1.85,0,0,0,.53,1.34,1.9,1.9,0,0,0,1.35.57,1.86,1.86,0,0,0,1.23-.47l5.93-5.22a1.86,1.86,0,0,0,.46-.62L35.58,13.37A1.88,1.88,0,0,0,34.67,10.9ZM17.47,40.22l.14-7,4.91,2.55ZM32,16.94l-5.88-2.73,1.94-4.38L34,12.57Z',\n        });\n        svg.appendChild(path);\n        return svg;\n    };\n    IconsService.prototype.buildMark = function () {\n        var svg = this.getSvg({ viewBox: '0 0 50 50' });\n        var path = this.getNode('path', {\n            d: 'M32.16,12.05A7.89,7.89,0,0,0,25,16.51,7.93,7.93,0,0,0,10,20C10,29.35,25,39.64,25,39.64s15-10.37,15-19.66A7.91,7.91,0,0,0,32.16,12.05Z',\n        });\n        svg.appendChild(path);\n        return svg;\n    };\n    IconsService.prototype.buildCopy = function () {\n        var svg = this.getSvg({ viewBox: '0 0 32 32' });\n        var firstPath = this.getNode('path', {\n            d: 'M28.681 11.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-11.5c-1.379 0-2.5 1.122-2.5 2.5v23c0 1.378 1.121 2.5 2.5 2.5h19c1.378 0 2.5-1.122 2.5-2.5v-15.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 9.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268v0zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-19c-0.271 0-0.5-0.229-0.5-0.5v-23c0-0.271 0.229-0.5 0.5-0.5 0 0 11.499-0 11.5 0v7c0 0.552 0.448 1 1 1h7v15.5z',\n        });\n        var secondPath = this.getNode('path', {\n            d: 'M18.841 1.319c-1.612-1.182-2.393-1.319-2.841-1.319h-11.5c-1.378 0-2.5 1.121-2.5 2.5v23c0 1.207 0.86 2.217 2 2.45v-25.45c0-0.271 0.229-0.5 0.5-0.5h15.215c-0.301-0.248-0.595-0.477-0.873-0.681z',\n        });\n        svg.appendChild(firstPath);\n        svg.appendChild(secondPath);\n        return svg;\n    };\n    IconsService.prototype.buildTrigger = function () {\n        var svg = this.getSvg({ viewBox: '0 0 32.19 29.5' });\n        var path1 = this.getNode('path', {\n            d: 'M21,22.36c-1.57,0-1.87,1.36-1.87,3s0.17,3,1.87,3,1.87-1.36,1.87-3S22.59,22.36,21,22.36Z',\n            transform: 'translate(-9 -15.26)'\n        });\n        var path2 = this.getNode('path', {\n            d: 'M31.1,22.36c-1.57,0-1.87,1.36-1.87,3s0.17,3,1.87,3S33,27,33,25.36,32.66,22.36,31.1,22.36Z',\n            transform: 'translate(-9 -15.26)'\n        });\n        var path3 = this.getNode('path', {\n            d: 'M26,15.26c-5.86,0-17,.73-17,3.48V31.89a1.16,1.16,0,0,0,.17.49c1,2.06,9.46,3,16.85,3,5.86,0,17-.73,17-3.48V18.74C43,16,31.86,15.26,26,15.26ZM21,30.11c-3.46,0-4.69-2.14-4.69-4.79S17.6,20.53,21,20.53s4.69,2.14,4.69,4.79S24.47,30.11,21,30.11Zm10.08,0c-3.46,0-4.69-2.14-4.69-4.79s1.28-4.79,4.69-4.79,4.69,2.14,4.69,4.79S34.55,30.11,31.1,30.11Z',\n            transform: 'translate(-9 -15.26)'\n        });\n        var path4 = this.getNode('path', {\n            d: 'M31.1,28.36c-1.7,0-1.87-1.36-1.87-3s0.3-3,1.87-3,1.87,1.36,1.87,3S32.8,28.36,31.1,28.36Z',\n            transform: 'translate(-9 -15.26)'\n        });\n        var path5 = this.getNode('path', {\n            d: 'M21,28.36c-1.7,0-1.87-1.36-1.87-3s0.3-3,1.87-3,1.87,1.36,1.87,3S22.72,28.36,21,28.36Z',\n            transform: 'translate(-9 -15.26)'\n        });\n        svg.appendChild(path1);\n        svg.appendChild(path2);\n        svg.appendChild(path3);\n        svg.appendChild(path4);\n        svg.appendChild(path5);\n        return svg;\n    };\n    IconsService.prototype.buildVisualize = function () {\n        var svg = this.getSvg({ viewBox: '0 0 50 50' });\n        var path = this.getNode('path', {\n            d: 'M25,34.59c-6.32,0-11.44-4.71-14.84-9.13a.75.75,0,0,1,0-.87c.24-.36,6-8.87,14.49-9.17C29.9,15.23,35,18.3,39.85,24.55A.74.74,0,0,1,40,25c0,.6-4.61,6.78-10.68,8.84A13.47,13.47,0,0,1,25,34.59ZM11.65,25c4.4,5.55,9,8.28,13.68,8.12,6.7-.23,11.74-6.38,13-8.08-4.4-5.55-9-8.28-13.69-8.12C17.93,17.14,12.91,23.28,11.65,25ZM25,30.49A5.49,5.49,0,1,1,30.38,25,5.45,5.45,0,0,1,25,30.49ZM25,21a4,4,0,1,0,3.91,4A4,4,0,0,0,25,21Z',\n        });\n        svg.appendChild(path);\n        return svg;\n    };\n    IconsService.prototype.buildVr = function () {\n        var svg = this.getSvg({ viewBox: '0 0 50 50' });\n        var path = this.getNode('path', {\n            d: 'M37.88,16.24H12.18A2.16,2.16,0,0,0,10,18.4V31.6a2.16,2.16,0,0,0,2.16,2.16H20a1.54,1.54,0,0,0,1.46-.93l1.75-4.38a1.92,1.92,0,0,1,3.5.06l1.52,4.26a1.59,1.59,0,0,0,1.46,1h8.12A2.16,2.16,0,0,0,40,31.6V18.46A2.05,2.05,0,0,0,37.88,16.24ZM18.6,28.8a3.33,3.33,0,0,1-3.33-3.33,3.33,3.33,0,1,1,6.66,0A3.33,3.33,0,0,1,18.6,28.8Zm12.85,0a3.33,3.33,0,0,1-3.33-3.33,3.33,3.33,0,0,1,6.66,0A3.33,3.33,0,0,1,31.45,28.8Z',\n        });\n        svg.appendChild(path);\n        return svg;\n    };\n    IconsService.prototype.create = function (buttonType) {\n        var button = ButtonsService_1.ButtonsService.convertButtonTypeToEnum(buttonType);\n        if (button === ButtonsService_1.BUTTON_TYPE.ADD) {\n            return this.buildAdd();\n        }\n        if (button === ButtonsService_1.BUTTON_TYPE.AR) {\n            return this.buildAr();\n        }\n        if (button === ButtonsService_1.BUTTON_TYPE.CONFIGURE) {\n            return this.buildConfigure();\n        }\n        if (button === ButtonsService_1.BUTTON_TYPE.VISUALIZE) {\n            return this.buildVisualize();\n        }\n        if (button === ButtonsService_1.BUTTON_TYPE.VR) {\n            return this.buildVr();\n        }\n        if (button === ButtonsService_1.BUTTON_TYPE.TRIGGER) {\n            return this.buildTrigger();\n        }\n        if (button === ButtonsService_1.BUTTON_TYPE.MARK) {\n            return this.buildMark();\n        }\n        if (button === ButtonsService_1.BUTTON_TYPE.START_NOW) {\n            return this.buildPlanNow();\n        }\n    };\n    IconsService.prototype.createCopy = function () {\n        return this.buildCopy();\n    };\n    IconsService.SVG_NS = 'http://www.w3.org/2000/svg';\n    return IconsService;\n}(Service_1.Service));\nexports.IconsService = IconsService;\n\n},{\"../lib/Service\":10,\"./ButtonsService\":12}],17:[function(require,module,exports){\n\"use strict\";\nvar __extends = (this && this.__extends) || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\nvar Service_1 = require('../lib/Service');\nvar ImagesService = (function (_super) {\n    __extends(ImagesService, _super);\n    function ImagesService() {\n        _super.apply(this, arguments);\n        this.images = {\n            ios: 'https://a.storyblok.com/f/4e779959c8/ios.png',\n            android: 'https://a.storyblok.com/f/1386db8cd0/android.png',\n            desktop: 'https://a.storyblok.com/f/cf5aa03c64/desktop.png',\n        };\n    }\n    ImagesService.prototype.preloadImages = function () {\n        var ios = new Image();\n        var android = new Image();\n        var desktop = new Image();\n        ios.src = this.images.ios;\n        android.src = this.images.android;\n        desktop.src = this.images.desktop;\n    };\n    return ImagesService;\n}(Service_1.Service));\nexports.ImagesService = ImagesService;\n\n},{\"../lib/Service\":10}],18:[function(require,module,exports){\n\"use strict\";\nvar __extends = (this && this.__extends) || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\nvar Service_1 = require('../lib/Service');\nvar RoomleTypeService_1 = require('./RoomleTypeService');\nvar ButtonsService_1 = require('./ButtonsService');\nvar SettingsService_1 = require('./SettingsService');\nvar MobileDetectService = (function (_super) {\n    __extends(MobileDetectService, _super);\n    function MobileDetectService() {\n        _super.apply(this, arguments);\n        this.isOSCached = null;\n        this.isAndroidCached = null;\n        this.isIPadCached = null;\n        this.isSupportedMobileCached = null;\n        this.buttonsService = ButtonsService_1.ButtonsService.inject();\n    }\n    MobileDetectService.prototype.isIOS = function () {\n        if (this.isOSCached !== null) {\n            return this.isOSCached;\n        }\n        return /iPad|iPhone|iPod/i.test(navigator.userAgent) && !window.MSStream; // USE MSStream because of http://stackoverflow.com/a/9039885\n    };\n    MobileDetectService.prototype.isAndroid = function () {\n        if (this.isAndroidCached !== null) {\n            return this.isAndroidCached;\n        }\n        return /Android/i.test(navigator.userAgent) && !window.MSStream; // USE MSStream because of http://stackoverflow.com/a/9039885\n    };\n    MobileDetectService.prototype.isSupportedMobile = function () {\n        if (this.isSupportedMobileCached !== null) {\n            return this.isSupportedMobileCached;\n        }\n        return this.isIOS() || this.isAndroid();\n    };\n    MobileDetectService.prototype.isIPad = function () {\n        if (this.isIPadCached !== null) {\n            return this.isIPadCached;\n        }\n        return /iPad/i.test(navigator.userAgent) && !window.MSStream; // USE MSStream because of http://stackoverflow.com/a/9039885\n    };\n    MobileDetectService.prototype.handlePlan = function (id, type, buttonType) {\n        var buttonTypeStr = ButtonsService_1.ButtonsService.convertButtonType(buttonType);\n        var typeStr = type;\n        var iosPlanLink = 'roomle://3d/planId/' + id;\n        var desktopLink = SettingsService_1.SettingsService.settings.web.baseUrl + 'editor/' + id;\n        if (buttonType === ButtonsService_1.BUTTON_TYPE.VISUALIZE) {\n            var viewrLink = 'roomleviewer://plan/' + id;\n            if (this.isAndroid()) {\n                return {\n                    type: buttonTypeStr,\n                    alternate: null,\n                    link: viewrLink,\n                    os: 'android',\n                    roomleType: typeStr,\n                    id: id\n                };\n            }\n            if (this.isIOS()) {\n                return {\n                    type: buttonTypeStr,\n                    alternate: null,\n                    link: iosPlanLink,\n                    os: 'ios',\n                    roomleType: typeStr,\n                    id: id\n                };\n            }\n            return {\n                type: buttonTypeStr,\n                alternate: null,\n                link: desktopLink,\n                os: 'desktop',\n                roomleType: typeStr,\n                id: id\n            };\n        }\n        if (buttonType === ButtonsService_1.BUTTON_TYPE.VR) {\n            var viewrLink = 'roomleviewer://vr/' + id;\n            if (this.isAndroid()) {\n                return {\n                    type: buttonTypeStr,\n                    alternate: null,\n                    link: viewrLink,\n                    os: 'android',\n                    roomleType: typeStr,\n                    id: id\n                };\n            }\n            if (this.isIOS()) {\n                return { type: buttonTypeStr, alternate: null, link: viewrLink, os: 'ios', roomleType: typeStr, id: id };\n            }\n            return { type: buttonTypeStr, alternate: 'ios', link: viewrLink, os: 'desktop', roomleType: typeStr, id: id };\n        }\n        if (buttonType === ButtonsService_1.BUTTON_TYPE.START_NOW) {\n            var viewrLink = 'roomleviewer://plan/' + id;\n            if (this.isAndroid()) {\n                return {\n                    type: buttonTypeStr,\n                    alternate: null,\n                    link: viewrLink,\n                    os: 'android',\n                    roomleType: typeStr,\n                    id: id\n                };\n            }\n            if (this.isIOS()) {\n                return {\n                    type: buttonTypeStr,\n                    alternate: null,\n                    link: iosPlanLink,\n                    os: 'ios',\n                    roomleType: typeStr,\n                    id: id\n                };\n            }\n            return {\n                type: buttonTypeStr,\n                alternate: null,\n                link: desktopLink,\n                os: 'desktop',\n                roomleType: typeStr,\n                id: id\n            };\n        }\n        return null;\n    };\n    MobileDetectService.prototype.createLinkForItemOrConfiguration = function (id, type, buttonType, isItem) {\n        var typeStr = type;\n        var buttonTypeStr = ButtonsService_1.ButtonsService.convertButtonType(buttonType);\n        if (isItem) {\n        }\n        var iosIdentifier = (!isItem && type !== RoomleTypeService_1.ROOMLE_TYPE.CONFIGURABLE_ITEM) ? 'configurationId' : 'catalogItemId';\n        var webIdentifier = (!isItem && type !== RoomleTypeService_1.ROOMLE_TYPE.CONFIGURABLE_ITEM) ? 'configurationId[]' : 'itemId[]';\n        if (buttonType === ButtonsService_1.BUTTON_TYPE.ADD) {\n            var desktopLink = SettingsService_1.SettingsService.settings.web.baseUrl + 'editor/' + SettingsService_1.SettingsService.settings.planId + '?' + webIdentifier + '=' + id;\n            var iosLink = 'roomle://addToPlan/' + iosIdentifier + '/' + id + '?planId=' + SettingsService_1.SettingsService.settings.planId;\n            if (this.isAndroid()) {\n                return {\n                    type: buttonTypeStr,\n                    alternate: 'desktop',\n                    link: desktopLink,\n                    os: 'android',\n                    roomleType: typeStr,\n                    id: id\n                };\n            }\n            if (this.isIOS()) {\n                return null; //{type: buttonTypeStr, alternate: null, link: iosLink, os: 'ios', roomleType: typeStr, id: id};\n            }\n            return {\n                type: buttonTypeStr,\n                alternate: null,\n                link: desktopLink,\n                os: 'desktop',\n                roomleType: typeStr,\n                id: id\n            };\n        }\n        if (buttonType === ButtonsService_1.BUTTON_TYPE.AR) {\n            var iosLink = 'roomle://ar/' + iosIdentifier + '/' + id;\n            if (this.isAndroid()) {\n                return {\n                    type: buttonTypeStr,\n                    alternate: 'ios',\n                    link: iosLink,\n                    os: 'android',\n                    roomleType: typeStr,\n                    id: id\n                };\n            }\n            if (this.isIOS()) {\n                return { type: buttonTypeStr, alternate: null, link: iosLink, os: 'ios', roomleType: typeStr, id: id };\n            }\n            return { type: buttonTypeStr, alternate: 'ios', link: iosLink, os: 'desktop', roomleType: typeStr, id: id };\n        }\n        if (buttonType === ButtonsService_1.BUTTON_TYPE.CONFIGURE && (type === RoomleTypeService_1.ROOMLE_TYPE.CONFIGURATION || type === RoomleTypeService_1.ROOMLE_TYPE.CONFIGURABLE_ITEM)) {\n            var isConfigurableItem = (type === RoomleTypeService_1.ROOMLE_TYPE.CONFIGURATION) ? false : true;\n            var desktopLink = SettingsService_1.SettingsService.settings.web.baseUrl + 'configurator/' + id + (isConfigurableItem ? '?isItem=true' : '');\n            var iosLink = 'roomle://configuration/' + iosIdentifier + '/' + id;\n            if (this.isAndroid()) {\n                return {\n                    type: buttonTypeStr,\n                    alternate: 'desktop',\n                    link: desktopLink,\n                    os: 'android',\n                    roomleType: typeStr,\n                    id: id\n                };\n            }\n            if (this.isIOS()) {\n                return { type: buttonTypeStr, alternate: null, link: iosLink, os: 'ios', roomleType: typeStr, id: id };\n            }\n            return {\n                type: buttonTypeStr,\n                alternate: null,\n                link: desktopLink,\n                os: 'desktop',\n                roomleType: typeStr,\n                id: id\n            };\n        }\n        if (buttonType === ButtonsService_1.BUTTON_TYPE.MARK) {\n            if (this.isAndroid()) {\n                return {\n                    type: buttonTypeStr,\n                    alternate: null,\n                    link: 'www.roomle.com',\n                    os: 'android',\n                    roomleType: typeStr,\n                    id: id\n                };\n            }\n            if (this.isIOS()) {\n                return {\n                    type: buttonTypeStr,\n                    alternate: null,\n                    link: 'www.roomle.com',\n                    os: 'ios',\n                    roomleType: typeStr,\n                    id: id\n                };\n            }\n            return {\n                type: buttonTypeStr,\n                alternate: null,\n                link: 'www.roomle.com',\n                os: 'desktop',\n                roomleType: typeStr,\n                id: id\n            };\n        }\n        if (buttonType === ButtonsService_1.BUTTON_TYPE.VISUALIZE) {\n            if (this.isAndroid()) {\n                return {\n                    type: buttonTypeStr,\n                    alternate: null,\n                    link: 'roomleviewer://item/' + id,\n                    os: 'android',\n                    roomleType: typeStr,\n                    id: id\n                };\n            }\n            if (this.isIOS()) {\n                return null;\n            }\n            return null; // {type: buttonTypeStr, alternate: '', link: 'www.roomle'};\n        }\n        return null;\n    };\n    MobileDetectService.prototype.handleItem = function (id, type, buttonType) {\n        var isItem = true;\n        return this.createLinkForItemOrConfiguration(id, type, buttonType, isItem);\n    };\n    MobileDetectService.prototype.handleConfiguration = function (id, type, buttonType) {\n        var isItem = false;\n        return this.createLinkForItemOrConfiguration(id, type, buttonType, isItem);\n    };\n    MobileDetectService.prototype.generateLink = function (id, type, buttonType, callbackUrl) {\n        if (callbackUrl === void 0) { callbackUrl = null; }\n        var deeplink = null;\n        if (type === RoomleTypeService_1.ROOMLE_TYPE.ITEM) {\n            deeplink = this.handleItem(id, type, buttonType);\n        }\n        else if (type === RoomleTypeService_1.ROOMLE_TYPE.CONFIGURATION || type === RoomleTypeService_1.ROOMLE_TYPE.CONFIGURABLE_ITEM) {\n            deeplink = this.handleConfiguration(id, type, buttonType);\n        }\n        else if (type === RoomleTypeService_1.ROOMLE_TYPE.PLAN) {\n            deeplink = this.handlePlan(id, type, buttonType);\n        }\n        if (!deeplink) {\n            return null;\n        }\n        var seperator = deeplink.link.indexOf('?') === -1 ? '?' : '&';\n        deeplink.link = deeplink.link + seperator + 'callback=' + callbackUrl;\n        return deeplink;\n    };\n    MobileDetectService.prototype.getLinks = function (id, type, callbackUrl) {\n        var _this = this;\n        if (callbackUrl === void 0) { callbackUrl = null; }\n        var availableButtons = this.buttonsService.availableButtons;\n        var links = [];\n        availableButtons.forEach(function (button) {\n            var link = _this.generateLink(id, type, button, callbackUrl);\n            if (link) {\n                links.push(link);\n            }\n        });\n        return links;\n    };\n    return MobileDetectService;\n}(Service_1.Service));\nexports.MobileDetectService = MobileDetectService;\n\n},{\"../lib/Service\":10,\"./ButtonsService\":12,\"./RoomleTypeService\":22,\"./SettingsService\":23}],19:[function(require,module,exports){\n\"use strict\";\nvar __extends = (this && this.__extends) || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\nvar Service_1 = require('../lib/Service');\nvar MobileRedirectService = (function (_super) {\n    __extends(MobileRedirectService, _super);\n    function MobileRedirectService() {\n        _super.apply(this, arguments);\n        this.delay = 1200;\n        this.oss = {\n            android: {\n                storePrefix: 'https://play.google.com/store/apps/details?id='\n            },\n            ios: {\n                storePrefix: 'https://itunes.apple.com/app/'\n            }\n        };\n    }\n    MobileRedirectService.prototype.getTime = function () {\n        return new Date().getTime();\n    };\n    MobileRedirectService.prototype.open = function (url, newWindow, callback) {\n        if (newWindow === void 0) { newWindow = false; }\n        if (callback === void 0) { callback = null; }\n        if (typeof callback === 'function') {\n            return callback(url);\n        }\n        if (newWindow) {\n            window.open(url);\n        }\n        else {\n            window.location.href = url;\n        }\n    };\n    MobileRedirectService.prototype.handleAndroidBrowsers = function (appId, href, scheme) {\n        // Android Mobile\n        var isAndroidMobile = navigator.userAgent.indexOf('Android') > -1 &&\n            navigator.userAgent.indexOf('Mozilla/5.0') > -1 &&\n            navigator.userAgent.indexOf('AppleWebKit') > -1;\n        // Android Browser (not Chrome)\n        var regExAppleWebKit = new RegExp('AppleWebKit\\/([\\d.]+)');\n        var resultAppleWebKitRegEx = regExAppleWebKit.exec(navigator.userAgent);\n        var appleWebKitVersion = (resultAppleWebKitRegEx === null ? null : parseFloat(regExAppleWebKit.exec(navigator.userAgent)[1]));\n        var isAndroidBrowser = isAndroidMobile && appleWebKitVersion !== null && appleWebKitVersion > 500;\n        if (isAndroidBrowser) {\n            return 'intent:' + href.split(':')[1] + '#Intent;scheme=' + scheme + ';package=' +\n                appId + ';S.browser_fallback_url=' + encodeURI(href);\n        }\n        else {\n            return href;\n        }\n    };\n    MobileRedirectService.prototype.redirect = function (deeplink, newWindow, callback) {\n        if (newWindow === void 0) { newWindow = false; }\n        if (callback === void 0) { callback = null; }\n        this.perfromDeepLink(deeplink.link, deeplink.os, newWindow, callback);\n    };\n    MobileRedirectService.prototype.perfromDeepLink = function (href, os, newWindow, callback) {\n        var _this = this;\n        if (newWindow === void 0) { newWindow = false; }\n        if (callback === void 0) { callback = null; }\n        var clicked = false;\n        var timeout = null;\n        var data = this.parseHref(href, os);\n        var scheme = data.scheme;\n        var appId = data.appId;\n        var start = this.getTime();\n        clicked = true;\n        timeout = setTimeout(function () {\n            if (os === 'desktop') {\n                return;\n            }\n            if (!clicked || !timeout) {\n                return;\n            }\n            var now = _this.getTime();\n            clicked = false;\n            timeout = null;\n            if (now - start >= _this.delay * 2) {\n                return;\n            }\n            if (appId) {\n                _this.open(_this.oss[os].storePrefix + appId, newWindow);\n            }\n            else if (href) {\n                _this.open(href, newWindow);\n            }\n        }, this.delay);\n        //appId, this.oss[os].storePrefix + appId, href, scheme\n        var finalURI = this.handleAndroidBrowsers(appId, href, scheme);\n        this.open(finalURI, newWindow, callback);\n    };\n    MobileRedirectService.prototype.parseHref = function (href, osin) {\n        var hrefParts = href.split(':');\n        var scheme = hrefParts[0];\n        var appId = 'roomle/id732050356';\n        if (scheme === 'roomleviewer') {\n            appId = 'com.roomle.viewer';\n            if (osin === 'ios') {\n                appId = 'roomle-viewr/id1053860177';\n            }\n        }\n        return { appId: appId, scheme: scheme, os: osin };\n    };\n    MobileRedirectService.prototype.createDeeplinkFor = function (el, os) {\n        var _this = this;\n        var href = el.getAttribute('href');\n        var data = this.parseHref(href, os);\n        var appId = data.appId;\n        if (os && appId) {\n            el.addEventListener('click', function (e) {\n                e.preventDefault();\n                e.stopImmediatePropagation();\n                _this.perfromDeepLink(href, os);\n            });\n        }\n        else if (!href || href === '#') {\n            el.style.display = 'none';\n        }\n    };\n    ;\n    return MobileRedirectService;\n}(Service_1.Service));\nexports.MobileRedirectService = MobileRedirectService;\n\n},{\"../lib/Service\":10}],20:[function(require,module,exports){\n\"use strict\";\nvar __extends = (this && this.__extends) || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\nvar Service_1 = require('../lib/Service');\nvar PolyfillService = (function (_super) {\n    __extends(PolyfillService, _super);\n    function PolyfillService() {\n        _super.call(this);\n        if (!Element.prototype.matches) {\n            // CAST TO ANY AS QUICK&DIRTY SOLUTION FOR NON STANDARD NAMES!\n            Element.prototype.matches =\n                Element.prototype.matchesSelector ||\n                    Element.prototype.mozMatchesSelector ||\n                    Element.prototype.msMatchesSelector ||\n                    Element.prototype.oMatchesSelector ||\n                    Element.prototype.webkitMatchesSelector ||\n                    function (s) {\n                        var matches = (this.document || this.ownerDocument).querySelectorAll(s), i = matches.length;\n                        while (--i >= 0 && matches.item(i) !== this) {\n                        }\n                        return i > -1;\n                    };\n        }\n    }\n    return PolyfillService;\n}(Service_1.Service));\nexports.PolyfillService = PolyfillService;\n\n},{\"../lib/Service\":10}],21:[function(require,module,exports){\n\"use strict\";\nvar __extends = (this && this.__extends) || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\nvar es6_promise_1 = require('es6-promise');\nvar Service_1 = require('../lib/Service');\nvar RequestService = (function (_super) {\n    __extends(RequestService, _super);\n    function RequestService() {\n        _super.apply(this, arguments);\n    }\n    RequestService.prototype.fetch = function (url, options) {\n        return new es6_promise_1.Promise(function (resolve, reject) {\n            if (!options) {\n                options = {};\n            }\n            var xhr = new XMLHttpRequest();\n            var headers = options.headers;\n            // Check if method is GET and body ias an object\n            // If it is so, parse body object an append all properties as GET parameters to the url\n            if (options.method === 'GET' && options.body) {\n                if (typeof options.body === 'object') {\n                    var separator = '';\n                    var uri = '';\n                    for (var key in options.body) {\n                        if (options.body.hasOwnProperty(key)) {\n                            var encodedKey = encodeURIComponent(key);\n                            var encodedContent = encodeURIComponent(options.body[key]);\n                            uri += \"\" + separator + encodedKey + \"=\" + encodedContent;\n                            separator = '&';\n                        }\n                    }\n                    // append the parameters to the url\n                    url = url + (url.indexOf('?') === -1 ? '?' : '&') + uri;\n                }\n                else {\n                    // Body is not an object => not allowed\n                    reject(new TypeError('Non object like body not allowed for GET requests. The body has to be an object so the properties will be appended as a GET parameter to the url.'));\n                    return;\n                }\n            }\n            else if (typeof options.body !== 'string') {\n                // if body is not a string, parse it to a json string\n                options.body = JSON.stringify(options.body);\n            }\n            // Body not allowed for HEAD requests\n            if (options.method === 'HEAD' && options.body) {\n                reject(new TypeError('Body not allowed for HEAD requests'));\n                return;\n            }\n            // Add onload event listener\n            xhr.onload = function (event) {\n                if (xhr.status >= 400 || xhr.status === 0) {\n                    reject(new Error(xhr.responseText));\n                }\n                else {\n                    resolve('response' in xhr ? xhr.response : xhr.responseText);\n                }\n            };\n            // Add onerror event listener\n            xhr.onerror = function (event) {\n                reject(event.error);\n            };\n            xhr.onabort = function (event) {\n                reject(new TypeError('Network request aborted'));\n            };\n            // Add timeout event listener\n            xhr.ontimeout = function (event) {\n                reject(new TypeError('Network request timed out'));\n            };\n            if (options.credentials && options.credentials.username) {\n                xhr.open(options.method ? options.method : 'GET', url, true, options.credentials.username, options.credentials.password);\n            }\n            else {\n                xhr.open(options.method ? options.method : 'GET', url, true);\n            }\n            if (typeof headers === 'object') {\n                for (var key in headers) {\n                    if (headers.hasOwnProperty(key)) {\n                        xhr.setRequestHeader(key, headers[key]);\n                    }\n                }\n            }\n            xhr.send(typeof options.body === 'undefined' ? null : options.body);\n        });\n    };\n    RequestService.prototype.fetchJSON = function (url, options) {\n        if (!options) {\n            options = {};\n        }\n        if (!options.headers) {\n            options.headers = {};\n        }\n        if (!options.headers['Content-Type']) {\n            options.headers['Content-Type'] = 'application/json';\n        }\n        return this.fetch(url, options).then(function (result) {\n            return JSON.parse(result);\n        });\n    };\n    return RequestService;\n}(Service_1.Service));\nexports.RequestService = RequestService;\n\n},{\"../lib/Service\":10,\"es6-promise\":1}],22:[function(require,module,exports){\n\"use strict\";\n(function (ROOMLE_TYPE) {\n    ROOMLE_TYPE[ROOMLE_TYPE[\"ITEM\"] = 0] = \"ITEM\";\n    ROOMLE_TYPE[ROOMLE_TYPE[\"CONFIGURATION\"] = 1] = \"CONFIGURATION\";\n    ROOMLE_TYPE[ROOMLE_TYPE[\"PLAN\"] = 2] = \"PLAN\";\n    ROOMLE_TYPE[ROOMLE_TYPE[\"CONFIGURABLE_ITEM\"] = 3] = \"CONFIGURABLE_ITEM\";\n})(exports.ROOMLE_TYPE || (exports.ROOMLE_TYPE = {}));\nvar ROOMLE_TYPE = exports.ROOMLE_TYPE;\nvar RoomleTypeService = (function () {\n    function RoomleTypeService() {\n    }\n    // TYPES ARE FROM OUTSIDE CONVERT THEM TO ENUM BECAUSE \"item\" is nicer than \"0\"\n    RoomleTypeService.convertTypeToEnum = function (type) {\n        if (type === 'item') {\n            return ROOMLE_TYPE.ITEM;\n        }\n        if (type === 'configuration') {\n            return ROOMLE_TYPE.CONFIGURATION;\n        }\n        if (type === 'plan') {\n            return ROOMLE_TYPE.PLAN;\n        }\n        if (type === 'configurable-item') {\n            return ROOMLE_TYPE.CONFIGURABLE_ITEM;\n        }\n        return null;\n    };\n    RoomleTypeService.convertRoomleType = function (type) {\n        if (type === ROOMLE_TYPE.ITEM) {\n            return 'item';\n        }\n        if (type === ROOMLE_TYPE.CONFIGURATION) {\n            return 'configuration';\n        }\n        if (type === ROOMLE_TYPE.PLAN) {\n            return 'plan';\n        }\n        if (type === ROOMLE_TYPE.CONFIGURABLE_ITEM) {\n            return 'configurable-item';\n        }\n        return null;\n    };\n    return RoomleTypeService;\n}());\nexports.RoomleTypeService = RoomleTypeService;\n\n},{}],23:[function(require,module,exports){\n\"use strict\";\nvar SettingsService = (function () {\n    function SettingsService(settings) {\n        this.settings = settings;\n    }\n    SettingsService.setDefault = function (settings, key, defaultValue) {\n        var toCheck = settings;\n        var keys = key.split('.');\n        var keysLength = keys.length - 1; // LAST ONE IS SET OUTSIDE THE LOOP\n        for (var i = 0; i < keysLength; i++) {\n            if (!toCheck[keys[i]]) {\n                toCheck[keys[i]] = {};\n            }\n            toCheck = toCheck[keys[i]];\n        }\n        if (toCheck[keys[keysLength]] === undefined) {\n            toCheck[keys[keysLength]] = defaultValue;\n        }\n    };\n    SettingsService.setDeeplinkTranslation = function (settings, linkType, translation) {\n        SettingsService.setDefault(settings, 'translations.' + linkType + '.heading', translation.heading);\n        SettingsService.setDefault(settings, 'translations.' + linkType + '.hint.ios', translation.hint.ios);\n        SettingsService.setDefault(settings, 'translations.' + linkType + '.hint.android', translation.hint.android);\n        SettingsService.setDefault(settings, 'translations.' + linkType + '.hint.desktop', translation.hint.desktop);\n    };\n    SettingsService.init = function (settings) {\n        if (!(this._instance instanceof SettingsService)) {\n            SettingsService.setDefault(settings, 'web.baseUrl', 'https://www.roomle.com/app/');\n            SettingsService.setDefault(settings, 'viewr.baseUrl', 'https://www.roomle.com/');\n            SettingsService.setDefault(settings, 'ios.baseUrl', 'https://www.roomle.com/');\n            SettingsService.setDefault(settings, 'dataSelector.type', 'data-rml-type');\n            SettingsService.setDefault(settings, 'dataSelector.id', 'data-rml-id');\n            SettingsService.setDefault(settings, 'dataSelector.action', 'data-rml-action');\n            SettingsService.setDefault(settings, 'planId', '8a708083560ca6cf01560cd7361a014a');\n            SettingsService.setDefault(settings, 'createPopUp', true);\n            SettingsService.setDefault(settings, 'showBackButton', true);\n            SettingsService.setDefault(settings, 'html.containerClass', 'roomle-buttons');\n            SettingsService.setDefault(settings, 'html.containerType', 'div');\n            SettingsService.setDefault(settings, 'html.buttonsContainer', 'ul');\n            SettingsService.setDefault(settings, 'html.buttonElement', 'li');\n            SettingsService.setDefault(settings, 'css.buttons.position', 'absolute');\n            SettingsService.setDefault(settings, 'css.buttons.top', '0');\n            SettingsService.setDefault(settings, 'css.buttons.right', '0');\n            SettingsService.setDefault(settings, 'css.buttons.line-height', 'normal');\n            SettingsService.setDefault(settings, 'css.buttons.visibility', 'visible !important');\n            SettingsService.setDefault(settings, 'css.item.position', 'relative');\n            SettingsService.setDefault(settings, 'callback', {});\n            SettingsService.setDefault(settings, 'callback.button', {});\n            SettingsService.setDefault(settings, 'popUpSelector', 'data-rml-deeplink-popup-container');\n            SettingsService.setDefault(settings, 'callback.booted', function () {\n            });\n            SettingsService.setDefault(settings, 'translations.errors.deeplinkcreate', 'Error creating deeplink');\n            var hint = ''; //'This feature is not available on your platform. ';\n            var androidHint = hint + 'Enter the following link into the browser of your desktop device';\n            var iosHint = hint + 'Enter the following link into the browser of your iOS device';\n            this.setDeeplinkTranslation(settings, 'ar', {\n                heading: 'Visualize in AR',\n                hint: { ios: iosHint, android: null, desktop: null }\n            });\n            this.setDeeplinkTranslation(settings, 'add', {\n                heading: 'Add to plan',\n                hint: { ios: null, android: null, desktop: androidHint }\n            });\n            this.setDeeplinkTranslation(settings, 'configure', {\n                heading: 'Customize',\n                hint: { ios: null, android: null, desktop: androidHint }\n            });\n            this.setDeeplinkTranslation(settings, 'mark', {\n                heading: 'Favourite',\n                hint: { ios: null, android: null, desktop: null }\n            });\n            this.setDeeplinkTranslation(settings, 'trigger', {\n                heading: 'Trigger',\n                hint: { ios: null, android: null, desktop: null }\n            });\n            this.setDeeplinkTranslation(settings, 'visualize', {\n                heading: 'Visualize',\n                hint: { ios: null, android: androidHint, desktop: null }\n            });\n            this.setDeeplinkTranslation(settings, 'vr', {\n                heading: 'View in VR',\n                hint: { ios: iosHint, android: '', desktop: '' }\n            });\n            this.setDeeplinkTranslation(settings, 'start_now', {\n                heading: 'Start planning now',\n                hint: { ios: iosHint, android: '', desktop: '' }\n            });\n            this._instance = new this(settings);\n        }\n        return this._instance;\n    };\n    SettingsService.getInstance = function () {\n        return this._instance;\n    };\n    Object.defineProperty(SettingsService, \"settings\", {\n        get: function () {\n            return SettingsService.getInstance().settings;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return SettingsService;\n}());\nexports.SettingsService = SettingsService;\n\n},{}],24:[function(require,module,exports){\n\"use strict\";\nvar EnumEx = (function () {\n    function EnumEx() {\n    }\n    EnumEx.getNamesAndValues = function (e) {\n        return this.getNames(e).map(function (n) { return { name: n, value: e[n] }; });\n    };\n    EnumEx.getNames = function (e) {\n        return this.getObjValues(e).filter(function (v) { return typeof v === 'string'; });\n    };\n    EnumEx.getValues = function (e) {\n        return this.getObjValues(e).filter(function (v) { return typeof v === 'number'; });\n    };\n    EnumEx.getObjValues = function (e) {\n        return Object.keys(e).map(function (k) { return e[k]; });\n    };\n    return EnumEx;\n}());\nexports.EnumEx = EnumEx;\n\n},{}],25:[function(require,module,exports){\n\n},{}]},{},[11,25]);\n"]}